import{r as m,a as xn,b as gn}from"./vendor-BnAv-nsF.js";import{u as za,B as jn,R as vn,a as da,N as ma}from"./router-DOm5wjR5.js";import{C as fa,c as Ha,o as hn,s as Ta,a as yn}from"./utils-Dq7FJXLK.js";import{a as wa,u as Ya,b as wn}from"./ui-DJNPBiSa.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(c){if(c.ep)return;c.ep=!0;const o=s(c);fetch(c.href,o)}})();var Wa={exports:{}},ga={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=m,n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),C=Symbol.iterator,R="@@iterator";function B(t){if(t===null||typeof t!="object")return null;var p=C&&t[C]||t[R];return typeof p=="function"?p:null}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(t){{for(var p=arguments.length,g=new Array(p>1?p-1:0),y=1;y<p;y++)g[y-1]=arguments[y];h("error",t,g)}}function h(t,p,g){{var y=j.ReactDebugCurrentFrame,M=y.getStackAddendum();M!==""&&(p+="%s",g=g.concat([M]));var $=g.map(function(A){return String(A)});$.unshift("Warning: "+p),Function.prototype.apply.call(console[t],console,$)}}var O=!1,ae=!1,fe=!1,de=!1,Ve=!1,J;J=Symbol.for("react.module.reference");function he(t){return!!(typeof t=="string"||typeof t=="function"||t===r||t===o||Ve||t===c||t===d||t===f||de||t===D||O||ae||fe||typeof t=="object"&&t!==null&&(t.$$typeof===x||t.$$typeof===b||t.$$typeof===l||t.$$typeof===u||t.$$typeof===i||t.$$typeof===J||t.getModuleId!==void 0))}function w(t,p,g){var y=t.displayName;if(y)return y;var M=p.displayName||p.name||"";return M!==""?g+"("+M+")":g}function te(t){return t.displayName||"Context"}function I(t){if(t==null)return null;if(typeof t.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case r:return"Fragment";case s:return"Portal";case o:return"Profiler";case c:return"StrictMode";case d:return"Suspense";case f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u:var p=t;return te(p)+".Consumer";case l:var g=t;return te(g._context)+".Provider";case i:return w(t,t.render,"ForwardRef");case b:var y=t.displayName||null;return y!==null?y:I(t.type)||"Memo";case x:{var M=t,$=M._payload,A=M._init;try{return I(A($))}catch{return null}}}return null}var Y=Object.assign,W=0,ye,be,we,z,ie,Q,G;function Ne(){}Ne.__reactDisabledLog=!0;function sa(){{if(W===0){ye=console.log,be=console.info,we=console.warn,z=console.error,ie=console.group,Q=console.groupCollapsed,G=console.groupEnd;var t={configurable:!0,enumerable:!0,value:Ne,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}W++}}function ta(){{if(W--,W===0){var t={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Y({},t,{value:ye}),info:Y({},t,{value:be}),warn:Y({},t,{value:we}),error:Y({},t,{value:z}),group:Y({},t,{value:ie}),groupCollapsed:Y({},t,{value:Q}),groupEnd:Y({},t,{value:G})})}W<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Be=j.ReactCurrentDispatcher,ze;function De(t,p,g){{if(ze===void 0)try{throw Error()}catch(M){var y=M.stack.trim().match(/\n( *(at )?)/);ze=y&&y[1]||""}return`
`+ze+t}}var ke=!1,re;{var Te=typeof WeakMap=="function"?WeakMap:Map;re=new Te}function _e(t,p){if(!t||ke)return"";{var g=re.get(t);if(g!==void 0)return g}var y;ke=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var $;$=Be.current,Be.current=null,sa();try{if(p){var A=function(){throw Error()};if(Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(ue){y=ue}Reflect.construct(t,[],A)}else{try{A.call()}catch(ue){y=ue}t.call(A.prototype)}}else{try{throw Error()}catch(ue){y=ue}t()}}catch(ue){if(ue&&y&&typeof ue.stack=="string"){for(var V=ue.stack.split(`
`),oe=y.stack.split(`
`),H=V.length-1,K=oe.length-1;H>=1&&K>=0&&V[H]!==oe[K];)K--;for(;H>=1&&K>=0;H--,K--)if(V[H]!==oe[K]){if(H!==1||K!==1)do if(H--,K--,K<0||V[H]!==oe[K]){var me=`
`+V[H].replace(" at new "," at ");return t.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",t.displayName)),typeof t=="function"&&re.set(t,me),me}while(H>=1&&K>=0);break}}}finally{ke=!1,Be.current=$,ta(),Error.prepareStackTrace=M}var Oe=t?t.displayName||t.name:"",Se=Oe?De(Oe):"";return typeof t=="function"&&re.set(t,Se),Se}function Me(t,p,g){return _e(t,!1)}function ra(t){var p=t.prototype;return!!(p&&p.isReactComponent)}function Fe(t,p,g){if(t==null)return"";if(typeof t=="function")return _e(t,ra(t));if(typeof t=="string")return De(t);switch(t){case d:return De("Suspense");case f:return De("SuspenseList")}if(typeof t=="object")switch(t.$$typeof){case i:return Me(t.render);case b:return Fe(t.type,p,g);case x:{var y=t,M=y._payload,$=y._init;try{return Fe($(M),p,g)}catch{}}}return""}var Ue=Object.prototype.hasOwnProperty,Ge={},He=j.ReactDebugCurrentFrame;function Re(t){if(t){var p=t._owner,g=Fe(t.type,t._source,p?p.type:null);He.setExtraStackFrame(g)}else He.setExtraStackFrame(null)}function Ke(t,p,g,y,M){{var $=Function.call.bind(Ue);for(var A in t)if($(t,A)){var V=void 0;try{if(typeof t[A]!="function"){var oe=Error((y||"React class")+": "+g+" type `"+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[A]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw oe.name="Invariant Violation",oe}V=t[A](p,A,y,g,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(H){V=H}V&&!(V instanceof Error)&&(Re(M),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",y||"React class",g,A,typeof V),Re(null)),V instanceof Error&&!(V.message in Ge)&&(Ge[V.message]=!0,Re(M),v("Failed %s type: %s",g,V.message),Re(null))}}}var Je=Array.isArray;function N(t){return Je(t)}function S(t){{var p=typeof Symbol=="function"&&Symbol.toStringTag,g=p&&t[Symbol.toStringTag]||t.constructor.name||"Object";return g}}function F(t){try{return T(t),!1}catch{return!0}}function T(t){return""+t}function Z(t){if(F(t))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",S(t)),T(t)}var _=j.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0},ne,L,q;q={};function ce(t){if(Ue.call(t,"ref")){var p=Object.getOwnPropertyDescriptor(t,"ref").get;if(p&&p.isReactWarning)return!1}return t.ref!==void 0}function le(t){if(Ue.call(t,"key")){var p=Object.getOwnPropertyDescriptor(t,"key").get;if(p&&p.isReactWarning)return!1}return t.key!==void 0}function oa(t,p){if(typeof t.ref=="string"&&_.current&&p&&_.current.stateNode!==p){var g=I(_.current.type);q[g]||(v('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',I(_.current.type),t.ref),q[g]=!0)}}function tn(t,p){{var g=function(){ne||(ne=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",p))};g.isReactWarning=!0,Object.defineProperty(t,"key",{get:g,configurable:!0})}}function rn(t,p){{var g=function(){L||(L=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",p))};g.isReactWarning=!0,Object.defineProperty(t,"ref",{get:g,configurable:!0})}}var on=function(t,p,g,y,M,$,A){var V={$$typeof:n,type:t,key:p,ref:g,props:A,_owner:$};return V._store={},Object.defineProperty(V._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(V,"_self",{configurable:!1,enumerable:!1,writable:!1,value:y}),Object.defineProperty(V,"_source",{configurable:!1,enumerable:!1,writable:!1,value:M}),Object.freeze&&(Object.freeze(V.props),Object.freeze(V)),V};function cn(t,p,g,y,M){{var $,A={},V=null,oe=null;g!==void 0&&(Z(g),V=""+g),le(p)&&(Z(p.key),V=""+p.key),ce(p)&&(oe=p.ref,oa(p,M));for($ in p)Ue.call(p,$)&&!E.hasOwnProperty($)&&(A[$]=p[$]);if(t&&t.defaultProps){var H=t.defaultProps;for($ in H)A[$]===void 0&&(A[$]=H[$])}if(V||oe){var K=typeof t=="function"?t.displayName||t.name||"Unknown":t;V&&tn(A,K),oe&&rn(A,K)}return on(t,V,oe,M,y,_.current,A)}}var ia=j.ReactCurrentOwner,Va=j.ReactDebugCurrentFrame;function Ie(t){if(t){var p=t._owner,g=Fe(t.type,t._source,p?p.type:null);Va.setExtraStackFrame(g)}else Va.setExtraStackFrame(null)}var ca;ca=!1;function la(t){return typeof t=="object"&&t!==null&&t.$$typeof===n}function Ua(){{if(ia.current){var t=I(ia.current.type);if(t)return`

Check the render method of \``+t+"`."}return""}}function ln(t){{if(t!==void 0){var p=t.fileName.replace(/^.*[\\\/]/,""),g=t.lineNumber;return`

Check your code at `+p+":"+g+"."}return""}}var Sa={};function un(t){{var p=Ua();if(!p){var g=typeof t=="string"?t:t.displayName||t.name;g&&(p=`

Check the top-level render call using <`+g+">.")}return p}}function Aa(t,p){{if(!t._store||t._store.validated||t.key!=null)return;t._store.validated=!0;var g=un(p);if(Sa[g])return;Sa[g]=!0;var y="";t&&t._owner&&t._owner!==ia.current&&(y=" It was passed a child from "+I(t._owner.type)+"."),Ie(t),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',g,y),Ie(null)}}function Pa(t,p){{if(typeof t!="object")return;if(N(t))for(var g=0;g<t.length;g++){var y=t[g];la(y)&&Aa(y,p)}else if(la(t))t._store&&(t._store.validated=!0);else if(t){var M=B(t);if(typeof M=="function"&&M!==t.entries)for(var $=M.call(t),A;!(A=$.next()).done;)la(A.value)&&Aa(A.value,p)}}}function dn(t){{var p=t.type;if(p==null||typeof p=="string")return;var g;if(typeof p=="function")g=p.propTypes;else if(typeof p=="object"&&(p.$$typeof===i||p.$$typeof===b))g=p.propTypes;else return;if(g){var y=I(p);Ke(g,t.props,"prop",y,t)}else if(p.PropTypes!==void 0&&!ca){ca=!0;var M=I(p);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",M||"Unknown")}typeof p.getDefaultProps=="function"&&!p.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function mn(t){{for(var p=Object.keys(t.props),g=0;g<p.length;g++){var y=p[g];if(y!=="children"&&y!=="key"){Ie(t),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",y),Ie(null);break}}t.ref!==null&&(Ie(t),v("Invalid attribute `ref` supplied to `React.Fragment`."),Ie(null))}}var ka={};function fn(t,p,g,y,M,$){{var A=he(t);if(!A){var V="";(t===void 0||typeof t=="object"&&t!==null&&Object.keys(t).length===0)&&(V+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var oe=ln(M);oe?V+=oe:V+=Ua();var H;t===null?H="null":N(t)?H="array":t!==void 0&&t.$$typeof===n?(H="<"+(I(t.type)||"Unknown")+" />",V=" Did you accidentally export a JSX literal instead of a component?"):H=typeof t,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",H,V)}var K=cn(t,p,g,M,$);if(K==null)return K;if(A){var me=p.children;if(me!==void 0)if(y)if(N(me)){for(var Oe=0;Oe<me.length;Oe++)Pa(me[Oe],t);Object.freeze&&Object.freeze(me)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Pa(me,t)}if(Ue.call(p,"key")){var Se=I(t),ue=Object.keys(p).filter(function(Nn){return Nn!=="key"}),ua=ue.length>0?"{key: someKey, "+ue.join(": ..., ")+": ...}":"{key: someKey}";if(!ka[Se+ua]){var bn=ue.length>0?"{"+ue.join(": ..., ")+": ...}":"{}";v(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ua,Se,bn,Se),ka[Se+ua]=!0}}return t===r?mn(K):dn(K),K}}var pn=fn;ga.Fragment=r,ga.jsxDEV=pn})();Wa.exports=ga;var a=Wa.exports,Ga,_a=xn;{var Ma=_a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ga=function(e,n){Ma.usingClientEntryPoint=!0;try{return _a.createRoot(e,n)}finally{Ma.usingClientEntryPoint=!1}}}let Dn={data:""},En=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Dn,Cn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Vn=/\/\*[^]*?\*\/|  +/g,Fa=/\n+/g,Ee=(e,n)=>{let s="",r="",c="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?s=o+" "+l+";":r+=o[1]=="f"?Ee(l,o):o+"{"+Ee(l,o[1]=="k"?"":n)+"}":typeof l=="object"?r+=Ee(l,n?n.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,i=>/&/.test(i)?i.replace(/&/g,u):u?u+" "+i:i)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=Ee.p?Ee.p(o,l):o+":"+l+";")}return s+(n&&c?n+"{"+c+"}":c)+r},ge={},Ka=e=>{if(typeof e=="object"){let n="";for(let s in e)n+=s+Ka(e[s]);return n}return e},Un=(e,n,s,r,c)=>{let o=Ka(e),l=ge[o]||(ge[o]=(i=>{let d=0,f=11;for(;d<i.length;)f=101*f+i.charCodeAt(d++)>>>0;return"go"+f})(o));if(!ge[l]){let i=o!==e?e:(d=>{let f,b,x=[{}];for(;f=Cn.exec(d.replace(Vn,""));)f[4]?x.shift():f[3]?(b=f[3].replace(Fa," ").trim(),x.unshift(x[0][b]=x[0][b]||{})):x[0][f[1]]=f[2].replace(Fa," ").trim();return x[0]})(e);ge[l]=Ee(c?{["@keyframes "+l]:i}:i,s?"":"."+l)}let u=s&&ge.g?ge.g:null;return s&&(ge.g=ge[l]),((i,d,f,b)=>{b?d.data=d.data.replace(b,i):d.data.indexOf(i)===-1&&(d.data=f?i+d.data:d.data+i)})(ge[l],n,r,u),l},Sn=(e,n,s)=>e.reduce((r,c,o)=>{let l=n[o];if(l&&l.call){let u=l(s),i=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=i?"."+i:u&&typeof u=="object"?u.props?"":Ee(u,""):u===!1?"":u}return r+c+(l??"")},"");function aa(e){let n=this||{},s=e.call?e(n.p):e;return Un(s.unshift?s.raw?Sn(s,[].slice.call(arguments,1),n.p):s.reduce((r,c)=>Object.assign(r,c&&c.call?c(n.p):c),{}):s,En(n.target),n.g,n.o,n.k)}let Ja,ja,va;aa.bind({g:1});let ve=aa.bind({k:1});function An(e,n,s,r){Ee.p=n,Ja=e,ja=s,va=r}function Ce(e,n){let s=this||{};return function(){let r=arguments;function c(o,l){let u=Object.assign({},o),i=u.className||c.className;s.p=Object.assign({theme:ja&&ja()},u),s.o=/ *go\d+/.test(i),u.className=aa.apply(s,r)+(i?" "+i:"");let d=e;return e[0]&&(d=u.as||e,delete u.as),va&&d[0]&&va(u),Ja(d,u)}return c}}var Pn=e=>typeof e=="function",Qe=(e,n)=>Pn(e)?e(n):e,kn=(()=>{let e=0;return()=>(++e).toString()})(),Za=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");e=!n||n.matches}return e}})(),Tn=20,Da="default",qa=(e,n)=>{let{toastLimit:s}=e.settings;switch(n.type){case 0:return{...e,toasts:[n.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===n.toast.id?{...l,...n.toast}:l)};case 2:let{toast:r}=n;return qa(e,{type:e.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:c}=n;return{...e,toasts:e.toasts.map(l=>l.id===c||c===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==n.toastId)};case 5:return{...e,pausedAt:n.time};case 6:let o=n.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},Xe=[],Xa={toasts:[],pausedAt:void 0,settings:{toastLimit:Tn}},xe={},Qa=(e,n=Da)=>{xe[n]=qa(xe[n]||Xa,e),Xe.forEach(([s,r])=>{s===n&&r(xe[n])})},en=e=>Object.keys(xe).forEach(n=>Qa(e,n)),_n=e=>Object.keys(xe).find(n=>xe[n].toasts.some(s=>s.id===e)),na=(e=Da)=>n=>{Qa(n,e)},Mn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Fn=(e={},n=Da)=>{let[s,r]=m.useState(xe[n]||Xa),c=m.useRef(xe[n]);m.useEffect(()=>(c.current!==xe[n]&&r(xe[n]),Xe.push([n,r]),()=>{let l=Xe.findIndex(([u])=>u===n);l>-1&&Xe.splice(l,1)}),[n]);let o=s.toasts.map(l=>{var u,i,d;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((u=e[l.type])==null?void 0:u.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((i=e[l.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||Mn[l.type],style:{...e.style,...(d=e[l.type])==null?void 0:d.style,...l.style}}});return{...s,toasts:o}},Rn=(e,n="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||kn()}),We=e=>(n,s)=>{let r=Rn(n,e,s);return na(r.toasterId||_n(r.id))({type:2,toast:r}),r.id},X=(e,n)=>We("blank")(e,n);X.error=We("error");X.success=We("success");X.loading=We("loading");X.custom=We("custom");X.dismiss=(e,n)=>{let s={type:3,toastId:e};n?na(n)(s):en(s)};X.dismissAll=e=>X.dismiss(void 0,e);X.remove=(e,n)=>{let s={type:4,toastId:e};n?na(n)(s):en(s)};X.removeAll=e=>X.remove(void 0,e);X.promise=(e,n,s)=>{let r=X.loading(n.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(c=>{let o=n.success?Qe(n.success,c):void 0;return o?X.success(o,{id:r,...s,...s==null?void 0:s.success}):X.dismiss(r),c}).catch(c=>{let o=n.error?Qe(n.error,c):void 0;o?X.error(o,{id:r,...s,...s==null?void 0:s.error}):X.dismiss(r)}),e};var In=1e3,On=(e,n="default")=>{let{toasts:s,pausedAt:r}=Fn(e,n),c=m.useRef(new Map).current,o=m.useCallback((b,x=In)=>{if(c.has(b))return;let D=setTimeout(()=>{c.delete(b),l({type:4,toastId:b})},x);c.set(b,D)},[]);m.useEffect(()=>{if(r)return;let b=Date.now(),x=s.map(D=>{if(D.duration===1/0)return;let C=(D.duration||0)+D.pauseDuration-(b-D.createdAt);if(C<0){D.visible&&X.dismiss(D.id);return}return setTimeout(()=>X.dismiss(D.id,n),C)});return()=>{x.forEach(D=>D&&clearTimeout(D))}},[s,r,n]);let l=m.useCallback(na(n),[n]),u=m.useCallback(()=>{l({type:5,time:Date.now()})},[l]),i=m.useCallback((b,x)=>{l({type:1,toast:{id:b,height:x}})},[l]),d=m.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),f=m.useCallback((b,x)=>{let{reverseOrder:D=!1,gutter:C=8,defaultPosition:R}=x||{},B=s.filter(h=>(h.position||R)===(b.position||R)&&h.height),j=B.findIndex(h=>h.id===b.id),v=B.filter((h,O)=>O<j&&h.visible).length;return B.filter(h=>h.visible).slice(...D?[v+1]:[0,v]).reduce((h,O)=>h+(O.height||0)+C,0)},[s]);return m.useEffect(()=>{s.forEach(b=>{if(b.dismissed)o(b.id,b.removeDelay);else{let x=c.get(b.id);x&&(clearTimeout(x),c.delete(b.id))}})},[s,o]),{toasts:s,handlers:{updateHeight:i,startPause:u,endPause:d,calculateOffset:f}}},$n=ve`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ln=ve`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bn=ve`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zn=Ce("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$n} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ln} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Bn} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Hn=ve`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Yn=Ce("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Hn} 1s linear infinite;
`,Wn=ve`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Gn=ve`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Kn=Ce("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Gn} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Jn=Ce("div")`
  position: absolute;
`,Zn=Ce("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qn=ve`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xn=Ce("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Qn=({toast:e})=>{let{icon:n,type:s,iconTheme:r}=e;return n!==void 0?typeof n=="string"?m.createElement(Xn,null,n):n:s==="blank"?null:m.createElement(Zn,null,m.createElement(Yn,{...r}),s!=="loading"&&m.createElement(Jn,null,s==="error"?m.createElement(zn,{...r}):m.createElement(Kn,{...r})))},es=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,as=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,ns="0%{opacity:0;} 100%{opacity:1;}",ss="0%{opacity:1;} 100%{opacity:0;}",ts=Ce("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,rs=Ce("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,os=(e,n)=>{let s=e.includes("top")?1:-1,[r,c]=Za()?[ns,ss]:[es(s),as(s)];return{animation:n?`${ve(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ve(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},is=m.memo(({toast:e,position:n,style:s,children:r})=>{let c=e.height?os(e.position||n||"top-center",e.visible):{opacity:0},o=m.createElement(Qn,{toast:e}),l=m.createElement(rs,{...e.ariaProps},Qe(e.message,e));return m.createElement(ts,{className:e.className,style:{...c,...s,...e.style}},typeof r=="function"?r({icon:o,message:l}):m.createElement(m.Fragment,null,o,l))});An(m.createElement);var cs=({id:e,className:n,style:s,onHeightUpdate:r,children:c})=>{let o=m.useCallback(l=>{if(l){let u=()=>{let i=l.getBoundingClientRect().height;r(e,i)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return m.createElement("div",{ref:o,className:n,style:s},c)},ls=(e,n)=>{let s=e.includes("top"),r=s?{top:0}:{bottom:0},c=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Za()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${n*(s?1:-1)}px)`,...r,...c}},us=aa`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ze=16,ds=({reverseOrder:e,position:n="top-center",toastOptions:s,gutter:r,children:c,toasterId:o,containerStyle:l,containerClassName:u})=>{let{toasts:i,handlers:d}=On(s,o);return m.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Ze,left:Ze,right:Ze,bottom:Ze,pointerEvents:"none",...l},className:u,onMouseEnter:d.startPause,onMouseLeave:d.endPause},i.map(f=>{let b=f.position||n,x=d.calculateOffset(f,{reverseOrder:e,gutter:r,defaultPosition:n}),D=ls(b,x);return m.createElement(cs,{id:f.id,key:f.id,onHeightUpdate:d.updateHeight,className:f.visible?us:"",style:D},f.type==="custom"?Qe(f.message,f):c?c(f):m.createElement(is,{toast:f,position:b}))}))},U=X;const ms={apiBaseUrl:"https://api.exora.app/api"},an=ms.apiBaseUrl,se={AUTH_TOKEN:"exora_auth_token",USER_DATA:"exora_user_data"},pa={},Ra=(pa==null?void 0:pa.VITE_ENCRYPTION_KEY)||"default-key-should-be-changed";class je{static encrypt(n){try{return fa.AES.encrypt(n,Ra).toString()}catch{throw console.error("Error al cifrar datos"),new Error("Encryption failed")}}static decrypt(n){try{return fa.AES.decrypt(n,Ra).toString(fa.enc.Utf8)}catch{throw console.error("Error al descifrar datos"),new Error("Decryption failed")}}static sanitizeInput(n){return!n||typeof n!="string"?"":n.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}static isValidEmail(n){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)}static isValidAmount(n){return typeof n=="number"&&!isNaN(n)&&n>=0&&n<=999999}static isValidObjectId(n){return/^[0-9a-fA-F]{24}$/.test(n)}static isValidDate(n){const s=new Date(n);return s instanceof Date&&!isNaN(s.getTime())}static generateNonce(){const n=new Uint8Array(16);return crypto.getRandomValues(n),Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}static isValidJWTStructure(n){return n.split(".").length===3}static isTokenExpired(n){try{if(!this.isValidJWTStructure(n))return!0;const s=JSON.parse(atob(n.split(".")[1])),r=Math.floor(Date.now()/1e3);return s.exp&&s.exp<r}catch{return!0}}static sanitizeForLogging(n){const s=["password","token","authorization","x-token","email","telefono"],r={...n},c=(o,l="")=>{if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return o.map((i,d)=>c(i,`${l}[${d}]`));const u={};return Object.keys(o).forEach(i=>{const d=l?`${l}.${i}`:i;s.some(f=>i.toLowerCase().includes(f.toLowerCase()))?u[i]="[REDACTED]":typeof o[i]=="object"?u[i]=c(o[i],d):u[i]=o[i]}),u};return c(r)}static getSecurityHeaders(){return{"X-Content-Type-Options":"nosniff","X-Frame-Options":"DENY","X-XSS-Protection":"1; mode=block","Referrer-Policy":"strict-origin-when-cross-origin"}}}class $e{static setItem(n,s){try{const r=je.encrypt(s);localStorage.setItem(n,r)}catch(r){throw console.error("Error storing secure data"),r}}static getItem(n){try{const s=localStorage.getItem(n);return s?je.decrypt(s):null}catch{return console.error("Error retrieving secure data"),localStorage.removeItem(n),null}}static removeItem(n){localStorage.removeItem(n)}static clear(){localStorage.clear()}}const fs=e=>e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),Ye=e=>{const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${r}`},ps=e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e),bs=e=>{if(!e.pagada)return!1;const n=new Date,s=new Date(e.fecha);return s.setMinutes(s.getMinutes()+15),n>s},Ns=(e,n)=>{if(!e.ok)return;const s=e.uid||e.id,r=e.nombre||e.name||n.email.split("@")[0],c=e.email||n.email;if(!(!s||!r))return{_id:s,nombre:r,email:c}};class Ia{static async login(n){try{if(!ps(n.email))return{ok:!1,msg:"Email inválido"};if(!n.password||n.password.length<1)return{ok:!1,msg:"Password requerido"};const s=await fetch(`${an}/auth/ext-login`,{method:"POST",headers:{"Content-Type":"application/json",...je.getSecurityHeaders()},body:JSON.stringify({email:je.sanitizeInput(n.email),password:n.password})});if(!s.ok){let o=`Error HTTP ${s.status}`;try{const l=await s.json();o=l.msg||l.message||o}catch{}return{ok:!1,msg:o}}const r=await s.json(),c=Ns(r,n);if(r.ok&&r.token)if(je.isValidJWTStructure(r.token))this.setToken(r.token),c&&$e.setItem(se.USER_DATA,JSON.stringify(c));else return{ok:!1,msg:"Token inválido recibido del servidor"};return{ok:r.ok,token:r.token,user:c,msg:r.msg||r.message}}catch{return console.error("Login error"),{ok:!1,msg:"Error de conexión. Verifica tu internet."}}}static setToken(n){if(!(typeof window>"u")){if(!je.isValidJWTStructure(n))throw new Error("Token inválido");$e.setItem(se.AUTH_TOKEN,n)}}static getToken(){if(typeof window>"u")return null;const n=$e.getItem(se.AUTH_TOKEN);return n&&je.isTokenExpired(n)?(this.removeToken(),null):n}static removeToken(){typeof window>"u"||($e.removeItem(se.AUTH_TOKEN),$e.removeItem(se.USER_DATA))}static isAuthenticated(){const n=this.getToken();return n!==null&&!je.isTokenExpired(n)}static getUserData(){if(typeof window>"u")return null;try{const n=$e.getItem(se.USER_DATA);return n?JSON.parse(n):null}catch{return console.error("Error reading user data"),null}}static logout(){this.removeToken()}}const Ea=Ha(e=>({user:null,token:null,isAuthenticated:!1,login:async(n,s)=>{try{const r=await Ia.login({email:n,password:s});if(r.ok&&r.token&&r.user){const c={id:r.user._id,name:r.user.nombre,email:r.user.email,role:"profesional"};localStorage.setItem(se.AUTH_TOKEN,r.token),localStorage.setItem(se.USER_DATA,JSON.stringify(c)),e({user:c,token:r.token,isAuthenticated:!0}),U.success(`Bienvenido, ${r.user.nombre}`)}else throw new Error(r.msg||"Error de autenticación")}catch(r){throw console.error("Login error:",r),U.error(r.message||"Error de autenticación"),r}},logout:()=>{Ia.logout(),localStorage.removeItem(se.AUTH_TOKEN),localStorage.removeItem(se.USER_DATA),e({user:null,token:null,isAuthenticated:!1}),U.success("Sesión cerrada correctamente")},checkAuth:()=>{const n=localStorage.getItem(se.AUTH_TOKEN),s=localStorage.getItem(se.USER_DATA);if(n&&s)try{const r=JSON.parse(s);if(r!=null&&r.id&&(r!=null&&r.email)){e({user:r,token:n,isAuthenticated:!0});return}}catch{}localStorage.removeItem(se.AUTH_TOKEN),localStorage.removeItem(se.USER_DATA)}})),ha=({size:e="md",color:n="var(--exora-primary)"})=>{const s={sm:"w-5 h-5",md:"w-8 h-8",lg:"w-12 h-12"};return a.jsxDEV("div",{className:`inline-block ${s[e]} animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]`,style:{color:n},role:"status",children:a.jsxDEV("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Cargando..."},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/LoadingSpinner.tsx",lineNumber:24,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/LoadingSpinner.tsx",lineNumber:19,columnNumber:5},void 0)},xs=hn({email:Ta().email("Email inválido"),password:Ta().min(6,"La contraseña debe tener al menos 6 caracteres")}),gs=()=>{const[e,n]=m.useState(""),[s,r]=m.useState(""),[c,o]=m.useState(!1),[l,u]=m.useState({}),i=za(),{login:d,isAuthenticated:f,checkAuth:b}=Ea();m.useEffect(()=>{b()},[b]),m.useEffect(()=>{f&&i("/dashboard")},[f,i]);const x=m.useCallback(j=>{n(j.target.value)},[]),D=m.useCallback(j=>{r(j.target.value)},[]),C=m.useCallback(()=>{const j=xs.safeParse({email:e,password:s});if(j.success)return u({}),!0;const v={};return j.error.errors.forEach(h=>{h.path[0]==="email"&&(v.email=h.message),h.path[0]==="password"&&(v.password=h.message)}),u(v),!1},[e,s]),R=m.useCallback(async j=>{if(j.preventDefault(),!!C()){o(!0);try{await d(e,s),i("/dashboard")}catch{}finally{o(!1)}}},[e,s,d,i,C]),B=m.useMemo(()=>c,[c]);return a.jsxDEV("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",style:{backgroundColor:"var(--exora-background)"},children:a.jsxDEV("div",{className:"w-full max-w-sm",children:[a.jsxDEV("div",{className:"text-center mb-8",children:[a.jsxDEV("h1",{className:"text-4xl font-bold mb-2",style:{color:"var(--exora-primary)"},children:"Exora"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:87,columnNumber:11},void 0),a.jsxDEV("p",{className:"text-gray-600 text-lg",children:"Gestión de Citas"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:90,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:86,columnNumber:9},void 0),a.jsxDEV("form",{onSubmit:R,className:"space-y-6",children:[a.jsxDEV("div",{children:[a.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:96,columnNumber:13},void 0),a.jsxDEV("input",{id:"email",type:"email",value:e,onChange:x,className:`w-full px-4 py-3 border rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 transition-colors ${l.email?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-exora-primary focus:border-transparent"}`,placeholder:"tu@email.com",disabled:c},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:99,columnNumber:13},void 0),l.email&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:l.email},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:113,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:95,columnNumber:11},void 0),a.jsxDEV("div",{children:[a.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:118,columnNumber:13},void 0),a.jsxDEV("input",{id:"password",type:"password",value:s,onChange:D,className:`w-full px-4 py-3 border rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 transition-colors ${l.password?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-exora-primary focus:border-transparent"}`,placeholder:"••••••••",disabled:B},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:121,columnNumber:13},void 0),l.password&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:l.password},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:135,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:117,columnNumber:11},void 0),a.jsxDEV("button",{type:"submit",disabled:B,className:"w-full py-3 px-4 rounded-lg text-white font-semibold text-lg transition-colors hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",style:{backgroundColor:"var(--exora-primary)"},children:c?a.jsxDEV(ha,{size:"sm",color:"white"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:145,columnNumber:26},void 0):"Iniciar Sesión"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:139,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:94,columnNumber:9},void 0),a.jsxDEV("div",{className:"text-center mt-6",children:a.jsxDEV("button",{type:"button",className:"text-sm hover:underline transition-colors",style:{color:"var(--exora-primary)"},onClick:()=>{alert("Funcionalidad de recuperación de contraseña no implementada")},children:"¿Has olvidado tu contraseña?"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:151,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:84,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:83,columnNumber:5},void 0)},pe=yn.create({baseURL:an,timeout:1e4,headers:{"Content-Type":"application/json",...je.getSecurityHeaders()}});pe.interceptors.request.use(e=>{var s;const n=localStorage.getItem(se.AUTH_TOKEN);return n&&(e.headers["x-token"]=n),(s=e.url)!=null&&s.includes("ventas"),e},e=>Promise.reject(e));pe.interceptors.response.use(e=>e,e=>{var s,r,c,o,l,u,i;const n=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||((o=(c=e.response)==null?void 0:c.data)==null?void 0:o.msg)||e.message||"Error de conexión";return((l=e.response)==null?void 0:l.status)===401&&(n.includes("token")&&(n.includes("expirado")||n.includes("inválido")||n.includes("válido"))?(console.warn("Token expirado/inválido - eliminando del localStorage"),localStorage.removeItem(se.AUTH_TOKEN),localStorage.removeItem(se.USER_DATA)):console.warn("Error 401 - problema de permisos")),Promise.reject({message:n,status:(u=e.response)==null?void 0:u.status,authError:((i=e.response)==null?void 0:i.status)===401})});class ea{static async getPromocionesEmpresa(n){try{const s=await pe.post("/promociones/empresa",{empresa:n}),r=s.data.promociones||s.data;return Array.isArray(r)?r:[]}catch(s){return console.error("Error obteniendo promociones por empresa:",s),[]}}static async getPromocionById(n,s){try{return(await this.getPromocionesEmpresa(s)).find(c=>c._id===n)||null}catch(r){return console.error("Error buscando promoción por ID:",r),null}}}const js=({isOpen:e,title:n,message:s,confirmText:r="Confirmar",cancelText:c="Cancelar",onConfirm:o,onCancel:l,type:u="warning"})=>{if(!e)return null;const d=(()=>{switch(u){case"danger":return{icon:"⚠️",confirmButton:"#DC2626",confirmButtonHover:"#B91C1C"};case"warning":return{icon:"⚠️",confirmButton:"#D97706",confirmButtonHover:"#B45309"};case"info":return{icon:"ℹ️",confirmButton:"#2563EB",confirmButtonHover:"#1D4ED8"};default:return{icon:"⚠️",confirmButton:"#D97706",confirmButtonHover:"#B45309"}}})();return a.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[a.jsxDEV("div",{className:"text-center mb-6",children:[a.jsxDEV("div",{className:"text-4xl mb-3",children:d.icon},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:61,columnNumber:11},void 0),a.jsxDEV("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:n},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:62,columnNumber:11},void 0),a.jsxDEV("p",{className:"text-gray-600 leading-relaxed",children:s},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:60,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex gap-3",children:[a.jsxDEV("button",{onClick:l,className:"flex-1 py-3 px-4 rounded-xl font-medium transition-all border-2 border-gray-300 text-gray-700 hover:bg-gray-50",children:c},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:71,columnNumber:11},void 0),a.jsxDEV("button",{onClick:o,className:"flex-1 py-3 px-4 rounded-xl font-bold text-white transition-all hover:opacity-90 shadow-md",style:{backgroundColor:d.confirmButton},onMouseEnter:f=>{f.currentTarget.style.backgroundColor=d.confirmButtonHover},onMouseLeave:f=>{f.currentTarget.style.backgroundColor=d.confirmButton},children:r},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:77,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:70,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:59,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ConfirmationModal.tsx",lineNumber:58,columnNumber:5},void 0)},ee=(e,n="0 0 24 24")=>({size:s=20,...r})=>a.jsxDEV("svg",{width:s,height:s,viewBox:n,fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...r,children:e},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:11,columnNumber:3},void 0),vs=ee(a.jsxDEV("path",{d:"M22 16.92V19a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h2.09a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9a16 16 0 006.92 6.92l1.27-.36a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:27,columnNumber:3},void 0)),Ca=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:32,columnNumber:5},void 0),a.jsxDEV("line",{x1:"3",y1:"6",x2:"21",y2:"6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:33,columnNumber:5},void 0),a.jsxDEV("path",{d:"M16 10a4 4 0 01-8 0"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:34,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:31,columnNumber:3},void 0)),nn=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M3 7h13l-4-4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:40,columnNumber:5},void 0),a.jsxDEV("path",{d:"M21 7l-4 4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:41,columnNumber:5},void 0),a.jsxDEV("path",{d:"M21 17H8l4 4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:42,columnNumber:5},void 0),a.jsxDEV("path",{d:"M3 17l4-4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:43,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:39,columnNumber:3},void 0)),sn=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:49,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"12",cy:"10",r:"3"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:50,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:48,columnNumber:3},void 0)),hs=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("line",{x1:"19",y1:"5",x2:"5",y2:"19"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:56,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"6.5",cy:"6.5",r:"2.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:57,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"17.5",cy:"17.5",r:"2.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:58,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:55,columnNumber:3},void 0)),ys=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:77,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"12",cy:"7",r:"4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:78,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:76,columnNumber:3},void 0)),ws=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:84,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:85,columnNumber:5},void 0),a.jsxDEV("path",{d:"M6 12h.01M18 12h.01"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:86,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:83,columnNumber:3},void 0)),Ds=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:92,columnNumber:5},void 0),a.jsxDEV("line",{x1:"1",y1:"10",x2:"23",y2:"10"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:93,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:91,columnNumber:3},void 0)),Es=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:99,columnNumber:5},void 0),a.jsxDEV("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:100,columnNumber:5},void 0),a.jsxDEV("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:101,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:98,columnNumber:3},void 0)),Cs=ee(a.jsxDEV("polyline",{points:"6,9 12,15 18,9"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:113,columnNumber:3},void 0)),Vs=ee(a.jsxDEV("polyline",{points:"15,18 9,12 15,6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:117,columnNumber:3},void 0)),Us=ee(a.jsxDEV("polyline",{points:"9,18 15,12 9,6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:121,columnNumber:3},void 0)),Ss=ee(a.jsxDEV("polyline",{points:"20,6 9,17 4,12"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:140,columnNumber:3},void 0)),As=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:145,columnNumber:5},void 0),a.jsxDEV("polyline",{points:"16,17 21,12 16,7"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:146,columnNumber:5},void 0),a.jsxDEV("line",{x1:"21",y1:"12",x2:"9",y2:"12"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:147,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:144,columnNumber:3},void 0)),Ps=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:153,columnNumber:5},void 0),a.jsxDEV("path",{d:"M8 16h8"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:154,columnNumber:5},void 0),a.jsxDEV("path",{d:"M10 20h4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:155,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:152,columnNumber:3},void 0)),ks=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:161,columnNumber:5},void 0),a.jsxDEV("line",{x1:"16",y1:"2",x2:"16",y2:"6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:162,columnNumber:5},void 0),a.jsxDEV("line",{x1:"8",y1:"2",x2:"8",y2:"6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:163,columnNumber:5},void 0),a.jsxDEV("line",{x1:"3",y1:"10",x2:"21",y2:"10"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:164,columnNumber:5},void 0),a.jsxDEV("line",{x1:"8",y1:"14",x2:"16",y2:"14"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:165,columnNumber:5},void 0),a.jsxDEV("line",{x1:"8",y1:"18",x2:"12",y2:"18"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:166,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:160,columnNumber:3},void 0)),Ts=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:182,columnNumber:5},void 0),a.jsxDEV("polyline",{points:"12,6 12,12 16,14"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:183,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:181,columnNumber:3},void 0)),Oa=ee(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:189,columnNumber:5},void 0),a.jsxDEV("polyline",{points:"22,6 12,13 2,6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:190,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:188,columnNumber:3},void 0)),$a=e=>e?(Array.isArray(e)?e:[e]).map(s=>{if(!s)return"";if(typeof s=="string")return s.trim();if(typeof s=="object"){const r=s.texto??s.comentario??s.mensaje??"";if(typeof r=="string")return r.trim();if(r!=null)return String(r).trim()}return""}).filter(s=>s.length>0):[],ba=({appointment:e,style:n,isActive:s=!1,onClick:r,onMarkNoShow:c})=>{var J,he;const o=bs(e),l=e.servicios[0],[u,i]=m.useState([]),[d,f]=m.useState(!1);m.useEffect(()=>{(async()=>{if(e.empresa)try{const te=await ea.getPromocionesEmpresa(e.empresa);i(te)}catch(te){console.error("Error cargando promociones:",te),i([])}})()},[e.empresa]);const b=m.useMemo(()=>new Date(e.fecha),[e.fecha]),x=m.useMemo(()=>b.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),[b]),D=m.useMemo(()=>!e.promocion||e.promocion.length===0?[]:e.promocion.map((w,te)=>{const I=`promo-${te}`;if(typeof w=="string"){const Y=u.find(W=>W._id===w);if(Y){const W=Y.titulo||Y.descripcion||"Promoción";return{key:I,label:W}}return{key:I,label:w}}if(typeof w=="object"&&w!==null){const Y=w.nombre||w.descripcion||w.titulo||"Promoción";return{key:I,label:Y}}return{key:I,label:"Promoción"}}),[e.promocion,u]),C=m.useMemo(()=>$a(e.comentarios),[e.comentarios]),R=m.useMemo(()=>{var w;return $a((w=e.usuario)==null?void 0:w.comentarios)},[(J=e.usuario)==null?void 0:J.comentarios]),B=()=>{f(!0)},j=()=>{f(!1),c&&c(e._id)},v=()=>{f(!1)},h={width:"min(100%, 560px)",maxWidth:"560px",height:"100%",maxHeight:"min(680px, calc(100vh - 160px))",minHeight:"min(420px, calc(100vh - 160px))"},O=`${o?"bg-gray-100 text-gray-400":"bg-gray-50 text-gray-700"} rounded-2xl px-3 py-2`,ae="flex flex-wrap items-center gap-x-2 gap-y-1",fe=o?"text-gray-400":"text-gray-600",de=`text-[13px] font-semibold leading-snug tracking-tight ${o?"text-gray-400":"text-gray-800"}`,Ve=o?"bg-gray-200 text-gray-500":"bg-green-50 text-green-700";return a.jsxDEV(wa.div,{style:{...n,backgroundColor:o?"#f8f9fa":"white",borderRadius:"24px",boxShadow:o?"0 10px 30px rgba(15, 23, 42, 0.05)":"0 22px 45px rgba(85, 91, 246, 0.15)",cursor:o?"default":"pointer",zIndex:s?20:10,...h,margin:"0 auto",position:"relative",opacity:o?.6:1,transition:"all 0.3s ease"},onClick:o?void 0:r,children:a.jsxDEV("div",{className:"p-4 h-full flex flex-col gap-3 overflow-hidden",children:[a.jsxDEV("div",{className:"flex-shrink-0 space-y-2",children:[e.pagada?a.jsxDEV("div",{className:"flex justify-center",children:a.jsxDEV("span",{className:"text-xs bg-green-100 text-green-800 px-4 py-1.5 rounded-full font-semibold tracking-wide",children:"PAGADA"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:203,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:202,columnNumber:13},void 0):a.jsxDEV("div",{className:"flex justify-center",children:a.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-800 px-4 py-1.5 rounded-full font-semibold tracking-wide",children:["Saldo: €",(e.usuario.saldoMonedero||0).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:209,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:208,columnNumber:13},void 0),a.jsxDEV("div",{className:"text-center space-y-0.5",children:a.jsxDEV("h2",{className:`text-2xl font-bold leading-tight ${o?"text-gray-500":"text-gray-900"}`,children:[e.usuario.nombre," ",e.usuario.apellidos]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:216,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:215,columnNumber:11},void 0),a.jsxDEV("div",{className:"text-center",children:a.jsxDEV("div",{className:"text-4xl font-bold leading-none",style:{color:o?"#9ca3af":"var(--exora-primary)"},children:x},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:226,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:225,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:200,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:[a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(vs,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:238,columnNumber:13},void 0),a.jsxDEV("div",{className:`${ae} flex-1`,children:a.jsxDEV("a",{href:`tel:${e.usuario.telefono}`,className:`${de} ${o?"pointer-events-none":"hover:underline"}`,style:{color:o?void 0:"var(--exora-primary)"},onClick:w=>w.stopPropagation(),children:e.usuario.telefono},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:240,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:239,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:237,columnNumber:11},void 0),a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(Ca,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:254,columnNumber:13},void 0),a.jsxDEV("div",{className:`${ae} flex-1`,children:a.jsxDEV("span",{className:`${de} break-words`,children:(l==null?void 0:l.nombre)||"Servicio no especificado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:256,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:255,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:253,columnNumber:11},void 0),e.variantes&&e.variantes.length>0&&a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(nn,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:264,columnNumber:15},void 0),a.jsxDEV("div",{className:`${ae} flex-1`,children:a.jsxDEV("span",{className:`text-[13px] font-medium leading-snug tracking-tight ${fe}`,children:e.variantes.map(w=>w.nombre).join(", ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:266,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:265,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:263,columnNumber:13},void 0),e.sucursal&&a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(sn,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:275,columnNumber:15},void 0),a.jsxDEV("div",{className:`${ae} flex-1`,children:a.jsxDEV("span",{className:de,children:e.sucursal.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:277,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:276,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:274,columnNumber:13},void 0),((he=e.profesional)==null?void 0:he.nombre)&&a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(ys,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:284,columnNumber:15},void 0),a.jsxDEV("div",{className:`${ae} flex-1`,children:a.jsxDEV("span",{className:de,children:e.profesional.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:286,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:285,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:283,columnNumber:13},void 0),a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(hs,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:292,columnNumber:13},void 0),a.jsxDEV("div",{className:`${ae} flex-1`,children:e.promocion.length>0?a.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:D.map(({key:w,label:te})=>a.jsxDEV("span",{className:`px-2.5 py-1 rounded-full text-[11px] font-semibold ${Ve}`,children:te},w,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:297,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:295,columnNumber:17},void 0):a.jsxDEV("span",{className:`text-[13px] font-medium ${fe}`,children:"No"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:306,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:293,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:291,columnNumber:11},void 0),C.length>0&&a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(Oa,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:313,columnNumber:15},void 0),a.jsxDEV("div",{className:"space-y-1 flex-1",children:a.jsxDEV("p",{className:`text-[13px] leading-relaxed font-medium ${de}`,children:C.join(" | ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:315,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:314,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:312,columnNumber:13},void 0),R.length>0&&a.jsxDEV("div",{className:`${O} flex items-start gap-2.5`,children:[a.jsxDEV(Oa,{size:16,className:"mt-0.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:324,columnNumber:15},void 0),a.jsxDEV("div",{className:"space-y-1 flex-1",children:a.jsxDEV("p",{className:`text-[13px] leading-relaxed font-medium ${de}`,children:R.join(" | ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:326,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:325,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:323,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:236,columnNumber:9},void 0),!o&&!e.pagada&&c&&a.jsxDEV("div",{className:"flex-shrink-0 pt-3 px-4 pb-4",children:a.jsxDEV("button",{onClick:w=>{w.stopPropagation(),B()},className:"w-full py-2.5 rounded-xl font-medium text-sm transition-all hover:opacity-80 border-2",style:{borderColor:"#DC2626",backgroundColor:"#FEF2F2",color:"#DC2626"},children:"No presentado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:337,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:336,columnNumber:11},void 0),a.jsxDEV(js,{isOpen:d,title:"Marcar como No Presentado",message:`¿Estás seguro de que deseas marcar la cita de ${e.usuario.nombre} como "No presentado"? Esta acción no se puede deshacer.`,confirmText:"Sí, marcar como No Presentado",cancelText:"Cancelar",type:"danger",onConfirm:j,onCancel:v},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:355,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:198,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:180,columnNumber:5},void 0)};class La{static async getServicios(n){try{return(await pe.post("/servicios/empresa",{empresa:n})).data.servicios||[]}catch(s){throw console.error("Error fetching servicios:",s),s}}static async getVariantes(n){try{return((await pe.post("/variantes/empresa",{empresa:n})).data.variantes||[]).map(c=>({_id:c._id,nombre:c.nombre,precio:c.valor||0}))}catch(s){throw console.error("Error fetching variantes:",s),s}}static calcularPrecioTotal(n,s){let r=n.precio;return s.forEach(c=>{r+=c.precio||0}),r}}class ya{static tieneSaldoSuficiente(n,s){return n>=s}static async procesarPagoMonedero(n,s,r,c){try{const o=await this.crearMovimientoSaldo(n,s,r,c);if(!o.ok)throw new Error("Error al crear movimiento de saldo");const l=o.ventaGuardada._id;return await this.obtenerUsuarioActualizado(n,s),await this.obtenerVenta(l),await this.obtenerVenta(l)}catch(o){throw console.error("Error en procesarPagoMonedero:",o),o}}static async crearMovimientoSaldo(n,s,r,c){const o={empresa:s,monto:-c,citaId:r,metodoPago:"Monedero"};return(await pe.post(`/clientesaldo/nuevoclientesaldo/${n}`,o)).data}static async obtenerUsuarioActualizado(n,s){const r={usuario:n,empresa:s};return(await pe.post("/usuarios/usuario",r)).data}static async obtenerVenta(n){return(await pe.get(`/ventas/${n}`)).data}}const _s=({appointment:e,onCompletePayment:n,onWalletPayment:s})=>{var Ke,Je;const[r,c]=m.useState(""),[o,l]=m.useState({}),[u,i]=m.useState(null),[d,f]=m.useState(!1),[b,x]=m.useState(""),[D,C]=m.useState(e.importe),[R,B]=m.useState(0),[j,v]=m.useState(!1),[h,O]=m.useState(!1),[ae,fe]=m.useState([]),[de,Ve]=m.useState([]),[J,he]=m.useState([]),[w,te]=m.useState(e.servicios[0]||null),[I,Y]=m.useState(e.variantes||[]),[W,ye]=m.useState(e.promocion||[]),[be,we]=m.useState(e.importe),[z,ie]=m.useState({servicioSeleccionado:e.servicios[0]||null,variantesSeleccionadas:e.variantes||[],promocionesSeleccionadas:e.promocion||[]}),Q={width:"min(100%, 560px)",maxWidth:"560px",height:"100%",maxHeight:"min(680px, calc(100vh - 160px))",minHeight:"min(420px, calc(100vh - 160px))"},G=m.useMemo(()=>new Date(e.fecha),[e.fecha]),Ne=m.useMemo(()=>G.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),[G]);m.useEffect(()=>{(async()=>{if(!e.promocion||e.promocion.length===0){C(e.importe),B(0);return}v(!0);try{const F=(await ea.getPromocionesEmpresa(e.empresa)).filter(_=>e.promocion.includes(_._id));let T=0;F.forEach(_=>{if(_.activo&&_.tipo==="descuento"&&_.destino==="servicio"){if(_.porcentaje!==null&&_.porcentaje!==void 0){const E=e.importe*(_.porcentaje/100);T+=E}else if(_.cifra!==void 0&&_.cifra>0){const E=_.cifra/100;T+=E}}});const Z=Math.max(0,e.importe-T);C(Z),B(T)}catch(S){console.error("Error calculando descuentos en payment:",S),C(e.importe),B(0)}finally{v(!1)}})()},[e.promocion,e.empresa,e.importe]),m.useEffect(()=>{(async()=>{if(h)try{const[S,F,T]=await Promise.all([La.getServicios(e.empresa),La.getVariantes(e.empresa),ea.getPromocionesEmpresa(e.empresa)]);if(fe(S),Ve(F),he(T),h){const Z=I.map(E=>{const ne=F.find(L=>L._id===E._id||L.nombre===E.nombre);return{...E,precio:(ne==null?void 0:ne.precio)||0}});Z.some((E,ne)=>{var L;return E.precio!==((L=I[ne])==null?void 0:L.precio)})&&(Y(Z),ie(E=>({...E,variantesSeleccionadas:Z})),setTimeout(()=>{let E=((w==null?void 0:w.precio)||0)/100;const ne=Z.reduce((ce,le)=>ce+(le.precio||0)/100,0);E+=ne;let L=0;for(const ce of W){const le=T.find(oa=>oa._id===ce);le&&le.activo&&le.tipo==="descuento"&&le.destino==="servicio"&&(le.porcentaje!==null&&le.porcentaje!==void 0?L+=E*(le.porcentaje/100):le.cifra!==void 0&&le.cifra>0&&(L+=le.cifra/100))}const q=Math.max(0,E-L);we(q),B(L)},50))}}catch(S){console.error("Error cargando datos para edición:",S)}})()},[h,e.empresa]),m.useEffect(()=>{if(!h)return;(()=>{let S=((w==null?void 0:w.precio)||0)/100;const F=I.reduce((_,E)=>_+(E.precio||0)/100,0);S+=F;let T=0;for(const _ of W){const E=J.find(ne=>ne._id===_);E&&E.activo&&E.tipo==="descuento"&&E.destino==="servicio"&&(E.porcentaje!==null&&E.porcentaje!==void 0?T+=S*(E.porcentaje/100):E.cifra!==void 0&&E.cifra>0&&(T+=E.cifra/100))}const Z=Math.max(0,S-T);we(Z),B(T)})()},[w,I,W,J,h]);const sa=m.useCallback(N=>{const S=ae.find(F=>F._id===N.target.value);te(S||null)},[ae]),ta=m.useCallback((N,S)=>{Y(S?F=>[...F,N]:F=>F.filter(T=>T._id!==N._id))},[]),Be=m.useCallback((N,S)=>{ye(S?F=>[...F,N]:F=>F.filter(T=>T!==N))},[]),ze=m.useCallback(()=>{te(z.servicioSeleccionado),Y(z.variantesSeleccionadas),ye(z.promocionesSeleccionadas),we(e.importe),C(D),O(!1)},[z,e.importe,D]),De=Object.values(o).reduce((N,S)=>N+S,0),ke=h?be:D,re=Math.max(0,ke-De),Te=Math.abs(re)<.01,_e=e.usuario.saldoMonedero||0,Me=ya.tieneSaldoSuficiente(_e,ke),ra=m.useCallback(N=>{d?(i(N),x((o[N]||0).toString())):(c(N),l({}))},[d,o]),Fe=m.useCallback(N=>{f(!0),c(""),i(N),x("")},[]),Ue=m.useCallback(()=>{if(!u)return;const N=Math.max(0,parseFloat(b)||0),S=re+(o[u]||0),F=Math.min(N,S);l(T=>({...T,[u]:F})),i(null),x("")},[u,b,re,o]),Ge=m.useCallback(()=>{if(!u)return;const N=re+(o[u]||0);x(N.toString())},[u,re,o]),He=m.useMemo(()=>[{id:"Pago en efectivo",name:"Efectivo",icon:ws},{id:"Pago Tarjeta",name:"Tarjeta",icon:Ds},{id:"Monedero",name:"Monedero",icon:Es}],[]),Re=async()=>{var Z,_,E,ne;if(d){if(!Te)return}else if(!r)return;const N=(w==null?void 0:w._id)!==((Z=e.servicios[0])==null?void 0:Z._id),S=I.length!==(((_=e.variantes)==null?void 0:_.length)||0)||I.some(L=>{var q;return!((q=e.variantes)!=null&&q.some(ce=>ce._id===L._id))}),F=W.length!==(((E=e.promocion)==null?void 0:E.length)||0)||W.some(L=>{var q;return!((q=e.promocion)!=null&&q.includes(L))})||((ne=e.promocion)==null?void 0:ne.some(L=>!W.includes(L)));let T;if((N||S||F)&&(T={...e,servicios:w?[w]:e.servicios,variantes:I,promocion:W,importe:D}),!d)r==="Monedero"&&s?s(e._id,T):n&&n(e._id,r,T);else{const L=Object.entries(o).filter(([q,ce])=>ce>0).map(([q,ce])=>({methodId:q,amount:ce}));for(const q of L){const ce=T?{...T,importe:q.amount}:{...e,importe:q.amount};q.methodId==="Monedero"&&s?s(e._id,ce):n&&n(e._id,q.methodId,ce)}}};return a.jsxDEV(wa.div,{style:{backgroundColor:"#FCFFA8",borderRadius:"24px",boxShadow:"0 22px 45px rgba(85, 91, 246, 0.18)",...Q,margin:"0 auto",position:"relative",overflow:"hidden"},children:a.jsxDEV("div",{className:"p-7 h-full flex flex-col relative gap-7 overflow-hidden",children:[a.jsxDEV("div",{className:"flex-shrink-0 text-center pt-2 space-y-1",children:[a.jsxDEV("h2",{className:"text-xl font-bold mb-1",style:{color:"#555BF6"},children:e.usuario.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:426,columnNumber:11},void 0),a.jsxDEV("div",{className:"text-base",style:{color:"#555BF6"},children:Ne},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:429,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:425,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-1 space-y-5 overflow-y-auto pr-1",children:[a.jsxDEV("div",{className:"flex justify-between items-center",children:[a.jsxDEV("div",{className:"text-base font-medium",style:{color:"#555BF6"},children:h?"Editando servicio":"Servicio reservado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:438,columnNumber:13},void 0),a.jsxDEV("button",{onClick:h?ze:()=>O(!0),className:"px-3 py-1 rounded-md text-xs font-medium transition-colors",style:{backgroundColor:h?"#E0E7FF":"#D2E9FF",color:"#555BF6"},children:h?"Cancelar":"Editar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:441,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:437,columnNumber:11},void 0),h?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("label",{className:"text-sm font-medium",style:{color:"#555BF6"},children:"Servicio:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:482,columnNumber:17},void 0),a.jsxDEV("select",{value:(w==null?void 0:w._id)||"",onChange:sa,className:"w-full p-2 border rounded-md text-sm",style:{borderColor:"#555BF6",color:"#555BF6"},children:[a.jsxDEV("option",{value:"",children:"Seleccionar servicio"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:491,columnNumber:19},void 0),ae.map(N=>a.jsxDEV("option",{value:N._id,children:[N.nombre," - €",(N.precio/100).toFixed(2)]},N._id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:493,columnNumber:21},void 0))]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:485,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:481,columnNumber:15},void 0),de.length>0&&a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("label",{className:"text-sm font-medium",style:{color:"#555BF6"},children:"Variantes:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:503,columnNumber:19},void 0),a.jsxDEV("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:de.map(N=>a.jsxDEV("label",{className:"flex items-center space-x-2",children:[a.jsxDEV("input",{type:"checkbox",checked:I.some(S=>S._id===N._id),onChange:S=>ta(N,S.target.checked),className:"text-sm"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:509,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-sm",style:{color:"#555BF6"},children:[N.nombre,N.precio!==void 0&&N.precio>0?a.jsxDEV("span",{className:"ml-1 text-xs opacity-75",children:["(+€",(N.precio/100).toFixed(2),")"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:518,columnNumber:29},void 0):a.jsxDEV("span",{className:"ml-1 text-xs opacity-50",children:"(gratis)"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:522,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:515,columnNumber:25},void 0)]},N._id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:508,columnNumber:23},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:506,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:502,columnNumber:17},void 0),J.length>0&&a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("label",{className:"text-sm font-medium",style:{color:"#555BF6"},children:"Promociones:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:536,columnNumber:19},void 0),a.jsxDEV("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:J.filter(N=>N.activo&&N.tipo==="descuento"&&N.destino==="servicio").map(N=>a.jsxDEV("label",{className:"flex items-center space-x-2",children:[a.jsxDEV("input",{type:"checkbox",checked:W.includes(N._id),onChange:S=>Be(N._id,S.target.checked),className:"text-sm"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:544,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-sm",style:{color:"#555BF6"},children:[N.titulo||"Promoción",N.porcentaje&&` (-${N.porcentaje}%)`,N.cifra&&` (-€${(N.cifra/100).toFixed(2)})`]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:550,columnNumber:25},void 0)]},N._id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:543,columnNumber:23},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:539,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:535,columnNumber:17},void 0),a.jsxDEV("button",{onClick:()=>{O(!1),C(be)},className:"w-full py-2 rounded-md text-sm font-medium transition-colors",style:{backgroundColor:"#555BF6",color:"white"},children:"Confirmar cambios"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:562,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:479,columnNumber:13},void 0):a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"flex items-start space-x-3",style:{color:"#555BF6"},children:[a.jsxDEV(Ca,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:457,columnNumber:17},void 0),a.jsxDEV("div",{className:"flex-1",children:a.jsxDEV("div",{className:"text-base font-medium",children:(w==null?void 0:w.nombre)||((Ke=e.servicios[0])==null?void 0:Ke.nombre)||"Servicio no especificado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:459,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:458,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:456,columnNumber:15},void 0),(I.length>0||e.variantes&&e.variantes.length>0)&&a.jsxDEV("div",{className:"flex items-start space-x-3",style:{color:"#555BF6"},children:[a.jsxDEV(nn,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:467,columnNumber:19},void 0),a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("div",{className:"text-base font-medium",children:"Variante:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:469,columnNumber:21},void 0),a.jsxDEV("div",{className:"text-sm mt-1",style:{color:"#555BF6"},children:(I.length>0?I:e.variantes).map(N=>N.nombre).join(", ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:470,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:468,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:466,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:455,columnNumber:13},void 0),e.promocion&&e.promocion.length>0&&a.jsxDEV("div",{className:"flex items-start space-x-3",style:{color:"#555BF6"},children:a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("div",{className:"text-base font-medium",children:"Promociones:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:584,columnNumber:17},void 0),a.jsxDEV("div",{className:"text-sm mt-1",children:e.promocion.map((N,S)=>{let F="Promoción especial";return N==="66945b4a5706bb70baa15bc0"?F="Aleatorio o barbero Junior":N==="66aff43347f5e3f837f20ad7"&&(F="Mañanas"),a.jsxDEV("span",{className:"inline-block px-2 py-1 rounded-md mr-1 mb-1 text-xs",style:{backgroundColor:"#E0E7FF",color:"#555BF6"},children:F},N||S,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:594,columnNumber:23},void 0)})},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:585,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:583,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:582,columnNumber:13},void 0),a.jsxDEV("div",{className:"rounded-lg p-3 text-center",style:{backgroundColor:"#FAFAB0"},children:[a.jsxDEV("div",{className:"text-base font-medium",style:{color:"#555BF6"},children:h?"Precio estimado":"Total a cobrar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:610,columnNumber:13},void 0),j?a.jsxDEV("div",{className:"text-lg",style:{color:"#555BF6"},children:"Calculando..."},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:614,columnNumber:15},void 0):a.jsxDEV(a.Fragment,{children:R>0||h&&Math.abs(be-e.importe)>.01?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"text-sm text-gray-600 line-through",children:["€",e.importe.toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:619,columnNumber:21},void 0),a.jsxDEV("div",{className:"text-2xl font-bold",style:{color:"#555BF6"},children:["€",(h?be:D).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:622,columnNumber:21},void 0),R>0&&a.jsxDEV("div",{className:"text-xs text-red-600",children:["Descuento: -€",R.toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:626,columnNumber:23},void 0),h&&a.jsxDEV("div",{className:"text-xs",style:{color:"#555BF6"},children:"Precio actualizado en tiempo real"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:631,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:618,columnNumber:19},void 0):a.jsxDEV("div",{className:"text-2xl font-bold",style:{color:"#555BF6"},children:["€",(h?be:D).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:637,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:616,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:609,columnNumber:11},void 0),a.jsxDEV("div",{className:"space-y-3",children:[a.jsxDEV("div",{className:"flex justify-between items-center",children:[a.jsxDEV("div",{className:"text-base font-medium",style:{color:"#555BF6"},children:"Método de pago:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:648,columnNumber:15},void 0),d&&a.jsxDEV("div",{className:"text-sm",style:{color:"#555BF6"},children:["Restante: €",re.toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:652,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:647,columnNumber:13},void 0),a.jsxDEV("div",{className:"flex gap-3 justify-between",children:He.map(N=>{const S=N.icon,F=r===N.id,T=o[N.id]>0,Z=N.id==="Monedero",_=Z&&!Me;return a.jsxDEV("button",{onClick:()=>ra(N.id),onTouchStart:E=>{if(_)return;const ne=setTimeout(()=>{Fe(N.id),navigator.vibrate&&navigator.vibrate(50)},500),L=()=>{clearTimeout(ne),E.currentTarget.removeEventListener("touchend",L),E.currentTarget.removeEventListener("touchcancel",L)};E.currentTarget.addEventListener("touchend",L),E.currentTarget.addEventListener("touchcancel",L)},disabled:_,className:`flex-1 p-4 rounded-lg border-2 flex items-center justify-center relative transition-all ${_?"border-gray-300 opacity-50 cursor-not-allowed":!d&&F||d&&T?"border-white shadow-md":"border-white/50 hover:opacity-80"}`,style:{backgroundColor:_?"rgba(200, 200, 200, 0.3)":!d&&F||d&&T?"#FAFAB0":"rgba(250, 250, 176, 0.5)"},title:Z?`${N.name} - Saldo: €${_e.toFixed(2)}${Me?"":" (Insuficiente)"}`:`${N.name} - Mantén presionado para dividir pago`,children:[a.jsxDEV(S,{size:24,style:{color:_?"#999":"#555BF6"}},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:708,columnNumber:21},void 0),!_&&(!d&&F||d&&T)&&a.jsxDEV("div",{className:"absolute top-1 right-1",children:a.jsxDEV(Ss,{size:14,strokeWidth:3,style:{color:"#555BF6"}},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:713,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:712,columnNumber:23},void 0),Z&&a.jsxDEV("div",{className:"absolute bottom-1 left-1 right-1 text-center",children:a.jsxDEV("div",{className:`text-xs font-medium rounded px-1 ${Me?"bg-white/80":"bg-red-100"}`,style:{color:Me?"#555BF6":"#DC2626"},children:["€",_e.toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:720,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:719,columnNumber:23},void 0),!Z&&d&&T&&a.jsxDEV("div",{className:"absolute bottom-1 left-1 right-1 text-center",children:a.jsxDEV("div",{className:"text-xs font-medium bg-white/80 rounded px-1",style:{color:"#555BF6"},children:["€",o[N.id].toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:736,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:735,columnNumber:23},void 0)]},N.id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:667,columnNumber:19},void 0)})},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:658,columnNumber:13},void 0),d&&a.jsxDEV("div",{className:"text-center",children:a.jsxDEV("button",{onClick:()=>{f(!1),l({}),c(""),i(null)},className:"text-xs px-3 py-1 rounded border",style:{borderColor:"#555BF6",color:"#555BF6"},children:"Volver a pago único"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:748,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:747,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:646,columnNumber:11},void 0),u&&a.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxDEV("div",{className:"rounded-xl p-6 w-full max-w-sm shadow-2xl",style:{backgroundColor:"#FCFFA8"},children:[a.jsxDEV("div",{className:"text-center mb-6",children:[a.jsxDEV("div",{className:"text-xl font-bold mb-2",style:{color:"#555BF6"},children:(Je=He.find(N=>N.id===u))==null?void 0:Je.name},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:772,columnNumber:19},void 0),a.jsxDEV("div",{className:"text-sm font-medium",style:{color:"#555BF6",opacity:.8},children:["Máximo: €",(re+(o[u]||0)).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:775,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:771,columnNumber:17},void 0),a.jsxDEV("div",{className:"space-y-4",children:[a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("input",{type:"number",value:b,onChange:N=>x(N.target.value),placeholder:"0.00",className:"w-full p-4 border-2 rounded-xl text-xl text-center font-bold shadow-sm",style:{borderColor:"#555BF6",color:"#555BF6",backgroundColor:"#FAFAB0"},step:"0.01",min:"0",max:re+(o[u]||0),autoFocus:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:782,columnNumber:21},void 0),a.jsxDEV("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-xl font-bold",style:{color:"#555BF6"},children:"€"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:798,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:781,columnNumber:19},void 0),a.jsxDEV("button",{onClick:Ge,className:"w-full py-3 rounded-xl border-2 font-medium transition-all hover:shadow-md",style:{borderColor:"#555BF6",color:"#555BF6",backgroundColor:"#FAFAB0"},disabled:re<=0,children:["Importe completo: ",(re+(o[u]||0)).toFixed(2),"€"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:803,columnNumber:19},void 0),a.jsxDEV("div",{className:"flex gap-3 pt-2",children:[a.jsxDEV("button",{onClick:()=>{i(null),x("")},className:"flex-1 py-3 rounded-xl border-2 font-medium transition-all hover:opacity-80",style:{borderColor:"#555BF6",color:"#555BF6",backgroundColor:"rgba(250, 250, 176, 0.5)"},children:"Cancelar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:817,columnNumber:21},void 0),a.jsxDEV("button",{onClick:Ue,className:"flex-1 py-3 rounded-xl font-bold transition-all hover:opacity-90 shadow-md",style:{backgroundColor:"#555BF6",color:"white"},children:"Confirmar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:831,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:816,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:780,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:767,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:766,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:435,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-shrink-0 space-y-2",children:a.jsxDEV("button",{onClick:Re,disabled:d?!Te:!r,className:`w-full py-3 rounded-lg font-bold text-base transition-all ${(d?Te:r)?"hover:opacity-90 shadow-lg":"cursor-not-allowed"}`,style:(d?Te:r)?{backgroundColor:"#555BF6",color:"white"}:{backgroundColor:"#d1d5db",color:"#6b7280"},children:d&&De>0?`Completar Pago (€${De.toFixed(2)})`:"Completar Pago"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:847,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:846,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:423,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:412,columnNumber:5},void 0)},Ms=80,Fs=80,Rs=150,Is=1,Os=1,$s=150,Ls={tension:200,friction:20},Bs={tension:150,friction:20},qe={x:0,y:0,opacity:1,scale:1,rotate:0},zs=({onSwipeLeft:e,onSwipeRight:n,onSwipeDown:s,disabled:r=!1,isFirst:c=!1,isLast:o=!1})=>{const[{x:l,y:u,opacity:i,scale:d,rotate:f},b]=Ya(()=>({...qe,config:Ls})),x=()=>{try{b.start(qe)}catch(j){console.warn("Reset animation error:",j)}},D=j=>c&&!j||o&&j,C=j=>{try{b.start({x:j?-window.innerWidth:window.innerWidth,opacity:0,scale:.9,rotate:j?-15:15,config:Bs}),setTimeout(()=>{try{j?e():n(),setTimeout(()=>{b.set(qe)},50)}catch(v){console.error("Swipe execution error:",v),b.set(qe)}},Rs)}catch(v){console.error("Swipe animation error:",v),j?e():n()}},R=(j,v)=>{try{const h=Math.min(Math.abs(j)/$s,1),O=Math.sqrt(j*j+v*v);b.start({x:j*Is,y:v*Os,opacity:Math.max(.85,1-h*.1),scale:Math.max(.95,1-O/1e3*.05),rotate:j/10,immediate:!0})}catch(h){console.warn("Drag feedback error:",h)}};return{bind:wn(({down:j,movement:[v,h]})=>{if(!r)try{if(j)R(v,h);else{const O=Math.abs(v),ae=Math.abs(h);if(ae>O&&ae>Fs&&h>0&&s){s(),x();return}if(O>Ms){const fe=v<0;if(D(fe)){x();return}C(fe);return}x()}}catch(O){console.error("Gesture handling error:",O),x()}},{threshold:5,filterTaps:!0,preventScroll:!1,pointer:{touch:!0}}),style:{x:l,y:u,opacity:i,scale:d,transform:f.to(j=>`rotate(${j}deg)`)}}},Hs={flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0",paddingBottom:"0",paddingTop:"0",height:"100%",maxHeight:"100%",minHeight:"100%"},Na={base:"absolute w-full h-full flex justify-center items-center transition-all duration-400 ease-in-out",current:"absolute w-full h-full flex justify-center items-center"},xa={prev:{transform:"translateY(16px) scale(0.94)",opacity:.6,zIndex:1},next:{transform:"translateY(8px) scale(0.97)",opacity:.8,zIndex:2},current:{touchAction:"none",zIndex:50}},Ys={zIndex:4,marginBottom:"8px"},Ws=({appointments:e,currentIndex:n,onNext:s,onPrevious:r,onRefresh:c,paymentMode:o=!1,onCompletePayment:l,onWalletPayment:u,onMarkNoShow:i})=>{const d=m.useMemo(()=>e[n],[e,n]),f=m.useMemo(()=>e[n+1],[e,n]),b=m.useMemo(()=>e[n-1],[e,n]),x=zs({onSwipeLeft:s,onSwipeRight:r,onSwipeDown:o?void 0:c,disabled:e.length<=1||o,isFirst:n===0,isLast:n===e.length-1}),D=Ya({transform:o?"rotateY(180deg)":"rotateY(0deg)",config:{tension:200,friction:25}});return gn.useEffect(()=>{window.currentCardIndex=n},[n]),d?a.jsxDEV("div",{className:"relative w-full flex items-center justify-center",style:Hs,children:[b&&a.jsxDEV("div",{className:Na.base,style:xa.prev,children:a.jsxDEV(ba,{appointment:b,isActive:!1,onMarkNoShow:i},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:122,columnNumber:11},void 0)},`prev-${b._id}`,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:117,columnNumber:9},void 0),f&&a.jsxDEV("div",{className:Na.base,style:xa.next,children:a.jsxDEV(ba,{appointment:f,isActive:!1,onMarkNoShow:i},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:136,columnNumber:11},void 0)},`next-${f._id}`,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:131,columnNumber:9},void 0),a.jsxDEV(wa.div,{...x.bind(),className:Na.current,style:{...x.style,...xa.current,...D,transformStyle:"preserve-3d"},children:[a.jsxDEV("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(0deg)"},children:a.jsxDEV(ba,{appointment:d,isActive:!0,onMarkNoShow:i},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:166,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:157,columnNumber:9},void 0),a.jsxDEV("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:a.jsxDEV(_s,{appointment:d,onCompletePayment:l,onWalletPayment:u},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:183,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:174,columnNumber:9},void 0)]},`swipe-${n}-${d._id}`,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:145,columnNumber:7},void 0),e.length>1&&a.jsxDEV("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",style:Ys,children:e.map((C,R)=>a.jsxDEV("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${R===n?"bg-exora-primary":"bg-gray-300"}`},R,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:198,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:193,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:111,columnNumber:5},void 0):a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV("div",{className:"text-center text-gray-500",children:a.jsxDEV("p",{className:"text-xl",children:"No hay citas para esta fecha"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:103,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:102,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:101,columnNumber:7},void 0)},Gs=({appointments:e,selectedDate:n,onAppointmentClick:s})=>{const r=m.useMemo(()=>{if(e.length===0)return null;let i=23,d=0;return e.forEach(f=>{const b=new Date(f.fecha),x=b.getHours(),D=b.getMinutes(),C=parseInt(f.duracion||"60"),R=x,B=D+C,j=x+Math.floor(B/60),v=B%60>0?j+1:j;i=Math.min(i,R),d=Math.max(d,v)}),{start:i,end:d}},[e]),c=m.useMemo(()=>{if(!r)return[];const i=[];for(let d=r.start;d<=r.end;d++)for(let f=0;f<60&&!(d===r.end&&f>0);f+=30){const b=`${d.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`,x=`${b}:00`;i.push({hour:d,minute:f,time:b,fullTime:x})}return i},[r]),o=m.useMemo(()=>r?e.map((i,d)=>{const f=new Date(i.fecha),b=f.getHours(),x=f.getMinutes(),D=parseInt(i.duracion||"60"),C=(b-r.start)*60+x,R=Math.max(40,D*2);return{...i,index:d,hour:b,minute:x,startMinutes:C,durationMinutes:D,heightPx:R,timeDisplay:`${b.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`}}):[],[e,r]),l=i=>{s&&s(i)},u=i=>new Date(i+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxDEV("div",{className:"flex flex-col h-full bg-white",children:[a.jsxDEV("div",{className:"flex-shrink-0 p-4 border-b border-gray-200",children:a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 capitalize",children:u(n)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:128,columnNumber:11},void 0),a.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:[o.length," citas programadas"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:131,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:127,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:126,columnNumber:7},void 0),a.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:r?a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("div",{className:"relative",style:{height:`${c.length*60}px`},children:[a.jsxDEV("div",{className:"grid grid-cols-1 gap-0",children:c.map(i=>a.jsxDEV("div",{className:"border-b border-gray-100 h-[60px] flex",children:[a.jsxDEV("div",{className:"w-16 flex-shrink-0 p-2 border-r border-gray-200",children:a.jsxDEV("div",{className:"flex flex-col items-center",children:[a.jsxDEV("span",{className:"text-xs font-medium text-gray-600",children:i.time},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:160,columnNumber:23},void 0),i.minute===0&&a.jsxDEV(Ts,{size:12,className:"text-gray-400 mt-1"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:164,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:159,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:158,columnNumber:19},void 0),a.jsxDEV("div",{className:"flex-1"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:170,columnNumber:19},void 0)]},`${i.hour}-${i.minute}`,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:153,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:151,columnNumber:13},void 0),a.jsxDEV("div",{className:"absolute top-0 left-16 right-0 bottom-0",children:o.map(i=>{var f;const d=i.startMinutes*2;return a.jsxDEV("button",{onClick:()=>l(i),className:"absolute left-2 right-2 text-left p-2 rounded-lg transition-all duration-200 hover:shadow-md border-l-4",style:{top:`${d}px`,height:`${i.heightPx}px`,backgroundColor:i.pagada?"#F0F9FF":"#FCFFA8",borderLeftColor:i.profesional.color||"#555BF6",zIndex:10},children:a.jsxDEV("div",{className:"h-full flex flex-col justify-start overflow-hidden",children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[a.jsxDEV("span",{className:"text-xs font-medium text-gray-600",children:i.timeDisplay},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:197,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-xs font-semibold truncate ml-2",style:{color:"#555BF6"},children:i.usuario.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:200,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:196,columnNumber:23},void 0),a.jsxDEV("div",{className:"flex items-center space-x-1 mb-1",children:[a.jsxDEV(Ca,{size:10,className:"text-gray-500 flex-shrink-0"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:207,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-xs text-gray-700 truncate font-medium",children:((f=i.servicios[0])==null?void 0:f.nombre)||"Sin servicio"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:208,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:206,columnNumber:23},void 0),i.durationMinutes>=30&&a.jsxDEV("div",{className:"text-xs text-gray-600 truncate mb-1",children:i.profesional.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:215,columnNumber:25},void 0),i.durationMinutes>=45&&a.jsxDEV("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsxDEV("div",{className:"flex items-center space-x-1",children:[a.jsxDEV(sn,{size:8},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:224,columnNumber:29},void 0),a.jsxDEV("span",{children:i.sucursal.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:225,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:223,columnNumber:27},void 0),a.jsxDEV("span",{children:["(",i.durationMinutes,"min)"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:227,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:222,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:194,columnNumber:21},void 0)},i._id,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:182,columnNumber:19},void 0)})},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:176,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:149,columnNumber:13},void 0),a.jsxDEV(Ks,{selectedDate:n,timeRange:r},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:238,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:147,columnNumber:11},void 0):a.jsxDEV("div",{className:"flex-1 flex items-center justify-center h-full",children:a.jsxDEV("div",{className:"text-center text-gray-500",children:[a.jsxDEV("p",{className:"text-lg font-medium",children:"No hay citas disponibles hoy"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:142,columnNumber:15},void 0),a.jsxDEV("p",{className:"text-sm mt-2",children:"Selecciona otra fecha para ver las citas"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:143,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:141,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:140,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:138,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:124,columnNumber:5},void 0)},Ks=({selectedDate:e,timeRange:n})=>{const[s,r]=m.useState(new Date);m.useEffect(()=>{const o=()=>{r(new Date)};o();const l=setInterval(o,6e4);return()=>clearInterval(l)},[]);const c=m.useMemo(()=>{const o=new Date().toISOString().split("T")[0];if(e!==o||!n)return null;const l=s.getHours(),u=s.getMinutes();return l<n.start||l>n.end?null:((l-n.start)*60+u)*2},[e,n,s]);return c===null?null:a.jsxDEV("div",{className:"absolute left-0 right-0 z-10 pointer-events-none",style:{top:`${c}px`},children:a.jsxDEV("div",{className:"flex items-center",children:[a.jsxDEV("div",{className:"w-16 flex justify-center",children:a.jsxDEV("div",{className:"w-2 h-2 bg-red-500 rounded-full"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:293,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:292,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-1 h-0.5 bg-red-500"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:295,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:291,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:287,columnNumber:5},void 0)},Js=({selectedDate:e,onDateChange:n})=>{const[s,r]=m.useState(!1),c=m.useMemo(()=>new Date(e+"T00:00:00"),[e]),o=m.useMemo(()=>fs(c),[c]),l=i=>{const d=i.target.value;n(d),r(!1)},u=m.useMemo(()=>{const i=new Date,d=new Date(i);d.setDate(d.getDate()-1);const f=new Date(i);f.setDate(f.getDate()+1);const b=new Date(i);return b.setDate(b.getDate()+2),[{label:"Ayer",date:Ye(d)},{label:"Hoy",date:Ye(i)},{label:"Mañana",date:Ye(f)},{label:"Pasado mañana",date:Ye(b)}]},[]);return a.jsxDEV("div",{className:"relative z-[100]",children:[a.jsxDEV("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200 hover:bg-gray-50 transition-colors",children:[a.jsxDEV("span",{className:"font-medium text-gray-900",children:o},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:48,columnNumber:9},void 0),a.jsxDEV(Cs,{size:20,className:`transition-transform duration-200 ${s?"rotate-180":""}`},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:49,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:44,columnNumber:7},void 0),s&&a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"fixed inset-0 z-[9998]",onClick:()=>r(!1)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:58,columnNumber:11},void 0),a.jsxDEV("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-[9999]",children:a.jsxDEV("div",{className:"p-4",children:[a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Acceso rápido"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:68,columnNumber:17},void 0),a.jsxDEV("div",{className:"space-y-1",children:u.map(i=>a.jsxDEV("button",{onClick:()=>{n(i.date),r(!1)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${i.date===e?"bg-exora-primary text-white":"hover:bg-gray-100 text-gray-700"}`,children:i.label},i.date,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:71,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:69,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:67,columnNumber:15},void 0),a.jsxDEV("div",{children:[a.jsxDEV("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Seleccionar fecha"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:91,columnNumber:17},void 0),a.jsxDEV("input",{type:"date",value:e,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-exora-primary focus:border-transparent"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:92,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:90,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:65,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:64,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:56,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:43,columnNumber:5},void 0)};var Pe=(e=>(e.CARDS="cards",e.DAY="day",e.WEEK="week",e))(Pe||{});const Zs=({currentMode:e,onModeChange:n})=>{const s=[{mode:Pe.CARDS,icon:Ps,label:"Cards",title:"Vista de tarjetas"},{mode:Pe.DAY,icon:ks,label:"Día",title:"Vista de día"}];return a.jsxDEV("div",{className:"flex items-center space-x-0.5 bg-gray-100 rounded-lg p-1",children:s.map(({mode:r,icon:c,label:o,title:l})=>a.jsxDEV("button",{onClick:()=>n(r),title:l,className:`
            flex items-center space-x-2 px-3 py-2.5 rounded-md text-xs font-medium transition-all duration-200 min-h-[44px]
            ${e===r?"bg-white text-exora-primary shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}
          `,children:[a.jsxDEV(c,{size:18},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:44,columnNumber:11},void 0),a.jsxDEV("span",{className:"hidden sm:inline text-sm",children:o},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:45,columnNumber:11},void 0)]},r,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:32,columnNumber:9},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:30,columnNumber:5},void 0)},qs=({canGoBack:e,canGoForward:n,onPrevious:s,onNext:r,onAdd:c,disabled:o=!1})=>a.jsxDEV("div",{className:"safe-area-bottom bg-white border-t border-gray-200 flex flex-col justify-end",style:{backgroundColor:"var(--exora-primary)",minHeight:"80px"},children:a.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxDEV("button",{onClick:s,disabled:!e||o,className:`
            flex items-center justify-center w-12 h-12 rounded-full
            transition-all duration-200
            ${e&&!o?"bg-white/20 text-white hover:bg-white/30 active:bg-white/40":"bg-white/10 text-white/40 cursor-not-allowed"}
          `,children:a.jsxDEV(Vs,{size:24},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:40,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:28,columnNumber:9},void 0),a.jsxDEV("button",{onClick:c,disabled:o,className:`
            flex items-center justify-center w-14 h-14 rounded-full
            shadow-lg transition-all duration-200
            ${o?"opacity-50 cursor-not-allowed":"hover:scale-105 active:scale-95"}
          `,style:{backgroundColor:"var(--exora-light-yellow)"},children:a.jsxDEV("span",{className:"text-2xl font-bold",style:{color:"#555BF6"},children:"€"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:57,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:44,columnNumber:9},void 0),a.jsxDEV("button",{onClick:r,disabled:!n||o,className:`
            flex items-center justify-center w-12 h-12 rounded-full
            transition-all duration-200
            ${n&&!o?"bg-white/20 text-white hover:bg-white/30 active:bg-white/40":"bg-white/10 text-white/40 cursor-not-allowed"}
          `,children:a.jsxDEV(Us,{size:24},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:78,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:66,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:26,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:22,columnNumber:5},void 0);class Xs{static async fetchAppointments(n){try{return(await pe.post("/citas/dia/profesional",n)).data}catch(s){throw console.error("Error fetching appointments:",s),s}}}const P=e=>{const n=new Date;return n.setDate(n.getDate()+e),n.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},k=e=>{const n=new Date;return n.setDate(n.getDate()+e),n.toISOString().split("T")[0]},Qs=[{id:"1",cliente:"Jose Morales",telefono:"633902936",servicio:"Corte de Cabello adulto",variante:"Degradado Adulto",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"09:00",descuentos:"No",comentarios:"Cliente con alergia a la laca. Usar producto alternativo.",apiDate:k(0)},{id:"2",cliente:"Maria García",telefono:"622334455",servicio:"Peinado y Brushing",variante:"Ondas Suaves",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"09:30",descuentos:"Cliente VIP (-20%)",comentarios:"Cita para evento especial. Traer accesorios propios.",apiDate:k(0)},{id:"3",cliente:"Carlos López",telefono:"688776655",servicio:"Barba y Bigote",variante:"Arreglo Clásico",sucursal:"Granollers",fecha:P(0),hora:"10:00",descuentos:"No",comentarios:"",apiDate:k(0)},{id:"4",cliente:"Alejandro Ruiz",telefono:"644123789",servicio:"Corte Niño",variante:"Estilo Juvenil",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"10:30",descuentos:"Descuento Familiar (-15%)",comentarios:"Niño muy nervioso, tener paciencia.",apiDate:k(0)},{id:"5",cliente:"Sofia Martín",telefono:"655987654",servicio:"Mechas y Tinte",variante:"Reflejos Rubios",sucursal:"Granollers",fecha:P(0),hora:"11:00",descuentos:"No",comentarios:"Quiere cambio radical de look.",apiDate:k(0)},{id:"6",cliente:"Manuel Torres",telefono:"677234567",servicio:"Afeitado Completo",variante:"Ritual Tradicional",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"11:30",descuentos:"No",comentarios:"",apiDate:k(0)},{id:"7",cliente:"Carmen Jiménez",telefono:"611456789",servicio:"Peinado de Novia",variante:"Recogido Elegante",sucursal:"Granollers",fecha:P(0),hora:"12:00",descuentos:"Paquete Novias (-10%)",comentarios:"Boda por la tarde, muy importante que quede perfecto.",apiDate:k(0)},{id:"8",cliente:"Antonio Silva",telefono:"699345678",servicio:"Corte Clásico",variante:"Estilo Ejecutivo",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"16:00",descuentos:"No",comentarios:"",apiDate:k(0)},{id:"9",cliente:"Lucia Fernández",telefono:"622567890",servicio:"Corte y Brushing",variante:"Bob Moderno",sucursal:"Granollers",fecha:P(0),hora:"16:30",descuentos:"No",comentarios:"Primera visita, consultar estilo preferido.",apiDate:k(0)},{id:"10",cliente:"Diego Moreno",telefono:"666789012",servicio:"Barba y Bigote",variante:"Barba Hipster",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"17:00",descuentos:"No",comentarios:"Quiere mantener longitud pero dar forma.",apiDate:k(0)},{id:"11",cliente:"Patricia Vega",telefono:"644890123",servicio:"Tratamiento Keratina",variante:"Alisado Natural",sucursal:"Granollers",fecha:P(0),hora:"17:30",descuentos:"Promo Tratamientos (-20%)",comentarios:"Cabello muy rizado, quiere efecto natural.",apiDate:k(0)},{id:"12",cliente:"Fernando Castro",telefono:"688012345",servicio:"Corte y Peinado",variante:"Fade Americano",sucursal:"Lliça d'Amunt",fecha:P(0),hora:"18:00",descuentos:"No",comentarios:"",apiDate:k(0)},{id:"13",cliente:"Ana Martínez",telefono:"655123456",servicio:"Color y Mechas",variante:"Balayage",sucursal:"Granollers",fecha:P(1),hora:"09:00",descuentos:"Promo Verano (-15%)",comentarios:"Segundo retoque, usar misma mezcla anterior.",apiDate:k(1)},{id:"14",cliente:"Pedro Sánchez",telefono:"633998877",servicio:"Corte y Peinado",variante:"Estilo Moderno",sucursal:"Lliça d'Amunt",fecha:P(1),hora:"09:30",descuentos:"No",comentarios:"Cliente nuevo, consultar preferencias.",apiDate:k(1)},{id:"15",cliente:"Laura Ruiz",telefono:"644556677",servicio:"Tratamiento Capilar",variante:"Hidratación Profunda",sucursal:"Granollers",fecha:P(1),hora:"10:00",descuentos:"No",comentarios:"Cabello muy dañado, usar productos específicos.",apiDate:k(1)},{id:"16",cliente:"Miguel Ángel Ramos",telefono:"677123456",servicio:"Afeitado y Masaje",variante:"Experiencia Premium",sucursal:"Lliça d'Amunt",fecha:P(1),hora:"10:30",descuentos:"No",comentarios:"Cliente VIP, servicio completo.",apiDate:k(1)},{id:"17",cliente:"Elena Vargas",telefono:"622789456",servicio:"Peinado Eventos",variante:"Semi-recogido",sucursal:"Granollers",fecha:P(1),hora:"11:00",descuentos:"No",comentarios:"Evento corporativo por la noche.",apiDate:k(1)},{id:"18",cliente:"Raúl Herrera",telefono:"666456789",servicio:"Corte Cabello y Barba",variante:"Look Completo",sucursal:"Lliça d'Amunt",fecha:P(1),hora:"11:30",descuentos:"Combo Completo (-10%)",comentarios:"",apiDate:k(1)},{id:"19",cliente:"Cristina Delgado",telefono:"611345678",servicio:"Mechas Californianas",variante:"Efecto Sol",sucursal:"Granollers",fecha:P(1),hora:"12:00",descuentos:"No",comentarios:"Quiere efecto muy natural.",apiDate:k(1)},{id:"20",cliente:"Javier Navarro",telefono:"688567890",servicio:"Corte Degradado",variante:"Fade Alto",sucursal:"Lliça d'Amunt",fecha:P(1),hora:"16:00",descuentos:"No",comentarios:"Le gusta muy corto por los lados.",apiDate:k(1)},{id:"21",cliente:"Beatriz Romero",telefono:"644678901",servicio:"Corte Bob",variante:"Bob Asimétrico",sucursal:"Granollers",fecha:P(1),hora:"16:30",descuentos:"No",comentarios:"Cambio de look radical.",apiDate:k(1)},{id:"22",cliente:"Óscar Mendoza",telefono:"677890123",servicio:"Barba Vintage",variante:"Estilo Retro",sucursal:"Lliça d'Amunt",fecha:P(1),hora:"17:00",descuentos:"No",comentarios:"",apiDate:k(1)},{id:"23",cliente:"Natalia Iglesias",telefono:"622901234",servicio:"Brushing y Peinado",variante:"Ondas Vintage",sucursal:"Granollers",fecha:P(1),hora:"17:30",descuentos:"No",comentarios:"Estilo años 50.",apiDate:k(1)},{id:"24",cliente:"David Roca",telefono:"677890123",servicio:"Afeitado Clásico",variante:"Ritual con Toalla Caliente",sucursal:"Lliça d'Amunt",fecha:P(2),hora:"09:00",descuentos:"No",comentarios:"Llega 10 minutos tarde, avisado por teléfono.",apiDate:k(2)},{id:"25",cliente:"Isabel Torres",telefono:"611223344",servicio:"Corte y Color",variante:"Bob Corto + Tinte",sucursal:"Granollers",fecha:P(2),hora:"09:30",descuentos:"Descuento Estudiante (-10%)",comentarios:"Primera vez, explicar bien el proceso.",apiDate:k(2)},{id:"26",cliente:"Roberto Díaz",telefono:"699887766",servicio:"Corte de Cabello",variante:"Degradado Lateral",sucursal:"Lliça d'Amunt",fecha:P(2),hora:"10:00",descuentos:"No",comentarios:"",apiDate:k(2)},{id:"27",cliente:"Verónica Campos",telefono:"633456789",servicio:"Alisado Japonés",variante:"Tratamiento Completo",sucursal:"Granollers",fecha:P(2),hora:"10:30",descuentos:"Promo Alisados (-25%)",comentarios:"Proceso largo, bloquear 3 horas.",apiDate:k(2)},{id:"28",cliente:"Adrián Muñoz",telefono:"655789012",servicio:"Corte Buzz Cut",variante:"Rapado Militar",sucursal:"Lliça d'Amunt",fecha:P(2),hora:"11:00",descuentos:"No",comentarios:"Muy corto, número 1.",apiDate:k(2)},{id:"29",cliente:"Gloria Santos",telefono:"644012345",servicio:"Permanente Suave",variante:"Ondas Naturales",sucursal:"Granollers",fecha:P(2),hora:"11:30",descuentos:"No",comentarios:"Quiere volumen sin rizar mucho.",apiDate:k(2)},{id:"30",cliente:"Sergio Blanco",telefono:"688234567",servicio:"Corte y Styling",variante:"Pompadour Moderno",sucursal:"Lliça d'Amunt",fecha:P(2),hora:"16:00",descuentos:"No",comentarios:"Enseñar cómo mantener el peinado.",apiDate:k(2)},{id:"31",cliente:"Mónica Guerrero",telefono:"622345678",servicio:"Extensiones",variante:"Mechas con Clip",sucursal:"Granollers",fecha:P(2),hora:"16:30",descuentos:"No",comentarios:"Traer extensiones propias.",apiDate:k(2)},{id:"32",cliente:"Francisco Aguilar",telefono:"677456789",servicio:"Barba y Cejas",variante:"Arreglo Completo",sucursal:"Lliça d'Amunt",fecha:P(2),hora:"17:00",descuentos:"No",comentarios:"Cejas muy pobladas, necesita forma.",apiDate:k(2)},{id:"33",cliente:"Alicia Herrero",telefono:"611567890",servicio:"Corte Pixie",variante:"Estilo Moderno",sucursal:"Granollers",fecha:P(2),hora:"17:30",descuentos:"No",comentarios:"Corte muy arriesgado, confirmar antes.",apiDate:k(2)}];let Ae=new Map;const et=10;let Le=new Map;const at=e=>e.map(n=>{var s;return{...n,comentarios:n.comentarios?[n.comentarios]:[],usuario:{...n.usuario,comentarios:(s=n.usuario)!=null&&s.comentarios?Array.isArray(n.usuario.comentarios)?n.usuario.comentarios:[n.usuario.comentarios]:[]}}}),Ba=(e,n=!1)=>{const s=new Date,r=Math.floor(s.getTime()/(5*60*1e3)),c=`${e.length}-${r}-${e.map(u=>`${u._id}-${u.pagada}-${u.usuario.saldoMonedero||0}`).join(",")}`;if(!n&&Ae.has(c))return Ae.get(c);const l=e.filter(u=>{if(!u.pagada)return!0;const i=new Date(u.fecha);return i.setMinutes(i.getMinutes()+15),s<=i}).sort((u,i)=>{const d=new Date(u.fecha),f=new Date(i.fecha);return d.getTime()-f.getTime()});if(Ae.size>=et){const u=Ae.keys().next().value;u&&Ae.delete(u)}return Ae.set(c,l),l},nt=Ha((e,n)=>({appointments:[],filteredAppointments:[],currentDate:Ye(new Date),currentIndex:0,showPaidOnly:!1,viewMode:Pe.CARDS,isLoading:!1,error:null,fetchAppointments:async s=>{const r=n(),c=`appointments-${s}`;if(Le.has(c))return Le.get(c);if(r.isLoading&&r.currentDate===s)return;e({isLoading:!0,error:null,appointments:[],filteredAppointments:[],currentIndex:0,showPaidOnly:!1});const o=(async()=>{try{const l=new Date(s+"T00:00:00.000Z").toISOString(),u=await Xs.fetchAppointments({empresa:"662f5bb1f956857b8cd0d9c7",fecha:l});if(u.ok){const i=Ba(u.citas);e({appointments:u.citas,filteredAppointments:i,currentDate:s,currentIndex:0,isLoading:!1,error:null});const d=u.citas.length-i.length;u.citas.length===0?U("No hay citas para este día",{icon:"ℹ️"}):d>0&&U.success(`${i.length} citas disponibles (${d} finalizadas ocultas)`)}else throw new Error("Error al obtener las citas")}catch(l){console.error("Error fetching appointments:",l);try{console.log("Using mock data as fallback");const u=at(Qs),i=new Date(s),d=u.filter(b=>new Date(b.apiDate).toDateString()===i.toDateString()),f=Ba(d);e({appointments:d,filteredAppointments:f,currentDate:s,currentIndex:0,isLoading:!1,error:null}),d.length===0?U("No hay citas para este día (datos de prueba)",{icon:"ℹ️"}):U.success(`${f.length} citas cargadas (datos de prueba)`)}catch(u){console.error("Error loading mock data:",u),e({appointments:[],filteredAppointments:[],currentDate:s,currentIndex:0,isLoading:!1,error:l.message||"Error al cargar las citas"}),U.error(l.message||"Error al cargar las citas")}}finally{Le.delete(c)}})();return Le.set(c,o),o},setCurrentIndex:s=>{const{filteredAppointments:r}=n();s>=0&&s<r.length&&e({currentIndex:s})},setCurrentDate:s=>{e({currentDate:s})},setViewMode:s=>{e({viewMode:s})},toggleShowPaid:()=>{},clearError:()=>{e({error:null})},clearCache:()=>{Ae.clear(),Le.clear()},refreshCurrentData:()=>{const{currentDate:s}=n();if(s){const r=`appointments-${s}`;return Le.delete(r),n().fetchAppointments(s)}}})),st=e=>{try{const n=JSON.parse(atob(e.split(".")[1]));return n.exp?Date.now()>=n.exp*1e3:!1}catch{return!0}},tt=async e=>{if(!e.promocion||e.promocion.length===0)return{importeConDescuento:e.importe,descuentoTotal:0};try{const s=(await ea.getPromocionesEmpresa(e.empresa)).filter(o=>e.promocion.includes(o._id));let r=0;return s.forEach(o=>{o.activo&&o.tipo==="descuento"&&o.destino==="servicio"&&(o.porcentaje!==null&&o.porcentaje!==void 0?r+=e.importe*(o.porcentaje/100):o.cifra!==void 0&&o.cifra>0&&(r+=o.cifra/100))}),{importeConDescuento:Math.max(0,e.importe-r),descuentoTotal:r}}catch(n){return console.error("Error calculando descuentos:",n),{importeConDescuento:e.importe,descuentoTotal:0}}},rt=async(e,n)=>{var l,u,i,d;const s=localStorage.getItem("exora_auth_token");if(!s)throw new Error("No hay token de autenticación válido");if(st(s))throw new Error("Token de autenticación expirado. Por favor, inicia sesión nuevamente.");const{importeConDescuento:r,descuentoTotal:c}=await tt(e),o={empresa:e.empresa,usuario:e.usuario._id,sucursal:e.sucursal._id,profesional:e.profesional._id,fechaCita:e.fecha,importe:r,promocion:e.promocion,servicios:e.servicios.map(f=>({_id:f._id,variantes:f.variantes||[],nombre:f.nombre,duracion:f.duracion||"60",precio:f.precio,deleted:f.deleted||!1})),variantes:e.variantes,metodoPago:n,productos:[],cita:e._id,...c>0&&{descuentos:[{tipo:"promocion",valor:c,descripcion:"Descuento por promociones aplicadas"}]}};try{const f=await fetch("https://api.exora.app/api/ventas",{method:"POST",headers:{"Content-Type":"application/json","x-token":s},body:JSON.stringify(o)});if(!f.ok)throw new Error(`HTTP ${f.status}: Error en la venta`);return await f.json()}catch(f){console.error("=== ERROR EN VENTA ==="),console.error("Error message:",f==null?void 0:f.message);const b=((u=(l=f==null?void 0:f.response)==null?void 0:l.data)==null?void 0:u.message)||((d=(i=f==null?void 0:f.response)==null?void 0:i.data)==null?void 0:d.msg)||(f==null?void 0:f.message)||"Error al registrar la venta";throw new Error(b)}};class ot{static async marcarNoPresentado(n){try{const s={empresa:n.empresa,estadoCita:"No presentado"};return(await pe.delete(`/citas/${n._id}`,{data:s})).data}catch(s){throw console.error("Error marcando cita como no presentado:",s),s}}static async updateEstadoCita(n,s){try{const r={empresa:n.empresa,estadoCita:s};return(await pe.delete(`/citas/${n._id}`,{data:r})).data}catch(r){throw console.error("Error actualizando estado de cita:",r),r}}}const it=()=>{const e=za(),[n,s]=m.useState(!1),{user:r,isAuthenticated:c,logout:o,checkAuth:l}=Ea(),{filteredAppointments:u,currentDate:i,currentIndex:d,viewMode:f,showPaidOnly:b,isLoading:x,error:D,fetchAppointments:C,setCurrentIndex:R,setCurrentDate:B,setViewMode:j,toggleShowPaid:v}=nt();m.useEffect(()=>{l()},[l]),m.useEffect(()=>{c||e("/login")},[c,e]),m.useEffect(()=>{c&&C(i)},[i,C,c]);const h=m.useCallback(z=>{B(z)},[B]),O=m.useCallback(z=>{j(z),n&&s(!1)},[j,n]),ae=m.useCallback(z=>{const ie=u.findIndex(Q=>Q._id===z._id);ie!==-1&&(R(ie),j(Pe.CARDS),!n&&!z.pagada&&s(!0))},[u,R,j,n]),fe=m.useCallback(()=>{d<u.length-1&&R(d+1)},[d,u.length,R]),de=m.useCallback(()=>{if(d>0&&d<=u.length-1){R(d-1);return}!b&&d===0&&v()},[d,u.length,b,R,v]),Ve=m.useCallback(()=>{C(i)},[i,C]),J=m.useCallback(()=>{s(!1)},[]),he=m.useCallback(()=>{if(n){J();return}if(u.length===0){U.error("No hay citas disponibles");return}const z=u[d];if(!z){U.error("No se encontró la cita");return}if(z.pagada){U.error("Esta cita ya está pagada");return}s(!0)},[d,u,n,J]),w=m.useCallback(async(z,ie,Q)=>{const G=u[d];if(!G){U.error("No se encontró la cita");return}try{U.loading("Procesando pago..."),await rt(Q||G,ie),U.dismiss(),U.success("Pago completado exitosamente"),J(),C(i)}catch(Ne){U.dismiss(),console.error("Error al procesar el pago:",Ne),Ne.authError||Ne.status===401?(U.error("Sesión expirada. Por favor, inicia sesión nuevamente."),o(),e("/login")):U.error(Ne.message||"Error al procesar el pago")}},[i,d,u,C,J,o,e]),te=m.useCallback(async(z,ie)=>{const Q=u[d];if(!Q){U.error("No se encontró la cita");return}try{U.loading("Procesando pago con monedero...");const G=ie||Q;if(!ya.tieneSaldoSuficiente(G.usuario.saldoMonedero,G.importe)){U.dismiss(),U.error("Saldo insuficiente en el monedero");return}await ya.procesarPagoMonedero(G.usuario._id,G.empresa,G._id,G.importe),U.dismiss(),U.success("Pago con monedero completado exitosamente"),J(),C(i)}catch(G){U.dismiss(),console.error("Error al procesar el pago con monedero:",G),G.authError||G.status===401?(U.error("Sesión expirada. Por favor, inicia sesión nuevamente."),o(),e("/login")):U.error(G.message||"Error al procesar el pago con monedero")}},[i,d,u,C,J,o,e]),I=m.useCallback(async z=>{const ie=u.find(Q=>Q._id===z);if(!ie){U.error("No se encontró la cita");return}try{U.loading("Marcando como no presentado..."),await ot.marcarNoPresentado(ie),U.dismiss(),U.success("Cita marcada como no presentado"),C(i)}catch(Q){U.dismiss(),console.error("Error marcando cita como no presentado:",Q),Q.authError||Q.status===401?(U.error("Sesión expirada. Por favor, inicia sesión nuevamente."),o(),e("/login")):U.error(Q.message||"Error al marcar cita como no presentado")}},[i,u,C,o,e]),Y=m.useCallback(()=>{J(),U("Pago cancelado")},[J]),W=m.useCallback(()=>{o(),e("/login")},[o,e]),ye=m.useMemo(()=>r?"name"in r&&r.name?r.name:r.nombre||"Usuario":"Usuario",[r]),be=m.useMemo(()=>d>0&&!n,[d,n]),we=m.useMemo(()=>d<u.length-1&&!n,[d,u.length,n]);return{userName:ye,isAuthenticated:c,paymentMode:n,currentDate:i,currentIndex:d,viewMode:f,isLoading:x,error:D,showPaidOnly:b,filteredAppointments:u,canGoBack:be,canGoForward:we,handlers:{changeDate:h,changeViewMode:O,nextAppointment:fe,previousAppointment:de,refreshAppointments:Ve,initiatePaymentMode:he,completePayment:w,completeWalletPayment:te,markNoShow:I,cancelPayment:Y,logout:W,selectAppointment:ae}}},ct=()=>{const{userName:e,isAuthenticated:n,paymentMode:s,currentDate:r,currentIndex:c,viewMode:o,isLoading:l,error:u,showPaidOnly:i,filteredAppointments:d,canGoBack:f,canGoForward:b,handlers:x}=it(),D=d.length===0;return n?a.jsxDEV("div",{className:"fixed inset-0 flex flex-col overflow-hidden",style:{backgroundColor:"var(--exora-background)"},children:[a.jsxDEV("header",{className:"bg-white shadow-sm border-b border-gray-200 z-[10000]",children:a.jsxDEV("div",{className:"max-w-md mx-auto px-4 py-3",children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[a.jsxDEV("div",{children:[a.jsxDEV("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:["Hola, ",e]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:46,columnNumber:15},void 0),a.jsxDEV("p",{className:"text-xs sm:text-sm text-gray-600",children:[d.length," citas ",i?"pagadas":"pendientes"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:49,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:45,columnNumber:13},void 0),a.jsxDEV("button",{onClick:x.logout,className:"text-gray-500 hover:text-gray-700 transition-colors p-2 flex-shrink-0",title:"Cerrar sesión",children:a.jsxDEV(As,{size:20},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:59,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:54,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:44,columnNumber:11},void 0),a.jsxDEV("div",{className:"flex items-center justify-between space-x-2",children:[a.jsxDEV(Zs,{currentMode:o,onModeChange:x.changeViewMode},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:65,columnNumber:13},void 0),a.jsxDEV(Js,{selectedDate:r,onDateChange:x.changeDate},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:64,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:42,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:41,columnNumber:7},void 0),a.jsxDEV("main",{className:"flex-1 flex flex-col relative overflow-visible min-h-0",children:l?a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV(ha,{size:"lg"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:79,columnNumber:15},void 0),a.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Cargando citas..."},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:80,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:78,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:77,columnNumber:11},void 0):u?a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV("div",{className:"text-center text-red-600",children:[a.jsxDEV("p",{className:"text-lg font-medium",children:"Error al cargar las citas"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:86,columnNumber:15},void 0),a.jsxDEV("p",{className:"text-sm mt-2",children:u},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:87,columnNumber:15},void 0),a.jsxDEV("button",{onClick:x.refreshAppointments,className:"mt-4 px-4 py-2 bg-exora-primary text-white rounded-lg hover:opacity-90 transition-opacity",children:"Reintentar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:88,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:85,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:84,columnNumber:11},void 0):a.jsxDEV(a.Fragment,{children:o===Pe.CARDS?a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV(Ws,{appointments:d,currentIndex:c,onNext:x.nextAppointment,onPrevious:x.previousAppointment,onRefresh:x.refreshAppointments,paymentMode:s,onCompletePayment:x.completePayment,onWalletPayment:x.completeWalletPayment,onMarkNoShow:x.markNoShow},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:100,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:99,columnNumber:15},void 0):a.jsxDEV("div",{className:"flex-1 overflow-hidden",children:a.jsxDEV(Gs,{appointments:d,selectedDate:r,onAppointmentClick:x.selectAppointment},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:114,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:113,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:97,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:75,columnNumber:7},void 0),o===Pe.CARDS&&a.jsxDEV("div",{className:"z-10 flex-shrink-0",children:a.jsxDEV(qs,{canGoBack:f,canGoForward:b,onPrevious:s?void 0:x.previousAppointment,onNext:s?void 0:x.nextAppointment,onAdd:x.initiatePaymentMode,disabled:D},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:127,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:126,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:40,columnNumber:5},void 0):a.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxDEV(ha,{size:"lg"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:34,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:33,columnNumber:7},void 0)},lt=()=>{const{checkAuth:e,isAuthenticated:n}=Ea();return m.useEffect(()=>{e()},[e]),a.jsxDEV(jn,{basename:"/",children:a.jsxDEV("div",{className:"app font-main",children:[a.jsxDEV(vn,{children:[a.jsxDEV(da,{path:"/login",element:n?a.jsxDEV(ma,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:21,columnNumber:53},void 0):a.jsxDEV(gs,{},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:21,columnNumber:41},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:19,columnNumber:11},void 0),a.jsxDEV(da,{path:"/dashboard",element:n?a.jsxDEV(ct,{},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:25,columnNumber:40},void 0):a.jsxDEV(ma,{to:"/login",replace:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:25,columnNumber:56},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:23,columnNumber:11},void 0),a.jsxDEV(da,{path:"/",element:a.jsxDEV(ma,{to:n?"/dashboard":"/login",replace:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:29,columnNumber:22},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:27,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:18,columnNumber:9},void 0),a.jsxDEV(ds,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:1500,style:{background:"#fff",color:"#333",fontFamily:"var(--font-main)",fontSize:"14px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},success:{iconTheme:{primary:"var(--exora-primary)",secondary:"#fff"}},error:{iconTheme:{primary:"var(--exora-secondary)",secondary:"#fff"}}}},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:34,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:17,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:16,columnNumber:5},void 0)};Ga(document.getElementById("root")).render(a.jsxDEV(m.StrictMode,{children:a.jsxDEV(lt,{},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/main.tsx",lineNumber:21,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/main.tsx",lineNumber:20,columnNumber:3},void 0));
