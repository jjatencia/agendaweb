import{r as P,a as Bi,b as Qe}from"./vendor-BnAv-nsF.js";var ft=Ae(),_=e=>Se(e,ft),dt=Ae();_.write=e=>Se(e,dt);var Le=Ae();_.onStart=e=>Se(e,Le);var ht=Ae();_.onFrame=e=>Se(e,ht);var pt=Ae();_.onFinish=e=>Se(e,pt);var ee=[];_.setTimeout=(e,t)=>{const i=_.now()+t,s=()=>{const n=ee.findIndex(o=>o.cancel==s);~n&&ee.splice(n,1),Q-=~n?1:0},r={time:i,handler:e,cancel:s};return ee.splice(si(i),0,r),Q+=1,ri(),r};var si=e=>~(~ee.findIndex(t=>t.time>e)||~ee.length);_.cancel=e=>{Le.delete(e),ht.delete(e),pt.delete(e),ft.delete(e),dt.delete(e)};_.sync=e=>{et=!0,_.batchedUpdates(e),et=!1};_.throttle=e=>{let t;function i(){try{e(...t)}finally{t=null}}function s(...r){t=r,_.onStart(i)}return s.handler=e,s.cancel=()=>{Le.delete(i),t=null},s};var mt=typeof window<"u"?window.requestAnimationFrame:()=>{};_.use=e=>mt=e;_.now=typeof performance<"u"?()=>performance.now():Date.now;_.batchedUpdates=e=>e();_.catch=console.error;_.frameLoop="always";_.advance=()=>{_.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):oi()};var K=-1,Q=0,et=!1;function Se(e,t){et?(t.delete(e),e(0)):(t.add(e),ri())}function ri(){K<0&&(K=0,_.frameLoop!=="demand"&&mt(ni))}function zi(){K=-1}function ni(){~K&&(mt(ni),_.batchedUpdates(oi))}function oi(){const e=K;K=_.now();const t=si(K);if(t&&(ai(ee.splice(0,t),i=>i.handler()),Q-=t),!Q){zi();return}Le.flush(),ft.flush(e?Math.min(64,K-e):16.667),ht.flush(),dt.flush(),pt.flush()}function Ae(){let e=new Set,t=e;return{add(i){Q+=t==e&&!e.has(i)?1:0,e.add(i)},delete(i){return Q-=t==e&&e.has(i)?1:0,e.delete(i)},flush(i){t.size&&(e=new Set,Q-=t.size,ai(t,s=>s(i)&&e.add(s)),Q+=e.size,t=e)}}}function ai(e,t){e.forEach(i=>{try{t(i)}catch(s){_.catch(s)}})}var Ki=Object.defineProperty,Qi=(e,t)=>{for(var i in t)Ki(e,i,{get:t[i],enumerable:!0})},N={};Qi(N,{assign:()=>Wi,colors:()=>G,createStringInterpolator:()=>vt,skipAnimation:()=>ci,to:()=>ui,willAdvance:()=>yt});function tt(){}var Gi=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),c={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function B(e,t){if(c.arr(e)){if(!c.arr(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return e===t}var S=(e,t)=>e.forEach(t);function q(e,t,i){if(c.arr(e)){for(let s=0;s<e.length;s++)t.call(i,e[s],`${s}`);return}for(const s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s)}var R=e=>c.und(e)?[]:c.arr(e)?e:[e];function ce(e,t){if(e.size){const i=Array.from(e);e.clear(),S(i,t)}}var ue=(e,...t)=>ce(e,i=>i(...t)),gt=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),vt,ui,G=null,ci=!1,yt=tt,Wi=e=>{e.to&&(ui=e.to),e.now&&(_.now=e.now),e.colors!==void 0&&(G=e.colors),e.skipAnimation!=null&&(ci=e.skipAnimation),e.createStringInterpolator&&(vt=e.createStringInterpolator),e.requestAnimationFrame&&_.use(e.requestAnimationFrame),e.batchedUpdates&&(_.batchedUpdates=e.batchedUpdates),e.willAdvance&&(yt=e.willAdvance),e.frameLoop&&(_.frameLoop=e.frameLoop)},le=new Set,U=[],Ge=[],Re=0,Me={get idle(){return!le.size&&!U.length},start(e){Re>e.priority?(le.add(e),_.onStart(Hi)):(li(e),_(it))},advance:it,sort(e){if(Re)_.onFrame(()=>Me.sort(e));else{const t=U.indexOf(e);~t&&(U.splice(t,1),fi(e))}},clear(){U=[],le.clear()}};function Hi(){le.forEach(li),le.clear(),_(it)}function li(e){U.includes(e)||fi(e)}function fi(e){U.splice(Yi(U,t=>t.priority>e.priority),0,e)}function it(e){const t=Ge;for(let i=0;i<U.length;i++){const s=U[i];Re=s.priority,s.idle||(yt(s),s.advance(e),s.idle||t.push(s))}return Re=0,Ge=U,Ge.length=0,U=t,U.length>0}function Yi(e,t){const i=e.findIndex(t);return i<0?e.length:i}var Xi={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},j="[-+]?\\d*\\.?\\d+",De=j+"%";function je(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Zi=new RegExp("rgb"+je(j,j,j)),Ji=new RegExp("rgba"+je(j,j,j,j)),es=new RegExp("hsl"+je(j,De,De)),ts=new RegExp("hsla"+je(j,De,De,j)),is=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ss=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,rs=/^#([0-9a-fA-F]{6})$/,ns=/^#([0-9a-fA-F]{8})$/;function os(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=rs.exec(e))?parseInt(t[1]+"ff",16)>>>0:G&&G[e]!==void 0?G[e]:(t=Zi.exec(e))?(Z(t[1])<<24|Z(t[2])<<16|Z(t[3])<<8|255)>>>0:(t=Ji.exec(e))?(Z(t[1])<<24|Z(t[2])<<16|Z(t[3])<<8|Et(t[4]))>>>0:(t=is.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ns.exec(e))?parseInt(t[1],16)>>>0:(t=ss.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=es.exec(e))?(kt(xt(t[1]),Ee(t[2]),Ee(t[3]))|255)>>>0:(t=ts.exec(e))?(kt(xt(t[1]),Ee(t[2]),Ee(t[3]))|Et(t[4]))>>>0:null}function We(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function kt(e,t,i){const s=i<.5?i*(1+t):i+t-i*t,r=2*i-s,n=We(r,s,e+1/3),o=We(r,s,e),a=We(r,s,e-1/3);return Math.round(n*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Z(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function xt(e){return(parseFloat(e)%360+360)%360/360}function Et(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Ee(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function It(e){let t=os(e);if(t===null)return e;t=t||0;const i=(t&4278190080)>>>24,s=(t&16711680)>>>16,r=(t&65280)>>>8,n=(t&255)/255;return`rgba(${i}, ${s}, ${r}, ${n})`}var he=(e,t,i)=>{if(c.fun(e))return e;if(c.arr(e))return he({range:e,output:t,extrapolate:i});if(c.str(e.output[0]))return vt(e);const s=e,r=s.output,n=s.range||[0,1],o=s.extrapolateLeft||s.extrapolate||"extend",a=s.extrapolateRight||s.extrapolate||"extend",f=s.easing||(u=>u);return u=>{const l=us(u,n);return as(u,n[l],n[l+1],r[l],r[l+1],f,o,a,s.map)}};function as(e,t,i,s,r,n,o,a,f){let u=f?f(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>i){if(a==="identity")return u;a==="clamp"&&(u=i)}return s===r?s:t===i?e<=t?s:r:(t===-1/0?u=-u:i===1/0?u=u-t:u=(u-t)/(i-t),u=n(u),s===-1/0?u=-u:r===1/0?u=u+s:u=u*(r-s)+s,u)}function us(e,t){for(var i=1;i<t.length-1&&!(t[i]>=e);++i);return i-1}var cs={linear:e=>e},pe=Symbol.for("FluidValue.get"),ie=Symbol.for("FluidValue.observers"),V=e=>!!(e&&e[pe]),O=e=>e&&e[pe]?e[pe]():e,Ct=e=>e[ie]||null;function ls(e,t){e.eventObserved?e.eventObserved(t):e(t)}function me(e,t){const i=e[ie];i&&i.forEach(s=>{ls(s,t)})}var di=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");fs(this,e)}},fs=(e,t)=>hi(e,pe,t);function se(e,t){if(e[pe]){let i=e[ie];i||hi(e,ie,i=new Set),i.has(t)||(i.add(t),e.observerAdded&&e.observerAdded(i.size,t))}return t}function ge(e,t){const i=e[ie];if(i&&i.has(t)){const s=i.size-1;s?i.delete(t):e[ie]=null,e.observerRemoved&&e.observerRemoved(s,t)}}var hi=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),Ie=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ds=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ot=new RegExp(`(${Ie.source})(%|[a-z]+)`,"i"),hs=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ne=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,pi=e=>{const[t,i]=ps(e);if(!t||gt())return e;const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(s)return s.trim();if(i&&i.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(i);return r||e}else{if(i&&Ne.test(i))return pi(i);if(i)return i}return e},ps=e=>{const t=Ne.exec(e);if(!t)return[,];const[,i,s]=t;return[i,s]},He,ms=(e,t,i,s,r)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(s)}, ${r})`,mi=e=>{He||(He=G?new RegExp(`(${Object.keys(G).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(n=>O(n).replace(Ne,pi).replace(ds,It).replace(He,It)),i=t.map(n=>n.match(Ie).map(Number)),r=i[0].map((n,o)=>i.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(n=>he({...e,output:n}));return n=>{var f;const o=!Ot.test(t[0])&&((f=t.find(u=>Ot.test(u)))==null?void 0:f.replace(Ie,""));let a=0;return t[0].replace(Ie,()=>`${r[a++](n)}${o||""}`).replace(hs,ms)}},_t="react-spring: ",gi=e=>{const t=e;let i=!1;if(typeof t!="function")throw new TypeError(`${_t}once requires a function parameter`);return(...s)=>{i||(t(...s),i=!0)}},gs=gi(console.warn);function vs(){gs(`${_t}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ys=gi(console.warn);function _s(){ys(`${_t}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function $e(e){return c.str(e)&&(e[0]=="#"||/\d/.test(e)||!gt()&&Ne.test(e)||e in(G||{}))}var bt=gt()?P.useEffect:P.useLayoutEffect,bs=()=>{const e=P.useRef(!1);return bt(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function vi(){const e=P.useState()[1],t=bs();return()=>{t.current&&e(Math.random())}}function ws(e,t){const[i]=P.useState(()=>({inputs:t,result:e()})),s=P.useRef(),r=s.current;let n=r;return n?t&&n.inputs&&Ss(t,n.inputs)||(n={inputs:t,result:e()}):n=i,P.useEffect(()=>{s.current=n,r==i&&(i.inputs=i.result=void 0)},[n]),n.result}function Ss(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var yi=e=>P.useEffect(e,As),As=[];function Rt(e){const t=P.useRef();return P.useEffect(()=>{t.current=e}),t.current}var ve=Symbol.for("Animated:node"),Ps=e=>!!e&&e[ve]===e,$=e=>e&&e[ve],wt=(e,t)=>Gi(e,ve,t),qe=e=>e&&e[ve]&&e[ve].getPayload(),_i=class{constructor(){wt(this,this)}getPayload(){return this.payload||[]}},Pe=class extends _i{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,c.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Pe(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return c.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,c.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},ye=class extends Pe{constructor(e){super(0),this._string=null,this._toString=he({output:[e,e]})}static create(e){return new ye(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(c.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=he({output:[this.getValue(),e]})),this._value=0,super.reset()}},Ve={dependencies:null},Be=class extends _i{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return q(this.source,(i,s)=>{Ps(i)?t[s]=i.getValue(e):V(i)?t[s]=O(i):e||(t[s]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&S(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return q(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Ve.dependencies&&V(e)&&Ve.dependencies.add(e);const t=qe(e);t&&S(t,i=>this.add(i))}},bi=class extends Be{constructor(e){super(e)}static create(e){return new bi(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,s)=>i.setValue(e[s])).some(Boolean):(super.setValue(e.map(Ts)),!0)}};function Ts(e){return($e(e)?ye:Pe).create(e)}function st(e){const t=$(e);return t?t.constructor:c.arr(e)?bi:$e(e)?ye:Pe}var Dt=(e,t)=>{const i=!c.fun(e)||e.prototype&&e.prototype.isReactComponent;return P.forwardRef((s,r)=>{const n=P.useRef(null),o=i&&P.useCallback(v=>{n.current=Es(r,v)},[r]),[a,f]=xs(s,t),u=vi(),l=()=>{const v=n.current;if(i&&!v)return;(v?t.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&u()},d=new ks(l,f),h=P.useRef();bt(()=>(h.current=d,S(f,v=>se(v,d)),()=>{h.current&&(S(h.current.deps,v=>ge(v,h.current)),_.cancel(h.current.update))})),P.useEffect(l,[]),yi(()=>()=>{const v=h.current;S(v.deps,g=>ge(g,v))});const m=t.getComponentProps(a.getValue());return P.createElement(e,{...m,ref:o})})},ks=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&_.write(this.update)}};function xs(e,t){const i=new Set;return Ve.dependencies=i,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Be(e),Ve.dependencies=null,[e,i]}function Es(e,t){return e&&(c.fun(e)?e(t):e.current=t),t}var Vt=Symbol.for("AnimatedComponent"),Is=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=r=>new Be(r),getComponentProps:s=r=>r}={})=>{const r={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:s},n=o=>{const a=Ft(o)||"Anonymous";return c.str(o)?o=n[o]||(n[o]=Dt(o,r)):o=o[Vt]||(o[Vt]=Dt(o,r)),o.displayName=`Animated(${a})`,o};return q(e,(o,a)=>{c.arr(e)&&(a=Ft(o)),n[a]=n(o)}),{animated:n}},Ft=e=>c.str(e)?e:e&&c.str(e.displayName)?e.displayName:c.fun(e)&&e.name||null;function W(e,...t){return c.fun(e)?e(...t):e}var fe=(e,t)=>e===!0||!!(t&&e&&(c.fun(e)?e(t):R(e).includes(t))),wi=(e,t)=>c.obj(e)?t&&e[t]:e,Si=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Cs=e=>e,St=(e,t=Cs)=>{let i=Os;e.default&&e.default!==!0&&(e=e.default,i=Object.keys(e));const s={};for(const r of i){const n=t(e[r],r);c.und(n)||(s[r]=n)}return s},Os=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Rs={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ds(e){const t={};let i=0;if(q(e,(s,r)=>{Rs[r]||(t[r]=s,i++)}),i)return t}function Ai(e){const t=Ds(e);if(t){const i={to:t};return q(e,(s,r)=>r in t||(i[r]=s)),i}return{...e}}function _e(e){return e=O(e),c.arr(e)?e.map(_e):$e(e)?N.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Vs(e){for(const t in e)return!0;return!1}function rt(e){return c.fun(e)||c.arr(e)&&c.obj(e[0])}function Fs(e,t){var i;(i=e.ref)==null||i.delete(e),t==null||t.delete(e)}function Us(e,t){var i;t&&e.ref!==t&&((i=e.ref)==null||i.delete(e),t.add(e),e.ref=t)}var Ls={default:{tension:170,friction:26}},nt={...Ls.default,mass:1,damping:1,easing:cs.linear,clamp:!1},Ms=class{constructor(){this.velocity=0,Object.assign(this,nt)}};function js(e,t,i){i&&(i={...i},Ut(i,t),t={...i,...t}),Ut(e,t),Object.assign(e,t);for(const o in nt)e[o]==null&&(e[o]=nt[o]);let{frequency:s,damping:r}=e;const{mass:n}=e;return c.und(s)||(s<.01&&(s=.01),r<0&&(r=0),e.tension=Math.pow(2*Math.PI/s,2)*n,e.friction=4*Math.PI*r*n/s),e}function Ut(e,t){if(!c.und(t.decay))e.duration=void 0;else{const i=!c.und(t.tension)||!c.und(t.friction);(i||!c.und(t.frequency)||!c.und(t.damping)||!c.und(t.mass))&&(e.duration=void 0,e.decay=void 0),i&&(e.frequency=void 0)}}var Lt=[],Ns=class{constructor(){this.changed=!1,this.values=Lt,this.toValues=null,this.fromValues=Lt,this.config=new Ms,this.immediate=!1}};function Pi(e,{key:t,props:i,defaultProps:s,state:r,actions:n}){return new Promise((o,a)=>{let f,u,l=fe(i.cancel??(s==null?void 0:s.cancel),t);if(l)m();else{c.und(i.pause)||(r.paused=fe(i.pause,t));let v=s==null?void 0:s.pause;v!==!0&&(v=r.paused||fe(v,t)),f=W(i.delay||0,t),v?(r.resumeQueue.add(h),n.pause()):(n.resume(),h())}function d(){r.resumeQueue.add(h),r.timeouts.delete(u),u.cancel(),f=u.time-_.now()}function h(){f>0&&!N.skipAnimation?(r.delayed=!0,u=_.setTimeout(m,f),r.pauseQueue.add(d),r.timeouts.add(u)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(u),e<=(r.cancelId||0)&&(l=!0);try{n.start({...i,callId:e,cancel:l},o)}catch(v){a(v)}}})}var At=(e,t)=>t.length==1?t[0]:t.some(i=>i.cancelled)?te(e.get()):t.every(i=>i.noop)?Ti(e.get()):M(e.get(),t.every(i=>i.finished)),Ti=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),M=(e,t,i=!1)=>({value:e,finished:t,cancelled:i}),te=e=>({value:e,cancelled:!0,finished:!1});function ki(e,t,i,s){const{callId:r,parentId:n,onRest:o}=t,{asyncTo:a,promise:f}=i;return!n&&e===a&&!t.reset?f:i.promise=(async()=>{i.asyncId=r,i.asyncTo=e;const u=St(t,(b,p)=>p==="onRest"?void 0:b);let l,d;const h=new Promise((b,p)=>(l=b,d=p)),m=b=>{const p=r<=(i.cancelId||0)&&te(s)||r!==i.asyncId&&M(s,!1);if(p)throw b.result=p,d(b),b},v=(b,p)=>{const w=new Mt,y=new jt;return(async()=>{if(N.skipAnimation)throw be(i),y.result=M(s,!1),d(y),y;m(w);const A=c.obj(b)?{...b}:{...p,to:b};A.parentId=r,q(u,(E,I)=>{c.und(A[I])&&(A[I]=E)});const k=await s.start(A);return m(w),i.paused&&await new Promise(E=>{i.resumeQueue.add(E)}),k})()};let g;if(N.skipAnimation)return be(i),M(s,!1);try{let b;c.arr(e)?b=(async p=>{for(const w of p)await v(w)})(e):b=Promise.resolve(e(v,s.stop.bind(s))),await Promise.all([b.then(l),h]),g=M(s.get(),!0,!1)}catch(b){if(b instanceof Mt)g=b.result;else if(b instanceof jt)g=b.result;else throw b}finally{r==i.asyncId&&(i.asyncId=n,i.asyncTo=n?a:void 0,i.promise=n?f:void 0)}return c.fun(o)&&_.batchedUpdates(()=>{o(g,s,s.item)}),g})()}function be(e,t){ce(e.timeouts,i=>i.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Mt=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},jt=class extends Error{constructor(){super("SkipAnimationSignal")}},ot=e=>e instanceof Pt,$s=1,Pt=class extends di{constructor(){super(...arguments),this.id=$s++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=$(this);return e&&e.getValue()}to(...e){return N.to(this,e)}interpolate(...e){return vs(),N.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){me(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Me.sort(this),me(this,{type:"priority",parent:this,priority:e})}},H=Symbol.for("SpringPhase"),xi=1,at=2,ut=4,Ye=e=>(e[H]&xi)>0,z=e=>(e[H]&at)>0,ne=e=>(e[H]&ut)>0,Nt=(e,t)=>t?e[H]|=at|xi:e[H]&=~at,$t=(e,t)=>t?e[H]|=ut:e[H]&=~ut,qs=class extends Pt{constructor(e,t){if(super(),this.animation=new Ns,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!c.und(e)||!c.und(t)){const i=c.obj(e)?{...e}:{...t,from:e};c.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(z(this)||this._state.asyncTo)||ne(this)}get goal(){return O(this.animation.to)}get velocity(){const e=$(this);return e instanceof Pe?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Ye(this)}get isAnimating(){return z(this)}get isPaused(){return ne(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const s=this.animation;let{toValues:r}=s;const{config:n}=s,o=qe(s.to);!o&&V(s.to)&&(r=R(O(s.to))),s.values.forEach((u,l)=>{if(u.done)return;const d=u.constructor==ye?1:o?o[l].lastPosition:r[l];let h=s.immediate,m=d;if(!h){if(m=u.lastPosition,n.tension<=0){u.done=!0;return}let v=u.elapsedTime+=e;const g=s.fromValues[l],b=u.v0!=null?u.v0:u.v0=c.arr(n.velocity)?n.velocity[l]:n.velocity;let p;const w=n.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(c.und(n.duration))if(n.decay){const y=n.decay===!0?.998:n.decay,A=Math.exp(-(1-y)*v);m=g+b/(1-y)*(1-A),h=Math.abs(u.lastPosition-m)<=w,p=b*A}else{p=u.lastVelocity==null?b:u.lastVelocity;const y=n.restVelocity||w/10,A=n.clamp?0:n.bounce,k=!c.und(A),E=g==d?u.v0>0:g<d;let I,xe=!1;const D=1,re=Math.ceil(e/D);for(let L=0;L<re&&(I=Math.abs(p)>y,!(!I&&(h=Math.abs(d-m)<=w,h)));++L){k&&(xe=m==d||m>d==E,xe&&(p=-p*A,m=d));const Y=-n.tension*1e-6*(m-d),X=-n.friction*.001*p,qi=(Y+X)/n.mass;p=p+qi*D,m=m+p*D}}else{let y=1;n.duration>0&&(this._memoizedDuration!==n.duration&&(this._memoizedDuration=n.duration,u.durationProgress>0&&(u.elapsedTime=n.duration*u.durationProgress,v=u.elapsedTime+=e)),y=(n.progress||0)+v/this._memoizedDuration,y=y>1?1:y<0?0:y,u.durationProgress=y),m=g+n.easing(y)*(d-g),p=(m-u.lastPosition)/e,h=y==1}u.lastVelocity=p,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[l].done&&(h=!1),h?u.done=!0:t=!1,u.setValue(m,n.round)&&(i=!0)});const a=$(this),f=a.getValue();if(t){const u=O(s.to);(f!==u||i)&&!n.decay?(a.setValue(u),this._onChange(u)):i&&n.decay&&this._onChange(f),this._stop()}else i&&this._onChange(f)}set(e){return _.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(z(this)){const{to:e,config:t}=this.animation;_.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return c.und(e)?(i=this.queue||[],this.queue=[]):i=[c.obj(e)?e:{...t,to:e}],Promise.all(i.map(s=>this._update(s))).then(s=>At(this,s))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),be(this._state,e&&this._lastCallId),_.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:s}=e;i=c.obj(i)?i[t]:i,(i==null||rt(i))&&(i=void 0),s=c.obj(s)?s[t]:s,s==null&&(s=void 0);const r={to:i,from:s};return Ye(this)||(e.reverse&&([i,s]=[s,i]),s=O(s),c.und(s)?$(this)||this._set(i):this._set(s)),r}_update({...e},t){const{key:i,defaultProps:s}=this;e.default&&Object.assign(s,St(e,(o,a)=>/^on/.test(a)?wi(o,i):o)),Bt(this,e,"onProps"),ae(this,"onProps",e,this);const r=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const n=this._state;return Pi(++this._lastCallId,{key:i,props:e,defaultProps:s,state:n,actions:{pause:()=>{ne(this)||($t(this,!0),ue(n.pauseQueue),ae(this,"onPause",M(this,oe(this,this.animation.to)),this))},resume:()=>{ne(this)&&($t(this,!1),z(this)&&this._resume(),ue(n.resumeQueue),ae(this,"onResume",M(this,oe(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const a=Ei(e);if(a)return this._update(a,!0)}return o})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(te(this));const s=!c.und(e.to),r=!c.und(e.from);if(s||r)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(te(this));const{key:n,defaultProps:o,animation:a}=this,{to:f,from:u}=a;let{to:l=f,from:d=u}=e;r&&!s&&(!t.default||c.und(l))&&(l=d),t.reverse&&([l,d]=[d,l]);const h=!B(d,u);h&&(a.from=d),d=O(d);const m=!B(l,f);m&&this._focus(l);const v=rt(t.to),{config:g}=a,{decay:b,velocity:p}=g;(s||r)&&(g.velocity=0),t.config&&!v&&js(g,W(t.config,n),t.config!==o.config?W(o.config,n):void 0);let w=$(this);if(!w||c.und(l))return i(M(this,!0));const y=c.und(t.reset)?r&&!t.default:!c.und(d)&&fe(t.reset,n),A=y?d:this.get(),k=_e(l),E=c.num(k)||c.arr(k)||$e(k),I=!v&&(!E||fe(o.immediate||t.immediate,n));if(m){const L=st(l);if(L!==w.constructor)if(I)w=this._set(k);else throw Error(`Cannot animate between ${w.constructor.name} and ${L.name}, as the "to" prop suggests`)}const xe=w.constructor;let D=V(l),re=!1;if(!D){const L=y||!Ye(this)&&h;(m||L)&&(re=B(_e(A),k),D=!re),(!B(a.immediate,I)&&!I||!B(g.decay,b)||!B(g.velocity,p))&&(D=!0)}if(re&&z(this)&&(a.changed&&!y?D=!0:D||this._stop(f)),!v&&((D||V(f))&&(a.values=w.getPayload(),a.toValues=V(l)?null:xe==ye?[1]:R(k)),a.immediate!=I&&(a.immediate=I,!I&&!y&&this._set(f)),D)){const{onRest:L}=a;S(zs,X=>Bt(this,t,X));const Y=M(this,oe(this,f));ue(this._pendingCalls,Y),this._pendingCalls.add(i),a.changed&&_.batchedUpdates(()=>{var X;a.changed=!y,L==null||L(Y,this),y?W(o.onRest,Y):(X=a.onStart)==null||X.call(a,Y,this)})}y&&this._set(A),v?i(ki(t.to,t,this._state,this)):D?this._start():z(this)&&!m?this._pendingCalls.add(i):i(Ti(A))}_focus(e){const t=this.animation;e!==t.to&&(Ct(this)&&this._detach(),t.to=e,Ct(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;V(t)&&(se(t,this),ot(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;V(e)&&ge(e,this)}_set(e,t=!0){const i=O(e);if(!c.und(i)){const s=$(this);if(!s||!B(i,s.getValue())){const r=st(i);!s||s.constructor!=r?wt(this,r.create(i)):s.setValue(i),s&&_.batchedUpdates(()=>{this._onChange(i,t)})}}return $(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,ae(this,"onStart",M(this,oe(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),W(this.animation.onChange,e,this)),W(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;$(this).reset(O(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),z(this)||(Nt(this,!0),ne(this)||this._resume())}_resume(){N.skipAnimation?this.finish():Me.start(this)}_stop(e,t){if(z(this)){Nt(this,!1);const i=this.animation;S(i.values,r=>{r.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),me(this,{type:"idle",parent:this});const s=t?te(this.get()):M(this.get(),oe(this,e??i.to));ue(this._pendingCalls,s),i.changed&&(i.changed=!1,ae(this,"onRest",s,this))}}};function oe(e,t){const i=_e(t),s=_e(e.get());return B(s,i)}function Ei(e,t=e.loop,i=e.to){const s=W(t);if(s){const r=s!==!0&&Ai(s),n=(r||e).reverse,o=!r||r.reset;return we({...e,loop:t,default:!1,pause:void 0,to:!n||rt(i)?i:void 0,from:o?e.from:void 0,reset:o,...r})}}function we(e){const{to:t,from:i}=e=Ai(e),s=new Set;return c.obj(t)&&qt(t,s),c.obj(i)&&qt(i,s),e.keys=s.size?Array.from(s):null,e}function Bs(e){const t=we(e);return c.und(t.default)&&(t.default=St(t)),t}function qt(e,t){q(e,(i,s)=>i!=null&&t.add(s))}var zs=["onStart","onRest","onChange","onPause","onResume"];function Bt(e,t,i){e.animation[i]=t[i]!==Si(t,i)?wi(t[i],e.key):void 0}function ae(e,t,...i){var s,r,n,o;(r=(s=e.animation)[t])==null||r.call(s,...i),(o=(n=e.defaultProps)[t])==null||o.call(n,...i)}var Ks=["onStart","onChange","onRest"],Qs=1,Gs=class{constructor(t,i){this.id=Qs++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),i&&(this._flush=i),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((i,s)=>t[s]=i.get()),t}set(t){for(const i in t){const s=t[i];c.und(s)||this.springs[i].set(s)}}update(t){return t&&this.queue.push(we(t)),this}start(t){let{queue:i}=this;return t?i=R(t).map(we):this.queue=[],this._flush?this._flush(this,i):(Di(this,i),ct(this,i))}stop(t,i){if(t!==!!t&&(i=t),i){const s=this.springs;S(R(i),r=>s[r].stop(!!t))}else be(this._state,this._lastAsyncId),this.each(s=>s.stop(!!t));return this}pause(t){if(c.und(t))this.start({pause:!0});else{const i=this.springs;S(R(t),s=>i[s].pause())}return this}resume(t){if(c.und(t))this.start({pause:!1});else{const i=this.springs;S(R(t),s=>i[s].resume())}return this}each(t){q(this.springs,t)}_onFrame(){const{onStart:t,onChange:i,onRest:s}=this._events,r=this._active.size>0,n=this._changed.size>0;(r&&!this._started||n&&!this._started)&&(this._started=!0,ce(t,([f,u])=>{u.value=this.get(),f(u,this,this._item)}));const o=!r&&this._started,a=n||o&&s.size?this.get():null;n&&i.size&&ce(i,([f,u])=>{u.value=a,f(u,this,this._item)}),o&&(this._started=!1,ce(s,([f,u])=>{u.value=a,f(u,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;_.onFrame(this._onFrame)}};function ct(e,t){return Promise.all(t.map(i=>Ii(e,i))).then(i=>At(e,i))}async function Ii(e,t,i){const{keys:s,to:r,from:n,loop:o,onRest:a,onResolve:f}=t,u=c.obj(t.default)&&t.default;o&&(t.loop=!1),r===!1&&(t.to=null),n===!1&&(t.from=null);const l=c.arr(r)||c.fun(r)?r:void 0;l?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):S(Ks,g=>{const b=t[g];if(c.fun(b)){const p=e._events[g];t[g]=({finished:w,cancelled:y})=>{const A=p.get(b);A?(w||(A.finished=!1),y&&(A.cancelled=!0)):p.set(b,{value:null,finished:w||!1,cancelled:y||!1})},u&&(u[g]=t[g])}});const d=e._state;t.pause===!d.paused?(d.paused=t.pause,ue(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const h=(s||Object.keys(e.springs)).map(g=>e.springs[g].start(t)),m=t.cancel===!0||Si(t,"cancel")===!0;(l||m&&d.asyncId)&&h.push(Pi(++e._lastAsyncId,{props:t,state:d,actions:{pause:tt,resume:tt,start(g,b){m?(be(d,e._lastAsyncId),b(te(e))):(g.onRest=a,b(ki(l,g,d,e)))}}})),d.paused&&await new Promise(g=>{d.resumeQueue.add(g)});const v=At(e,await Promise.all(h));if(o&&v.finished&&!(i&&v.noop)){const g=Ei(t,o,r);if(g)return Di(e,[g]),Ii(e,g,!0)}return f&&_.batchedUpdates(()=>f(v,e,e.item)),v}function zt(e,t){const i={...e.springs};return t&&S(R(t),s=>{c.und(s.keys)&&(s=we(s)),c.obj(s.to)||(s={...s,to:void 0}),Ri(i,s,r=>Oi(r))}),Ci(e,i),i}function Ci(e,t){q(t,(i,s)=>{e.springs[s]||(e.springs[s]=i,se(i,e))})}function Oi(e,t){const i=new qs;return i.key=e,t&&se(i,t),i}function Ri(e,t,i){t.keys&&S(t.keys,s=>{(e[s]||(e[s]=i(s)))._prepareNode(t)})}function Di(e,t){S(t,i=>{Ri(e.springs,i,s=>Oi(s,e))})}var ze=({children:e,...t})=>{const i=P.useContext(Fe),s=t.pause||!!i.pause,r=t.immediate||!!i.immediate;t=ws(()=>({pause:s,immediate:r}),[s,r]);const{Provider:n}=Fe;return P.createElement(n,{value:t},e)},Fe=Ws(ze,{});ze.Provider=Fe.Provider;ze.Consumer=Fe.Consumer;function Ws(e,t){return Object.assign(e,P.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var Hs=()=>{const e=[],t=function(s){_s();const r=[];return S(e,(n,o)=>{if(c.und(s))r.push(n.start());else{const a=i(s,n,o);a&&r.push(n.start(a))}}),r};t.current=e,t.add=function(s){e.includes(s)||e.push(s)},t.delete=function(s){const r=e.indexOf(s);~r&&e.splice(r,1)},t.pause=function(){return S(e,s=>s.pause(...arguments)),this},t.resume=function(){return S(e,s=>s.resume(...arguments)),this},t.set=function(s){S(e,(r,n)=>{const o=c.fun(s)?s(n,r):s;o&&r.set(o)})},t.start=function(s){const r=[];return S(e,(n,o)=>{if(c.und(s))r.push(n.start());else{const a=this._getProps(s,n,o);a&&r.push(n.start(a))}}),r},t.stop=function(){return S(e,s=>s.stop(...arguments)),this},t.update=function(s){return S(e,(r,n)=>r.update(this._getProps(s,r,n))),this};const i=function(s,r,n){return c.fun(s)?s(n,r):s};return t._getProps=i,t};function Ys(e,t,i){const s=c.fun(t)&&t;s&&!i&&(i=[]);const r=P.useMemo(()=>s||arguments.length==3?Hs():void 0,[]),n=P.useRef(0),o=vi(),a=P.useMemo(()=>({ctrls:[],queue:[],flush(p,w){const y=zt(p,w);return n.current>0&&!a.queue.length&&!Object.keys(y).some(k=>!p.springs[k])?ct(p,w):new Promise(k=>{Ci(p,y),a.queue.push(()=>{k(ct(p,w))}),o()})}}),[]),f=P.useRef([...a.ctrls]),u=[],l=Rt(e)||0;P.useMemo(()=>{S(f.current.slice(e,l),p=>{Fs(p,r),p.stop(!0)}),f.current.length=e,d(l,e)},[e]),P.useMemo(()=>{d(0,Math.min(l,e))},i);function d(p,w){for(let y=p;y<w;y++){const A=f.current[y]||(f.current[y]=new Gs(null,a.flush)),k=s?s(y,A):t[y];k&&(u[y]=Bs(k))}}const h=f.current.map((p,w)=>zt(p,u[w])),m=P.useContext(ze),v=Rt(m),g=m!==v&&Vs(m);bt(()=>{n.current++,a.ctrls=f.current;const{queue:p}=a;p.length&&(a.queue=[],S(p,w=>w())),S(f.current,(w,y)=>{r==null||r.add(w),g&&w.start({default:m});const A=u[y];A&&(Us(w,A.ref),w.ref?w.queue.push(A):w.start(A))})}),yi(()=>()=>{S(a.ctrls,p=>p.stop(!0))});const b=h.map(p=>({...p}));return r?[b,r]:b}function rn(e,t){const i=c.fun(e),[[s],r]=Ys(1,i?e:[e],i?[]:t);return i||arguments.length==2?[s,r]:s}var Xs=class extends Pt{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=he(...t);const i=this._get(),s=st(i);wt(this,s.create(i))}advance(e){const t=this._get(),i=this.get();B(t,i)||($(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Kt(this._active)&&Xe(this)}_get(){const e=c.arr(this.source)?this.source.map(O):R(O(this.source));return this.calc(...e)}_start(){this.idle&&!Kt(this._active)&&(this.idle=!1,S(qe(this),e=>{e.done=!1}),N.skipAnimation?(_.batchedUpdates(()=>this.advance()),Xe(this)):Me.start(this))}_attach(){let e=1;S(R(this.source),t=>{V(t)&&se(t,this),ot(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){S(R(this.source),e=>{V(e)&&ge(e,this)}),this._active.clear(),Xe(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=R(this.source).reduce((t,i)=>Math.max(t,(ot(i)?i.priority:0)+1),0))}};function Zs(e){return e.idle!==!1}function Kt(e){return!e.size||Array.from(e).every(Zs)}function Xe(e){e.idle||(e.idle=!0,S(qe(e),t=>{t.done=!0}),me(e,{type:"idle",parent:e}))}N.assign({createStringInterpolator:mi,to:(e,t)=>new Xs(e,t)});var Vi=/^--/;function Js(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Vi.test(e)&&!(de.hasOwnProperty(e)&&de[e])?t+"px":(""+t).trim()}var Qt={};function er(e,t){if(!e.nodeType||!e.setAttribute)return!1;const i=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:s,style:r,children:n,scrollTop:o,scrollLeft:a,viewBox:f,...u}=t,l=Object.values(u),d=Object.keys(u).map(h=>i||e.hasAttribute(h)?h:Qt[h]||(Qt[h]=h.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));n!==void 0&&(e.textContent=n);for(const h in r)if(r.hasOwnProperty(h)){const m=Js(h,r[h]);Vi.test(h)?e.style.setProperty(h,m):e.style[h]=m}d.forEach((h,m)=>{e.setAttribute(h,l[m])}),s!==void 0&&(e.className=s),o!==void 0&&(e.scrollTop=o),a!==void 0&&(e.scrollLeft=a),f!==void 0&&e.setAttribute("viewBox",f)}var de={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tr=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),ir=["Webkit","Ms","Moz","O"];de=Object.keys(de).reduce((e,t)=>(ir.forEach(i=>e[tr(i,t)]=e[t]),e),de);var sr=/^(matrix|translate|scale|rotate|skew)/,rr=/^(translate)/,nr=/^(rotate|skew)/,Ze=(e,t)=>c.num(e)&&e!==0?e+t:e,Ce=(e,t)=>c.arr(e)?e.every(i=>Ce(i,t)):c.num(e)?e===t:parseFloat(e)===t,or=class extends Be{constructor({x:e,y:t,z:i,...s}){const r=[],n=[];(e||t||i)&&(r.push([e||0,t||0,i||0]),n.push(o=>[`translate3d(${o.map(a=>Ze(a,"px")).join(",")})`,Ce(o,0)])),q(s,(o,a)=>{if(a==="transform")r.push([o||""]),n.push(f=>[f,f===""]);else if(sr.test(a)){if(delete s[a],c.und(o))return;const f=rr.test(a)?"px":nr.test(a)?"deg":"";r.push(R(o)),n.push(a==="rotate3d"?([u,l,d,h])=>[`rotate3d(${u},${l},${d},${Ze(h,f)})`,Ce(h,0)]:u=>[`${a}(${u.map(l=>Ze(l,f)).join(",")})`,Ce(u,a.startsWith("scale")?1:0)])}}),r.length&&(s.transform=new ar(r,n)),super(s)}},ar=class extends di{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return S(this.inputs,(i,s)=>{const r=O(i[0]),[n,o]=this.transforms[s](c.arr(r)?r:i.map(O));e+=" "+n,t=t&&o}),t?"none":e}observerAdded(e){e==1&&S(this.inputs,t=>S(t,i=>V(i)&&se(i,this)))}observerRemoved(e){e==0&&S(this.inputs,t=>S(t,i=>V(i)&&ge(i,this)))}eventObserved(e){e.type=="change"&&(this._value=null),me(this,e)}},ur=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];N.assign({batchedUpdates:Bi.unstable_batchedUpdates,createStringInterpolator:mi,colors:Xi});var cr=Is(ur,{applyAnimatedValues:er,createAnimatedStyle:e=>new or(e),getComponentProps:({scrollTop:e,scrollLeft:t,...i})=>i}),nn=cr.animated;function lr(e,t,i){return Math.max(t,Math.min(e,i))}const x={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function Gt(e,t,i){return t===0||Math.abs(t)===1/0?Math.pow(e,i*5):e*t*i/(t+i*e)}function Wt(e,t,i,s=.15){return s===0?lr(e,t,i):e<t?-Gt(t-e,i-t,s)+t:e>i?+Gt(e-i,i-t,s)+i:e}function fr(e,[t,i],[s,r]){const[[n,o],[a,f]]=e;return[Wt(t,n,o,s),Wt(i,a,f,r)]}function dr(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hr(e){var t=dr(e,"string");return typeof t=="symbol"?t:String(t)}function C(e,t,i){return t=hr(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ht(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),i.push.apply(i,s)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ht(Object(i),!0).forEach(function(s){C(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ht(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}const Fi={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Yt(e){return e?e[0].toUpperCase()+e.slice(1):""}const pr=["enter","leave"];function mr(e=!1,t){return e&&!pr.includes(t)}function gr(e,t="",i=!1){const s=Fi[e],r=s&&s[t]||t;return"on"+Yt(e)+Yt(r)+(mr(i,r)?"Capture":"")}const vr=["gotpointercapture","lostpointercapture"];function yr(e){let t=e.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const s=vr.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(s);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:i}}function _r(e,t=""){const i=Fi[e],s=i&&i[t]||t;return e+s}function Ke(e){return"touches"in e}function Ui(e){return Ke(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function br(e){return Array.from(e.touches).filter(t=>{var i,s;return t.target===e.currentTarget||((i=e.currentTarget)===null||i===void 0||(s=i.contains)===null||s===void 0?void 0:s.call(i,t.target))})}function wr(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function Li(e){return Ke(e)?wr(e)[0]:e}function Sr(e){return br(e).map(t=>t.identifier)}function Je(e){const t=Li(e);return Ke(e)?t.identifier:t.pointerId}function Xt(e){const t=Li(e);return[t.clientX,t.clientY]}function Ar(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:i,altKey:s,metaKey:r,ctrlKey:n}=e;Object.assign(t,{shiftKey:i,altKey:s,metaKey:r,ctrlKey:n})}return t}function Ue(e,...t){return typeof e=="function"?e(...t):e}function Pr(){}function Tr(...e){return e.length===0?Pr:e.length===1?e[0]:function(){let t;for(const i of e)t=i.apply(this,arguments)||t;return t}}function Zt(e,t){return Object.assign({},t,e||{})}const kr=32;class xr{constructor(t,i,s){this.ctrl=t,this.args=i,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:i,ingKey:s,args:r}=this;i[s]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=r,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const i=this.state,s=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=t.target,i.currentTarget=t.currentTarget,i.lastOffset=s.from?Ue(s.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=t.timeStamp)}computeValues(t){const i=this.state;i._values=t,i.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:i,config:s,shared:r}=this;i.args=this.args;let n=0;if(t&&(i.event=t,s.preventDefault&&t.cancelable&&i.event.preventDefault(),i.type=t.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,Ar(t)),r.down=r.pressed=r.buttons%2===1||r.touches>0,n=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const E=i._delta.map(Math.abs);x.addTo(i._distance,E)}this.axisIntent&&this.axisIntent(t);const[o,a]=i._movement,[f,u]=s.threshold,{_step:l,values:d}=i;if(s.hasCustomTransform?(l[0]===!1&&(l[0]=Math.abs(o)>=f&&d[0]),l[1]===!1&&(l[1]=Math.abs(a)>=u&&d[1])):(l[0]===!1&&(l[0]=Math.abs(o)>=f&&Math.sign(o)*f),l[1]===!1&&(l[1]=Math.abs(a)>=u&&Math.sign(a)*u)),i.intentional=l[0]!==!1||l[1]!==!1,!i.intentional)return;const h=[0,0];if(s.hasCustomTransform){const[E,I]=d;h[0]=l[0]!==!1?E-l[0]:0,h[1]=l[1]!==!1?I-l[1]:0}else h[0]=l[0]!==!1?o-l[0]:0,h[1]=l[1]!==!1?a-l[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(h);const m=i.offset,v=i._active&&!i._blocked||i.active;v&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=r[this.ingKey]=i._active,t&&(i.first&&("bounds"in s&&(i._bounds=Ue(s.bounds,i)),this.setup&&this.setup()),i.movement=h,this.computeOffset()));const[g,b]=i.offset,[[p,w],[y,A]]=i._bounds;i.overflow=[g<p?-1:g>w?1:0,b<y?-1:b>A?1:0],i._movementBound[0]=i.overflow[0]?i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]:!1,i._movementBound[1]=i.overflow[1]?i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]:!1;const k=i._active?s.rubberband||[0,0]:[0,0];if(i.offset=fr(i._bounds,i.offset,k),i.delta=x.sub(i.offset,m),this.computeMovement(),v&&(!i.last||n>kr)){i.delta=x.sub(i.offset,m);const E=i.delta.map(Math.abs);x.addTo(i.distance,E),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&n>0&&(i.velocity=[E[0]/n,E[1]/n],i.timeDelta=n)}}emit(){const t=this.state,i=this.shared,s=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!s.triggerAllEvents)return;const r=this.handler(T(T(T({},i),t),{},{[this.aliasKey]:t.values}));r!==void 0&&(t.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Er([e,t],i){const s=Math.abs(e),r=Math.abs(t);if(s>r&&s>i)return"x";if(r>s&&r>i)return"y"}class Ir extends xr{constructor(...t){super(...t),C(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=x.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=x.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const i=this.state,s=this.config;if(!i.axis&&t){const r=typeof s.axisThreshold=="object"?s.axisThreshold[Ui(t)]:s.axisThreshold;i.axis=Er(i._movement,r)}i._blocked=(s.lockDirection||!!s.axis)&&!i.axis||!!s.axis&&s.axis!==i.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const Cr=e=>e,Jt=.15,Tt={enabled(e=!0){return e},eventOptions(e,t,i){return T(T({},i.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Jt,Jt];case!1:return[0,0];default:return x.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return x.toVector(e)},transform(e,t,i){const s=e||i.shared.transform;this.hasCustomTransform=!!s;{const r=s||Cr;return n=>{const o=r(n);return(!isFinite(o[0])||!isFinite(o[1]))&&console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${o[0]},${[1]}]`),o}}},threshold(e){return x.toVector(e,0)}};Object.assign(Tt,{domTarget(e){if(e!==void 0)throw Error("[@use-gesture]: `domTarget` option has been renamed to `target`.");return NaN},lockDirection(e){if(e!==void 0)throw Error("[@use-gesture]: `lockDirection` option has been merged with `axis`. Use it as in `{ axis: 'lock' }`");return NaN},initial(e){if(e!==void 0)throw Error("[@use-gesture]: `initial` option has been renamed to `from`.");return NaN}});const Or=0,Te=T(T({},Tt),{},{axis(e,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(e=Or){return e},bounds(e={}){if(typeof e=="function")return n=>Te.bounds(e(n));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:i=1/0,top:s=-1/0,bottom:r=1/0}=e;return[[t,i],[s,r]]}}),ei={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class Rr extends Ir{constructor(...t){super(...t),C(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const i=t._bounds.getBoundingClientRect(),s=t.currentTarget.getBoundingClientRect(),r={left:i.left-s.left+t.offset[0],right:i.right-s.right+t.offset[0],top:i.top-s.top+t.offset[1],bottom:i.bottom-s.bottom+t.offset[1]};t._bounds=Te.bounds(r)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const i=this.config,s=this.state;if(t.buttons!=null&&(Array.isArray(i.pointerButtons)?!i.pointerButtons.includes(t.buttons):i.pointerButtons!==-1&&i.pointerButtons!==t.buttons))return;const r=this.ctrl.setEventIds(t);i.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(r&&r.size>1&&s._pointerActive)&&(this.start(t),this.setupPointer(t),s._pointerId=Je(t),s._pointerActive=!0,this.computeValues(Xt(t)),this.computeInitial(),i.preventScrollAxis&&Ui(t)!=="mouse"?(s._active=!1,this.setupScrollPrevention(t)):i.delay>0?(this.setupDelayTrigger(t),i.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const i=this.state;i._active=!0,i._preventScroll=!0,i._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const i=this.state,s=this.config;if(!i._pointerActive)return;const r=Je(t);if(i._pointerId!==void 0&&r!==i._pointerId)return;const n=Xt(t);if(document.pointerLockElement===t.target?i._delta=[t.movementX,t.movementY]:(i._delta=x.sub(n,i._values),this.computeValues(n)),x.addTo(i._movement,i._delta),this.compute(t),i._delayed&&i.intentional){this.timeoutStore.remove("dragDelay"),i.active=!1,this.startPointerDrag(t);return}if(s.preventScrollAxis&&!i._preventScroll)if(i.axis)if(i.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){i._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{console.warn("[@use-gesture]: If you see this message, it's likely that you're using an outdated version of `@react-three/fiber`. \n\nPlease upgrade to the latest version.")}const i=this.state,s=this.config;if(!i._active||!i._pointerActive)return;const r=Je(t);if(i._pointerId!==void 0&&r!==i._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[n,o]=i._distance;if(i.tap=n<=s.tapsThreshold&&o<=s.tapsThreshold,i.tap&&s.filterTaps)i._force=!0;else{const[a,f]=i._delta,[u,l]=i._movement,[d,h]=s.swipe.velocity,[m,v]=s.swipe.distance,g=s.swipe.duration;if(i.elapsedTime<g){const b=Math.abs(a/i.timeDelta),p=Math.abs(f/i.timeDelta);b>d&&Math.abs(u)>m&&(i.swipe[0]=Math.sign(a)),p>h&&Math.abs(l)>v&&(i.swipe[1]=Math.sign(f))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const i=this.config,s=i.device;try{if(s==="pointer"&&i.preventScrollDelay===void 0){const r="uv"in t?t.sourceEvent.currentTarget:t.currentTarget;window.getComputedStyle(r).touchAction==="auto"&&console.warn("[@use-gesture]: The drag target has its `touch-action` style property set to `auto`. It is recommended to add `touch-action: 'none'` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\n\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.",r)}}catch{}i.pointerLock&&t.currentTarget.requestPointerLock(),i.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Dr(t);const i=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",i),this.eventStore.add(this.sharedConfig.window,"touch","cancel",i),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const i=ei[t.key];if(i){const s=this.state,r=t.shiftKey?10:t.altKey?.1:1;this.start(t),s._delta=i(this.config.keyboardDisplacement,r),s._keyboardActive=!0,x.addTo(s._movement,s._delta),this.compute(t),this.emit()}}keyUp(t){t.key in ei&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const i=this.config.device;t(i,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(i,"change",this.pointerMove.bind(this)),t(i,"end",this.pointerUp.bind(this)),t(i,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Dr(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const ke=typeof window<"u"&&window.document&&window.document.createElement;function Mi(){return ke&&"ontouchstart"in window}function Vr(){return Mi()||ke&&window.navigator.maxTouchPoints>1}function Fr(){return ke&&"onpointerdown"in window}function Ur(){return ke&&"exitPointerLock"in window.document}function Lr(){try{return"constructor"in GestureEvent}catch{return!1}}const F={isBrowser:ke,gesture:Lr(),touch:Mi(),touchscreen:Vr(),pointer:Fr(),pointerLock:Ur()},Mr=250,jr=180,Nr=.5,$r=50,qr=250,Br=10,ti={mouse:0,touch:0,pen:8},ji=T(T({},Te),{},{device(e,t,{pointer:{touch:i=!1,lock:s=!1,mouse:r=!1}={}}){return this.pointerLock=s&&F.pointerLock,F.touch&&i?"touch":this.pointerLock?"mouse":F.pointer&&!r?"pointer":F.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&e?Mr:void 0,!(!F.touchscreen||i===!1))return e||(i!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:s=1,keys:r=!0}={}}){return this.pointerButtons=s,this.keys=r,!this.pointerLock&&this.device==="pointer"&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:s=3,axis:r=void 0}){const n=x.toVector(e,i?s:r?1:0);return this.filterTaps=i,this.tapsThreshold=s,n},swipe({velocity:e=Nr,distance:t=$r,duration:i=qr}={}){return{velocity:this.transform(x.toVector(e)),distance:this.transform(x.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return jr;case!1:return 0;default:return e}},axisThreshold(e){return e?T(T({},ti),e):ti},keyboardDisplacement(e=Br){return e}});Object.assign(ji,{useTouch(e){if(e!==void 0)throw Error("[@use-gesture]: `useTouch` option has been renamed to `pointer.touch`. Use it as in `{ pointer: { touch: true } }`.");return NaN},experimental_preventWindowScrollY(e){if(e!==void 0)throw Error("[@use-gesture]: `experimental_preventWindowScrollY` option has been renamed to `preventScroll`.");return NaN},swipeVelocity(e){if(e!==void 0)throw Error("[@use-gesture]: `swipeVelocity` option has been renamed to `swipe.velocity`. Use it as in `{ swipe: { velocity: 0.5 } }`.");return NaN},swipeDistance(e){if(e!==void 0)throw Error("[@use-gesture]: `swipeDistance` option has been renamed to `swipe.distance`. Use it as in `{ swipe: { distance: 50 } }`.");return NaN},swipeDuration(e){if(e!==void 0)throw Error("[@use-gesture]: `swipeDuration` option has been renamed to `swipe.duration`. Use it as in `{ swipe: { duration: 250 } }`.");return NaN}});T(T({},Tt),{},{device(e,t,{shared:i,pointer:{touch:s=!1}={}}){if(i.target&&!F.touch&&F.gesture)return"gesture";if(F.touch&&s)return"touch";if(F.touchscreen){if(F.pointer)return"pointer";if(F.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:s={}}){const r=o=>{const a=Zt(Ue(i,o),{min:-1/0,max:1/0});return[a.min,a.max]},n=o=>{const a=Zt(Ue(s,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof i!="function"&&typeof s!="function"?[r(),n()]:o=>[r(o),n(o)]},threshold(e,t,i){return this.lockDirection=i.axis==="lock",x.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});T(T({},Te),{},{mouseOnly:(e=!0)=>e});T(T({},Te),{},{mouseOnly:(e=!0)=>e});const Ni=new Map,lt=new Map;function zr(e){Ni.set(e.key,e.engine),lt.set(e.key,e.resolver)}const Kr={key:"drag",engine:Rr,resolver:ji};function Qr(e,t){if(e==null)return{};var i={},s=Object.keys(e),r,n;for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}function Gr(e,t){if(e==null)return{};var i=Qr(e,t),s,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}const Wr={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=F.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},Hr=["target","eventOptions","window","enabled","transform"];function Oe(e={},t){const i={};for(const[s,r]of Object.entries(t))switch(typeof r){case"function":{const n=r.call(i,e[s],s,e);Number.isNaN(n)||(i[s]=n)}break;case"object":i[s]=Oe(e[s],r);break;case"boolean":r&&(i[s]=e[s]);break}return i}function Yr(e,t,i={}){const s=e,{target:r,eventOptions:n,window:o,enabled:a,transform:f}=s,u=Gr(s,Hr);if(i.shared=Oe({target:r,eventOptions:n,window:o,enabled:a,transform:f},Wr),t){const l=lt.get(t);i[t]=Oe(T({shared:i.shared},u),l)}else for(const l in u){const d=lt.get(l);if(d)i[l]=Oe(T({shared:i.shared},u[l]),d);else if(!["drag","pinch","scroll","wheel","move","hover"].includes(l)){if(l==="domTarget")throw Error("[@use-gesture]: `domTarget` option has been renamed to `target`.");console.warn(`[@use-gesture]: Unknown config key \`${l}\` was used. Please read the documentation for further information.`)}}return i}class $i{constructor(t,i){C(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=i}add(t,i,s,r,n){const o=this._listeners,a=_r(i,s),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=T(T({},f),n);t.addEventListener(a,r,u);const l=()=>{t.removeEventListener(a,r,u),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class Xr{constructor(){C(this,"_timeouts",new Map)}add(t,i,s=140,...r){this.remove(t),this._timeouts.set(t,window.setTimeout(i,s,...r))}remove(t){const i=this._timeouts.get(t);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class Zr{constructor(t){C(this,"gestures",new Set),C(this,"_targetEventStore",new $i(this)),C(this,"gestureEventStores",{}),C(this,"gestureTimeoutStores",{}),C(this,"handlers",{}),C(this,"config",{}),C(this,"pointerIds",new Set),C(this,"touchIds",new Set),C(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Jr(this,t)}setEventIds(t){if(Ke(t))return this.touchIds=new Set(Sr(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,i){this.handlers=t,this.nativeHandlers=i}applyConfig(t,i){this.config=Yr(t,i,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const i=this.config.shared,s={};let r;if(!(i.target&&(r=i.target(),!r))){if(i.enabled){for(const o of this.gestures){const a=this.config[o],f=ii(s,a.eventOptions,!!r);if(a.enabled){const u=Ni.get(o);new u(this,t,o).bind(f)}}const n=ii(s,i.eventOptions,!!r);for(const o in this.nativeHandlers)n(o,"",a=>this.nativeHandlers[o](T(T({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const n in s)s[n]=Tr(...s[n]);if(!r)return s;for(const n in s){const{device:o,capture:a,passive:f}=yr(n);this._targetEventStore.add(r,o,"",s[n],{capture:a,passive:f})}}}}function J(e,t){e.gestures.add(t),e.gestureEventStores[t]=new $i(e,t),e.gestureTimeoutStores[t]=new Xr}function Jr(e,t){t.drag&&J(e,"drag"),t.wheel&&J(e,"wheel"),t.scroll&&J(e,"scroll"),t.move&&J(e,"move"),t.pinch&&J(e,"pinch"),t.hover&&J(e,"hover")}const ii=(e,t,i)=>(s,r,n,o={},a=!1)=>{var f,u;const l=(f=o.capture)!==null&&f!==void 0?f:t.capture,d=(u=o.passive)!==null&&u!==void 0?u:t.passive;let h=a?s:gr(s,r,l);i&&d&&(h+="Passive"),e[h]=e[h]||[],e[h].push(n)};function en(e,t={},i,s){const r=Qe.useMemo(()=>new Zr(e),[]);if(r.applyHandlers(e,s),r.applyConfig(t,i),Qe.useEffect(r.effect.bind(r)),Qe.useEffect(()=>r.clean.bind(r),[]),t.target===void 0)return r.bind.bind(r)}function on(e,t){return zr(Kr),en({drag:e},t||{},"drag")}export{nn as a,on as b,rn as u};
