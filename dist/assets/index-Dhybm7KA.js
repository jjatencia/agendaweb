import{r as f,a as pn,b as Ua}from"./vendor-BnAv-nsF.js";import{u as Aa,B as bn,R as Nn,a as Ge,N as Je}from"./router-DOm5wjR5.js";import{C as Ke,c as Sa,o as gn,s as ja,a as xn}from"./utils-Dq7FJXLK.js";import{a as sa,u as Pa,b as vn}from"./ui-DJNPBiSa.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();var Ta={exports:{}},Qe={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=f,n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),k=Symbol.iterator,R="@@iterator";function I(t){if(t===null||typeof t!="object")return null;var p=k&&t[k]||t[R];return typeof p=="function"?p:null}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function g(t){{for(var p=arguments.length,N=new Array(p>1?p-1:0),h=1;h<p;h++)N[h-1]=arguments[h];S("error",t,N)}}function S(t,p,N){{var h=j.ReactDebugCurrentFrame,U=h.getStackAddendum();U!==""&&(p+="%s",N=N.concat([U]));var T=N.map(function(D){return String(D)});T.unshift("Warning: "+p),Function.prototype.apply.call(console[t],console,T)}}var _=!1,ee=!1,H=!1,me=!1,ae=!1,X;X=Symbol.for("react.module.reference");function fe(t){return!!(typeof t=="string"||typeof t=="function"||t===r||t===i||ae||t===o||t===m||t===c||me||t===y||_||ee||H||typeof t=="object"&&t!==null&&(t.$$typeof===x||t.$$typeof===b||t.$$typeof===u||t.$$typeof===d||t.$$typeof===l||t.$$typeof===X||t.getModuleId!==void 0))}function je(t,p,N){var h=t.displayName;if(h)return h;var U=p.displayName||p.name||"";return U!==""?N+"("+U+")":N}function pe(t){return t.displayName||"Context"}function G(t){if(t==null)return null;if(typeof t.tag=="number"&&g("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case r:return"Fragment";case s:return"Portal";case i:return"Profiler";case o:return"StrictMode";case m:return"Suspense";case c:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d:var p=t;return pe(p)+".Consumer";case u:var N=t;return pe(N._context)+".Provider";case l:return je(t,t.render,"ForwardRef");case b:var h=t.displayName||null;return h!==null?h:G(t.type)||"Memo";case x:{var U=t,T=U._payload,D=U._init;try{return G(D(T))}catch{return null}}}return null}var K=Object.assign,v=0,P,w,F,Z,A,Y,he;function re(){}re.__reactDisabledLog=!0;function ce(){{if(v===0){P=console.log,w=console.info,F=console.warn,Z=console.error,A=console.group,Y=console.groupCollapsed,he=console.groupEnd;var t={configurable:!0,enumerable:!0,value:re,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}v++}}function Ie(){{if(v--,v===0){var t={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:K({},t,{value:P}),info:K({},t,{value:w}),warn:K({},t,{value:F}),error:K({},t,{value:Z}),group:K({},t,{value:A}),groupCollapsed:K({},t,{value:Y}),groupEnd:K({},t,{value:he})})}v<0&&g("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Oe=j.ReactCurrentDispatcher,Fe;function Ve(t,p,N){{if(Fe===void 0)try{throw Error()}catch(U){var h=U.stack.trim().match(/\n( *(at )?)/);Fe=h&&h[1]||""}return`
`+Fe+t}}var Le=!1,Ce;{var Ha=typeof WeakMap=="function"?WeakMap:Map;Ce=new Ha}function ia(t,p){if(!t||Le)return"";{var N=Ce.get(t);if(N!==void 0)return N}var h;Le=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var T;T=Oe.current,Oe.current=null,ce();try{if(p){var D=function(){throw Error()};if(Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(J){h=J}Reflect.construct(t,[],D)}else{try{D.call()}catch(J){h=J}t.call(D.prototype)}}else{try{throw Error()}catch(J){h=J}t()}}catch(J){if(J&&h&&typeof J.stack=="string"){for(var E=J.stack.split(`
`),W=h.stack.split(`
`),M=E.length-1,O=W.length-1;M>=1&&O>=0&&E[M]!==W[O];)O--;for(;M>=1&&O>=0;M--,O--)if(E[M]!==W[O]){if(M!==1||O!==1)do if(M--,O--,O<0||E[M]!==W[O]){var q=`
`+E[M].replace(" at new "," at ");return t.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",t.displayName)),typeof t=="function"&&Ce.set(t,q),q}while(M>=1&&O>=0);break}}}finally{Le=!1,Oe.current=T,Ie(),Error.prepareStackTrace=U}var Ne=t?t.displayName||t.name:"",le=Ne?Ve(Ne):"";return typeof t=="function"&&Ce.set(t,le),le}function Ya(t,p,N){return ia(t,!1)}function Wa(t){var p=t.prototype;return!!(p&&p.isReactComponent)}function Ue(t,p,N){if(t==null)return"";if(typeof t=="function")return ia(t,Wa(t));if(typeof t=="string")return Ve(t);switch(t){case m:return Ve("Suspense");case c:return Ve("SuspenseList")}if(typeof t=="object")switch(t.$$typeof){case l:return Ya(t.render);case b:return Ue(t.type,p,N);case x:{var h=t,U=h._payload,T=h._init;try{return Ue(T(U),p,N)}catch{}}}return""}var ye=Object.prototype.hasOwnProperty,ca={},la=j.ReactDebugCurrentFrame;function Ae(t){if(t){var p=t._owner,N=Ue(t.type,t._source,p?p.type:null);la.setExtraStackFrame(N)}else la.setExtraStackFrame(null)}function Ga(t,p,N,h,U){{var T=Function.call.bind(ye);for(var D in t)if(T(t,D)){var E=void 0;try{if(typeof t[D]!="function"){var W=Error((h||"React class")+": "+N+" type `"+D+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[D]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw W.name="Invariant Violation",W}E=t[D](p,D,h,N,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(M){E=M}E&&!(E instanceof Error)&&(Ae(U),g("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",h||"React class",N,D,typeof E),Ae(null)),E instanceof Error&&!(E.message in ca)&&(ca[E.message]=!0,Ae(U),g("Failed %s type: %s",N,E.message),Ae(null))}}}var Ja=Array.isArray;function $e(t){return Ja(t)}function Ka(t){{var p=typeof Symbol=="function"&&Symbol.toStringTag,N=p&&t[Symbol.toStringTag]||t.constructor.name||"Object";return N}}function Za(t){try{return ua(t),!1}catch{return!0}}function ua(t){return""+t}function da(t){if(Za(t))return g("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ka(t)),ua(t)}var we=j.ReactCurrentOwner,qa={key:!0,ref:!0,__self:!0,__source:!0},ma,fa,ze;ze={};function Xa(t){if(ye.call(t,"ref")){var p=Object.getOwnPropertyDescriptor(t,"ref").get;if(p&&p.isReactWarning)return!1}return t.ref!==void 0}function Qa(t){if(ye.call(t,"key")){var p=Object.getOwnPropertyDescriptor(t,"key").get;if(p&&p.isReactWarning)return!1}return t.key!==void 0}function en(t,p){if(typeof t.ref=="string"&&we.current&&p&&we.current.stateNode!==p){var N=G(we.current.type);ze[N]||(g('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',G(we.current.type),t.ref),ze[N]=!0)}}function an(t,p){{var N=function(){ma||(ma=!0,g("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",p))};N.isReactWarning=!0,Object.defineProperty(t,"key",{get:N,configurable:!0})}}function nn(t,p){{var N=function(){fa||(fa=!0,g("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",p))};N.isReactWarning=!0,Object.defineProperty(t,"ref",{get:N,configurable:!0})}}var sn=function(t,p,N,h,U,T,D){var E={$$typeof:n,type:t,key:p,ref:N,props:D,_owner:T};return E._store={},Object.defineProperty(E._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(E,"_self",{configurable:!1,enumerable:!1,writable:!1,value:h}),Object.defineProperty(E,"_source",{configurable:!1,enumerable:!1,writable:!1,value:U}),Object.freeze&&(Object.freeze(E.props),Object.freeze(E)),E};function tn(t,p,N,h,U){{var T,D={},E=null,W=null;N!==void 0&&(da(N),E=""+N),Qa(p)&&(da(p.key),E=""+p.key),Xa(p)&&(W=p.ref,en(p,U));for(T in p)ye.call(p,T)&&!qa.hasOwnProperty(T)&&(D[T]=p[T]);if(t&&t.defaultProps){var M=t.defaultProps;for(T in M)D[T]===void 0&&(D[T]=M[T])}if(E||W){var O=typeof t=="function"?t.displayName||t.name||"Unknown":t;E&&an(D,O),W&&nn(D,O)}return sn(t,E,W,U,h,we.current,D)}}var Be=j.ReactCurrentOwner,pa=j.ReactDebugCurrentFrame;function be(t){if(t){var p=t._owner,N=Ue(t.type,t._source,p?p.type:null);pa.setExtraStackFrame(N)}else pa.setExtraStackFrame(null)}var He;He=!1;function Ye(t){return typeof t=="object"&&t!==null&&t.$$typeof===n}function ba(){{if(Be.current){var t=G(Be.current.type);if(t)return`

Check the render method of \``+t+"`."}return""}}function rn(t){{if(t!==void 0){var p=t.fileName.replace(/^.*[\\\/]/,""),N=t.lineNumber;return`

Check your code at `+p+":"+N+"."}return""}}var Na={};function on(t){{var p=ba();if(!p){var N=typeof t=="string"?t:t.displayName||t.name;N&&(p=`

Check the top-level render call using <`+N+">.")}return p}}function ga(t,p){{if(!t._store||t._store.validated||t.key!=null)return;t._store.validated=!0;var N=on(p);if(Na[N])return;Na[N]=!0;var h="";t&&t._owner&&t._owner!==Be.current&&(h=" It was passed a child from "+G(t._owner.type)+"."),be(t),g('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',N,h),be(null)}}function xa(t,p){{if(typeof t!="object")return;if($e(t))for(var N=0;N<t.length;N++){var h=t[N];Ye(h)&&ga(h,p)}else if(Ye(t))t._store&&(t._store.validated=!0);else if(t){var U=I(t);if(typeof U=="function"&&U!==t.entries)for(var T=U.call(t),D;!(D=T.next()).done;)Ye(D.value)&&ga(D.value,p)}}}function cn(t){{var p=t.type;if(p==null||typeof p=="string")return;var N;if(typeof p=="function")N=p.propTypes;else if(typeof p=="object"&&(p.$$typeof===l||p.$$typeof===b))N=p.propTypes;else return;if(N){var h=G(p);Ga(N,t.props,"prop",h,t)}else if(p.PropTypes!==void 0&&!He){He=!0;var U=G(p);g("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",U||"Unknown")}typeof p.getDefaultProps=="function"&&!p.getDefaultProps.isReactClassApproved&&g("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ln(t){{for(var p=Object.keys(t.props),N=0;N<p.length;N++){var h=p[N];if(h!=="children"&&h!=="key"){be(t),g("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",h),be(null);break}}t.ref!==null&&(be(t),g("Invalid attribute `ref` supplied to `React.Fragment`."),be(null))}}var va={};function un(t,p,N,h,U,T){{var D=fe(t);if(!D){var E="";(t===void 0||typeof t=="object"&&t!==null&&Object.keys(t).length===0)&&(E+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var W=rn(U);W?E+=W:E+=ba();var M;t===null?M="null":$e(t)?M="array":t!==void 0&&t.$$typeof===n?(M="<"+(G(t.type)||"Unknown")+" />",E=" Did you accidentally export a JSX literal instead of a component?"):M=typeof t,g("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",M,E)}var O=tn(t,p,N,U,T);if(O==null)return O;if(D){var q=p.children;if(q!==void 0)if(h)if($e(q)){for(var Ne=0;Ne<q.length;Ne++)xa(q[Ne],t);Object.freeze&&Object.freeze(q)}else g("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else xa(q,t)}if(ye.call(p,"key")){var le=G(t),J=Object.keys(p).filter(function(fn){return fn!=="key"}),We=J.length>0?"{key: someKey, "+J.join(": ..., ")+": ...}":"{key: someKey}";if(!va[le+We]){var mn=J.length>0?"{"+J.join(": ..., ")+": ...}":"{}";g(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,We,le,mn,le),va[le+We]=!0}}return t===r?ln(O):cn(O),O}}var dn=un;Qe.Fragment=r,Qe.jsxDEV=dn})();Ta.exports=Qe;var a=Ta.exports,ka,ha=pn;{var ya=ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ka=function(e,n){ya.usingClientEntryPoint=!0;try{return ha.createRoot(e,n)}finally{ya.usingClientEntryPoint=!1}}}let jn={data:""},hn=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||jn,yn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wn=/\/\*[^]*?\*\/|  +/g,wa=/\n+/g,oe=(e,n)=>{let s="",r="",o="";for(let i in e){let u=e[i];i[0]=="@"?i[1]=="i"?s=i+" "+u+";":r+=i[1]=="f"?oe(u,i):i+"{"+oe(u,i[1]=="k"?"":n)+"}":typeof u=="object"?r+=oe(u,n?n.replace(/([^,])+/g,d=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,d):d?d+" "+l:l)):i):u!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=oe.p?oe.p(i,u):i+":"+u+";")}return s+(n&&o?n+"{"+o+"}":o)+r},ne={},_a=e=>{if(typeof e=="object"){let n="";for(let s in e)n+=s+_a(e[s]);return n}return e},En=(e,n,s,r,o)=>{let i=_a(e),u=ne[i]||(ne[i]=(l=>{let m=0,c=11;for(;m<l.length;)c=101*c+l.charCodeAt(m++)>>>0;return"go"+c})(i));if(!ne[u]){let l=i!==e?e:(m=>{let c,b,x=[{}];for(;c=yn.exec(m.replace(wn,""));)c[4]?x.shift():c[3]?(b=c[3].replace(wa," ").trim(),x.unshift(x[0][b]=x[0][b]||{})):x[0][c[1]]=c[2].replace(wa," ").trim();return x[0]})(e);ne[u]=oe(o?{["@keyframes "+u]:l}:l,s?"":"."+u)}let d=s&&ne.g?ne.g:null;return s&&(ne.g=ne[u]),((l,m,c,b)=>{b?m.data=m.data.replace(b,l):m.data.indexOf(l)===-1&&(m.data=c?l+m.data:m.data+l)})(ne[u],n,r,d),u},Dn=(e,n,s)=>e.reduce((r,o,i)=>{let u=n[i];if(u&&u.call){let d=u(s),l=d&&d.props&&d.props.className||/^go/.test(d)&&d;u=l?"."+l:d&&typeof d=="object"?d.props?"":oe(d,""):d===!1?"":d}return r+o+(u??"")},"");function Re(e){let n=this||{},s=e.call?e(n.p):e;return En(s.unshift?s.raw?Dn(s,[].slice.call(arguments,1),n.p):s.reduce((r,o)=>Object.assign(r,o&&o.call?o(n.p):o),{}):s,hn(n.target),n.g,n.o,n.k)}let Ra,ea,aa;Re.bind({g:1});let te=Re.bind({k:1});function Vn(e,n,s,r){oe.p=n,Ra=e,ea=s,aa=r}function ie(e,n){let s=this||{};return function(){let r=arguments;function o(i,u){let d=Object.assign({},i),l=d.className||o.className;s.p=Object.assign({theme:ea&&ea()},d),s.o=/ *go\d+/.test(l),d.className=Re.apply(s,r)+(l?" "+l:"");let m=e;return e[0]&&(m=d.as||e,delete d.as),aa&&m[0]&&aa(d),Ra(m,d)}return o}}var Cn=e=>typeof e=="function",ke=(e,n)=>Cn(e)?e(n):e,Un=(()=>{let e=0;return()=>(++e).toString()})(),Ma=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");e=!n||n.matches}return e}})(),An=20,ta="default",Ia=(e,n)=>{let{toastLimit:s}=e.settings;switch(n.type){case 0:return{...e,toasts:[n.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(u=>u.id===n.toast.id?{...u,...n.toast}:u)};case 2:let{toast:r}=n;return Ia(e,{type:e.toasts.find(u=>u.id===r.id)?1:0,toast:r});case 3:let{toastId:o}=n;return{...e,toasts:e.toasts.map(u=>u.id===o||o===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(u=>u.id!==n.toastId)};case 5:return{...e,pausedAt:n.time};case 6:let i=n.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+i}))}}},Te=[],Oa={toasts:[],pausedAt:void 0,settings:{toastLimit:An}},Q={},Fa=(e,n=ta)=>{Q[n]=Ia(Q[n]||Oa,e),Te.forEach(([s,r])=>{s===n&&r(Q[n])})},La=e=>Object.keys(Q).forEach(n=>Fa(e,n)),Sn=e=>Object.keys(Q).find(n=>Q[n].toasts.some(s=>s.id===e)),Me=(e=ta)=>n=>{Fa(n,e)},Pn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Tn=(e={},n=ta)=>{let[s,r]=f.useState(Q[n]||Oa),o=f.useRef(Q[n]);f.useEffect(()=>(o.current!==Q[n]&&r(Q[n]),Te.push([n,r]),()=>{let u=Te.findIndex(([d])=>d===n);u>-1&&Te.splice(u,1)}),[n]);let i=s.toasts.map(u=>{var d,l,m;return{...e,...e[u.type],...u,removeDelay:u.removeDelay||((d=e[u.type])==null?void 0:d.removeDelay)||(e==null?void 0:e.removeDelay),duration:u.duration||((l=e[u.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Pn[u.type],style:{...e.style,...(m=e[u.type])==null?void 0:m.style,...u.style}}});return{...s,toasts:i}},kn=(e,n="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||Un()}),De=e=>(n,s)=>{let r=kn(n,e,s);return Me(r.toasterId||Sn(r.id))({type:2,toast:r}),r.id},L=(e,n)=>De("blank")(e,n);L.error=De("error");L.success=De("success");L.loading=De("loading");L.custom=De("custom");L.dismiss=(e,n)=>{let s={type:3,toastId:e};n?Me(n)(s):La(s)};L.dismissAll=e=>L.dismiss(void 0,e);L.remove=(e,n)=>{let s={type:4,toastId:e};n?Me(n)(s):La(s)};L.removeAll=e=>L.remove(void 0,e);L.promise=(e,n,s)=>{let r=L.loading(n.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let i=n.success?ke(n.success,o):void 0;return i?L.success(i,{id:r,...s,...s==null?void 0:s.success}):L.dismiss(r),o}).catch(o=>{let i=n.error?ke(n.error,o):void 0;i?L.error(i,{id:r,...s,...s==null?void 0:s.error}):L.dismiss(r)}),e};var _n=1e3,Rn=(e,n="default")=>{let{toasts:s,pausedAt:r}=Tn(e,n),o=f.useRef(new Map).current,i=f.useCallback((b,x=_n)=>{if(o.has(b))return;let y=setTimeout(()=>{o.delete(b),u({type:4,toastId:b})},x);o.set(b,y)},[]);f.useEffect(()=>{if(r)return;let b=Date.now(),x=s.map(y=>{if(y.duration===1/0)return;let k=(y.duration||0)+y.pauseDuration-(b-y.createdAt);if(k<0){y.visible&&L.dismiss(y.id);return}return setTimeout(()=>L.dismiss(y.id,n),k)});return()=>{x.forEach(y=>y&&clearTimeout(y))}},[s,r,n]);let u=f.useCallback(Me(n),[n]),d=f.useCallback(()=>{u({type:5,time:Date.now()})},[u]),l=f.useCallback((b,x)=>{u({type:1,toast:{id:b,height:x}})},[u]),m=f.useCallback(()=>{r&&u({type:6,time:Date.now()})},[r,u]),c=f.useCallback((b,x)=>{let{reverseOrder:y=!1,gutter:k=8,defaultPosition:R}=x||{},I=s.filter(S=>(S.position||R)===(b.position||R)&&S.height),j=I.findIndex(S=>S.id===b.id),g=I.filter((S,_)=>_<j&&S.visible).length;return I.filter(S=>S.visible).slice(...y?[g+1]:[0,g]).reduce((S,_)=>S+(_.height||0)+k,0)},[s]);return f.useEffect(()=>{s.forEach(b=>{if(b.dismissed)i(b.id,b.removeDelay);else{let x=o.get(b.id);x&&(clearTimeout(x),o.delete(b.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:l,startPause:d,endPause:m,calculateOffset:c}}},Mn=te`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,In=te`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,On=te`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Fn=ie("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Mn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${In} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${On} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ln=te`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$n=ie("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ln} 1s linear infinite;
`,zn=te`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Bn=te`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Hn=ie("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Bn} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Yn=ie("div")`
  position: absolute;
`,Wn=ie("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Gn=te`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Jn=ie("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Gn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Kn=({toast:e})=>{let{icon:n,type:s,iconTheme:r}=e;return n!==void 0?typeof n=="string"?f.createElement(Jn,null,n):n:s==="blank"?null:f.createElement(Wn,null,f.createElement($n,{...r}),s!=="loading"&&f.createElement(Yn,null,s==="error"?f.createElement(Fn,{...r}):f.createElement(Hn,{...r})))},Zn=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qn=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Xn="0%{opacity:0;} 100%{opacity:1;}",Qn="0%{opacity:1;} 100%{opacity:0;}",es=ie("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,as=ie("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ns=(e,n)=>{let s=e.includes("top")?1:-1,[r,o]=Ma()?[Xn,Qn]:[Zn(s),qn(s)];return{animation:n?`${te(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${te(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ss=f.memo(({toast:e,position:n,style:s,children:r})=>{let o=e.height?ns(e.position||n||"top-center",e.visible):{opacity:0},i=f.createElement(Kn,{toast:e}),u=f.createElement(as,{...e.ariaProps},ke(e.message,e));return f.createElement(es,{className:e.className,style:{...o,...s,...e.style}},typeof r=="function"?r({icon:i,message:u}):f.createElement(f.Fragment,null,i,u))});Vn(f.createElement);var ts=({id:e,className:n,style:s,onHeightUpdate:r,children:o})=>{let i=f.useCallback(u=>{if(u){let d=()=>{let l=u.getBoundingClientRect().height;r(e,l)};d(),new MutationObserver(d).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return f.createElement("div",{ref:i,className:n,style:s},o)},rs=(e,n)=>{let s=e.includes("top"),r=s?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ma()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${n*(s?1:-1)}px)`,...r,...o}},os=Re`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Se=16,is=({reverseOrder:e,position:n="top-center",toastOptions:s,gutter:r,children:o,toasterId:i,containerStyle:u,containerClassName:d})=>{let{toasts:l,handlers:m}=Rn(s,i);return f.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Se,left:Se,right:Se,bottom:Se,pointerEvents:"none",...u},className:d,onMouseEnter:m.startPause,onMouseLeave:m.endPause},l.map(c=>{let b=c.position||n,x=m.calculateOffset(c,{reverseOrder:e,gutter:r,defaultPosition:n}),y=rs(b,x);return f.createElement(ts,{id:c.id,key:c.id,onHeightUpdate:m.updateHeight,className:c.visible?os:"",style:y},c.type==="custom"?ke(c.message,c):o?o(c):f.createElement(ss,{toast:c,position:b}))}))},$=L;const $a="https://api.exora.app/api",z={AUTH_TOKEN:"exora_auth_token",USER_DATA:"exora_user_data"},V=e=>{const n=new Date;return n.setDate(n.getDate()+e),new Date(n.getTime()+n.getTimezoneOffset()*6e4).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})},C=e=>{const n=new Date;return n.setDate(n.getDate()+e),n.toISOString().split("T")[0]};V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(0),C(0),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(1),C(1),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2),V(2),C(2);var cs={};const Ea=cs.VITE_ENCRYPTION_KEY||"default-key-should-be-changed";class se{static encrypt(n){try{return Ke.AES.encrypt(n,Ea).toString()}catch{throw console.error("Error al cifrar datos"),new Error("Encryption failed")}}static decrypt(n){try{return Ke.AES.decrypt(n,Ea).toString(Ke.enc.Utf8)}catch{throw console.error("Error al descifrar datos"),new Error("Decryption failed")}}static sanitizeInput(n){return!n||typeof n!="string"?"":n.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}static isValidEmail(n){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)}static isValidAmount(n){return typeof n=="number"&&!isNaN(n)&&n>=0&&n<=999999}static isValidObjectId(n){return/^[0-9a-fA-F]{24}$/.test(n)}static isValidDate(n){const s=new Date(n);return s instanceof Date&&!isNaN(s.getTime())}static generateNonce(){const n=new Uint8Array(16);return crypto.getRandomValues(n),Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}static isValidJWTStructure(n){return n.split(".").length===3}static isTokenExpired(n){try{if(!this.isValidJWTStructure(n))return!0;const s=JSON.parse(atob(n.split(".")[1])),r=Math.floor(Date.now()/1e3);return s.exp&&s.exp<r}catch{return!0}}static sanitizeForLogging(n){const s=["password","token","authorization","x-token","email","telefono"],r={...n},o=(i,u="")=>{if(typeof i!="object"||i===null)return i;if(Array.isArray(i))return i.map((l,m)=>o(l,`${u}[${m}]`));const d={};return Object.keys(i).forEach(l=>{const m=u?`${u}.${l}`:l;s.some(c=>l.toLowerCase().includes(c.toLowerCase()))?d[l]="[REDACTED]":typeof i[l]=="object"?d[l]=o(i[l],m):d[l]=i[l]}),d};return o(r)}static getSecurityHeaders(){return{"X-Content-Type-Options":"nosniff","X-Frame-Options":"DENY","X-XSS-Protection":"1; mode=block","Referrer-Policy":"strict-origin-when-cross-origin"}}}class ge{static setItem(n,s){try{const r=se.encrypt(s);localStorage.setItem(n,r)}catch(r){throw console.error("Error storing secure data"),r}}static getItem(n){try{const s=localStorage.getItem(n);return s?se.decrypt(s):null}catch{return console.error("Error retrieving secure data"),localStorage.removeItem(n),null}}static removeItem(n){localStorage.removeItem(n)}static clear(){localStorage.clear()}}const ls=e=>e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),Ee=e=>{const n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${r}`},us=e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e),ds=e=>{if(!e.pagada)return!1;const n=new Date,s=new Date(e.fecha);return s.setMinutes(s.getMinutes()+15),n>s},ms=(e,n)=>{if(!e.ok)return;const s=e.uid||e.id,r=e.nombre||e.name||n.email.split("@")[0],o=e.email||n.email;if(!(!s||!r))return{_id:s,nombre:r,email:o}};class Da{static async login(n){try{if(!us(n.email))return{ok:!1,msg:"Email inválido"};if(!n.password||n.password.length<1)return{ok:!1,msg:"Password requerido"};const s=await fetch(`${$a}/auth/ext-login`,{method:"POST",headers:{"Content-Type":"application/json",...se.getSecurityHeaders()},body:JSON.stringify({email:se.sanitizeInput(n.email),password:n.password})});if(!s.ok){let i=`Error HTTP ${s.status}`;try{const u=await s.json();i=u.msg||u.message||i}catch{}return{ok:!1,msg:i}}const r=await s.json(),o=ms(r,n);if(r.ok&&r.token)if(se.isValidJWTStructure(r.token))this.setToken(r.token),o&&ge.setItem(z.USER_DATA,JSON.stringify(o));else return{ok:!1,msg:"Token inválido recibido del servidor"};return{ok:r.ok,token:r.token,user:o,msg:r.msg||r.message}}catch{return console.error("Login error"),{ok:!1,msg:"Error de conexión. Verifica tu internet."}}}static setToken(n){if(!(typeof window>"u")){if(!se.isValidJWTStructure(n))throw new Error("Token inválido");ge.setItem(z.AUTH_TOKEN,n)}}static getToken(){if(typeof window>"u")return null;const n=ge.getItem(z.AUTH_TOKEN);return n&&se.isTokenExpired(n)?(this.removeToken(),null):n}static removeToken(){typeof window>"u"||(ge.removeItem(z.AUTH_TOKEN),ge.removeItem(z.USER_DATA))}static isAuthenticated(){const n=this.getToken();return n!==null&&!se.isTokenExpired(n)}static getUserData(){if(typeof window>"u")return null;try{const n=ge.getItem(z.USER_DATA);return n?JSON.parse(n):null}catch{return console.error("Error reading user data"),null}}static logout(){this.removeToken()}}const ra=Sa(e=>({user:null,token:null,isAuthenticated:!1,login:async(n,s)=>{try{const r=await Da.login({email:n,password:s});if(r.ok&&r.token&&r.user){const o={id:r.user._id,name:r.user.nombre,email:r.user.email,role:"profesional"};localStorage.setItem(z.AUTH_TOKEN,r.token),localStorage.setItem(z.USER_DATA,JSON.stringify(o)),e({user:o,token:r.token,isAuthenticated:!0}),$.success(`Bienvenido, ${r.user.nombre}`)}else throw new Error(r.msg||"Error de autenticación")}catch(r){throw console.error("Login error:",r),$.error(r.message||"Error de autenticación"),r}},logout:()=>{Da.logout(),localStorage.removeItem(z.AUTH_TOKEN),localStorage.removeItem(z.USER_DATA),e({user:null,token:null,isAuthenticated:!1}),$.success("Sesión cerrada correctamente")},checkAuth:()=>{const n=localStorage.getItem(z.AUTH_TOKEN),s=localStorage.getItem(z.USER_DATA);if(n&&s)try{const r=JSON.parse(s);if(r!=null&&r.id&&(r!=null&&r.email)){e({user:r,token:n,isAuthenticated:!0});return}}catch{}localStorage.removeItem(z.AUTH_TOKEN),localStorage.removeItem(z.USER_DATA)}})),na=({size:e="md",color:n="var(--exora-primary)"})=>{const s={sm:"w-5 h-5",md:"w-8 h-8",lg:"w-12 h-12"};return a.jsxDEV("div",{className:`inline-block ${s[e]} animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]`,style:{color:n},role:"status",children:a.jsxDEV("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Cargando..."},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/LoadingSpinner.tsx",lineNumber:24,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/LoadingSpinner.tsx",lineNumber:19,columnNumber:5},void 0)},fs=gn({email:ja().email("Email inválido"),password:ja().min(6,"La contraseña debe tener al menos 6 caracteres")}),ps=()=>{const[e,n]=f.useState(""),[s,r]=f.useState(""),[o,i]=f.useState(!1),[u,d]=f.useState({}),l=Aa(),{login:m,isAuthenticated:c,checkAuth:b}=ra();f.useEffect(()=>{b()},[b]),f.useEffect(()=>{c&&l("/dashboard")},[c,l]);const x=f.useCallback(j=>{n(j.target.value)},[]),y=f.useCallback(j=>{r(j.target.value)},[]),k=f.useCallback(()=>{const j=fs.safeParse({email:e,password:s});if(j.success)return d({}),!0;const g={};return j.error.errors.forEach(S=>{S.path[0]==="email"&&(g.email=S.message),S.path[0]==="password"&&(g.password=S.message)}),d(g),!1},[e,s]),R=f.useCallback(async j=>{if(j.preventDefault(),!!k()){i(!0);try{await m(e,s),l("/dashboard")}catch{}finally{i(!1)}}},[e,s,m,l,k]),I=f.useMemo(()=>o,[o]);return a.jsxDEV("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",style:{backgroundColor:"var(--exora-background)"},children:a.jsxDEV("div",{className:"w-full max-w-sm",children:[a.jsxDEV("div",{className:"text-center mb-8",children:[a.jsxDEV("h1",{className:"text-4xl font-bold mb-2",style:{color:"var(--exora-primary)"},children:"Exora"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:87,columnNumber:11},void 0),a.jsxDEV("p",{className:"text-gray-600 text-lg",children:"Gestión de Citas"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:90,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:86,columnNumber:9},void 0),a.jsxDEV("form",{onSubmit:R,className:"space-y-6",children:[a.jsxDEV("div",{children:[a.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:96,columnNumber:13},void 0),a.jsxDEV("input",{id:"email",type:"email",value:e,onChange:x,className:`w-full px-4 py-3 border rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 transition-colors ${u.email?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-exora-primary focus:border-transparent"}`,placeholder:"tu@email.com",disabled:o},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:99,columnNumber:13},void 0),u.email&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:u.email},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:113,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:95,columnNumber:11},void 0),a.jsxDEV("div",{children:[a.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:118,columnNumber:13},void 0),a.jsxDEV("input",{id:"password",type:"password",value:s,onChange:y,className:`w-full px-4 py-3 border rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 transition-colors ${u.password?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-exora-primary focus:border-transparent"}`,placeholder:"••••••••",disabled:I},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:121,columnNumber:13},void 0),u.password&&a.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:u.password},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:135,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:117,columnNumber:11},void 0),a.jsxDEV("button",{type:"submit",disabled:I,className:"w-full py-3 px-4 rounded-lg text-white font-semibold text-lg transition-colors hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",style:{backgroundColor:"var(--exora-primary)"},children:o?a.jsxDEV(na,{size:"sm",color:"white"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:145,columnNumber:26},void 0):"Iniciar Sesión"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:139,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:94,columnNumber:9},void 0),a.jsxDEV("div",{className:"text-center mt-6",children:a.jsxDEV("button",{type:"button",className:"text-sm hover:underline transition-colors",style:{color:"var(--exora-primary)"},onClick:()=>{alert("Funcionalidad de recuperación de contraseña no implementada")},children:"¿Has olvidado tu contraseña?"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:151,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:150,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:84,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Login.tsx",lineNumber:83,columnNumber:5},void 0)},ve=xn.create({baseURL:$a,timeout:1e4,headers:{"Content-Type":"application/json",...se.getSecurityHeaders()}});ve.interceptors.request.use(e=>{var s;const n=localStorage.getItem(z.AUTH_TOKEN);return n&&(e.headers["x-token"]=n),(s=e.url)!=null&&s.includes("ventas")&&(console.log("=== REQUEST DEBUG ==="),console.log("URL:",e.url),console.log("Method:",e.method)),e},e=>Promise.reject(e));ve.interceptors.response.use(e=>e,e=>{var s,r,o,i,u,d,l;const n=((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||((i=(o=e.response)==null?void 0:o.data)==null?void 0:i.msg)||e.message||"Error de conexión";return((u=e.response)==null?void 0:u.status)===401&&(n.includes("token")&&(n.includes("expirado")||n.includes("inválido")||n.includes("válido"))?(console.warn("Token expirado/inválido - eliminando del localStorage"),localStorage.removeItem(z.AUTH_TOKEN),localStorage.removeItem(z.USER_DATA)):console.warn("Error 401 - problema de permisos")),Promise.reject({message:n,status:(d=e.response)==null?void 0:d.status,authError:((l=e.response)==null?void 0:l.status)===401})});class _e{static async getPromocionesEmpresa(n){try{const s=await ve.post("/promociones/empresa",{empresa:n}),r=s.data.promociones||s.data;return Array.isArray(r)?r:[]}catch(s){return console.error("Error obteniendo promociones por empresa:",s),[]}}static async getPromocionById(n,s){try{return(await this.getPromocionesEmpresa(s)).find(o=>o._id===n)||null}catch(r){return console.error("Error buscando promoción por ID:",r),null}}}const B=(e,n="0 0 24 24")=>({size:s=20,...r})=>a.jsxDEV("svg",{width:s,height:s,viewBox:n,fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...r,children:e},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:11,columnNumber:3},void 0),bs=B(a.jsxDEV("path",{d:"M22 16.92V19a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h2.09a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9a16 16 0 006.92 6.92l1.27-.36a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:27,columnNumber:3},void 0)),oa=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:32,columnNumber:5},void 0),a.jsxDEV("line",{x1:"3",y1:"6",x2:"21",y2:"6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:33,columnNumber:5},void 0),a.jsxDEV("path",{d:"M16 10a4 4 0 01-8 0"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:34,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:31,columnNumber:3},void 0)),za=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M3 7h13l-4-4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:40,columnNumber:5},void 0),a.jsxDEV("path",{d:"M21 7l-4 4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:41,columnNumber:5},void 0),a.jsxDEV("path",{d:"M21 17H8l4 4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:42,columnNumber:5},void 0),a.jsxDEV("path",{d:"M3 17l4-4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:43,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:39,columnNumber:3},void 0)),Ba=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:49,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"12",cy:"10",r:"3"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:50,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:48,columnNumber:3},void 0)),Ns=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("line",{x1:"19",y1:"5",x2:"5",y2:"19"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:56,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"6.5",cy:"6.5",r:"2.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:57,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"17.5",cy:"17.5",r:"2.5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:58,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:55,columnNumber:3},void 0)),Va=B(a.jsxDEV("path",{d:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:70,columnNumber:3},void 0)),gs=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:75,columnNumber:5},void 0),a.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:76,columnNumber:5},void 0),a.jsxDEV("path",{d:"M6 12h.01M18 12h.01"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:77,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:74,columnNumber:3},void 0)),xs=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:83,columnNumber:5},void 0),a.jsxDEV("line",{x1:"1",y1:"10",x2:"23",y2:"10"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:84,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:82,columnNumber:3},void 0)),vs=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:90,columnNumber:5},void 0),a.jsxDEV("path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:91,columnNumber:5},void 0),a.jsxDEV("path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:92,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:89,columnNumber:3},void 0)),js=B(a.jsxDEV("polyline",{points:"6,9 12,15 18,9"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:104,columnNumber:3},void 0)),hs=B(a.jsxDEV("polyline",{points:"15,18 9,12 15,6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:108,columnNumber:3},void 0)),ys=B(a.jsxDEV("polyline",{points:"9,18 15,12 9,6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:112,columnNumber:3},void 0)),ws=B(a.jsxDEV("polyline",{points:"20,6 9,17 4,12"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:131,columnNumber:3},void 0)),Es=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:136,columnNumber:5},void 0),a.jsxDEV("polyline",{points:"16,17 21,12 16,7"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:137,columnNumber:5},void 0),a.jsxDEV("line",{x1:"21",y1:"12",x2:"9",y2:"12"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:138,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:135,columnNumber:3},void 0)),Ds=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:144,columnNumber:5},void 0),a.jsxDEV("path",{d:"M8 16h8"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:145,columnNumber:5},void 0),a.jsxDEV("path",{d:"M10 20h4"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:146,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:143,columnNumber:3},void 0)),Vs=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:152,columnNumber:5},void 0),a.jsxDEV("line",{x1:"16",y1:"2",x2:"16",y2:"6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:153,columnNumber:5},void 0),a.jsxDEV("line",{x1:"8",y1:"2",x2:"8",y2:"6"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:154,columnNumber:5},void 0),a.jsxDEV("line",{x1:"3",y1:"10",x2:"21",y2:"10"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:155,columnNumber:5},void 0),a.jsxDEV("line",{x1:"8",y1:"14",x2:"16",y2:"14"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:156,columnNumber:5},void 0),a.jsxDEV("line",{x1:"8",y1:"18",x2:"12",y2:"18"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:157,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:151,columnNumber:3},void 0)),Cs=B(a.jsxDEV(a.Fragment,{children:[a.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:173,columnNumber:5},void 0),a.jsxDEV("polyline",{points:"12,6 12,12 16,14"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:174,columnNumber:5},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/icons.tsx",lineNumber:172,columnNumber:3},void 0)),Ze=({appointment:e,style:n,isActive:s=!1,onClick:r})=>{var m;const o=ds(e);Ua.useEffect(()=>{typeof window<"u"&&/Mobile|Android|iPhone|iPad/.test(navigator.userAgent)&&console.log("Mobile detected - Appointment user data:",{nombre:e.usuario.nombre,saldoMonedero:e.usuario.saldoMonedero,pagada:e.pagada})},[e]),f.useEffect(()=>{e.promocion&&e.promocion.length>0&&(async()=>{console.log("=== PROBANDO APIS DE PROMOCIONES ==="),console.log("IDs de promoción:",e.promocion),console.log(`
--- Probando promociones por empresa ---`);const b=await _e.getPromocionesEmpresa(e.empresa);b.length>0&&console.log("✅ Promociones por empresa:",b)})()},[e.promocion,e.empresa]);const i=f.useMemo(()=>new Date(e.fecha),[e.fecha]),u=f.useMemo(()=>i.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),[i]),d=f.useMemo(()=>i.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[i]),l=f.useMemo(()=>!e.promocion||e.promocion.length===0?[]:e.promocion.map((c,b)=>{let x="Promoción especial";return c==="66945b4a5706bb70baa15bc0"?x="Aleatorio o barbero Junior":c==="66aff43347f5e3f837f20ad7"&&(x="Mañanas"),{key:c||`promo-${b}`,label:x}}),[e.promocion]);return a.jsxDEV(sa.div,{style:{...n,backgroundColor:o?"#f8f9fa":"white",borderRadius:"20px",boxShadow:o?"0 2px 8px rgba(0, 0, 0, 0.04)":"0 4px 15px rgba(0, 0, 0, 0.08)",cursor:o?"default":"pointer",zIndex:s?20:10,width:"90%",maxWidth:"380px",height:"85%",maxHeight:"480px",minHeight:"350px",margin:"0 auto",position:"relative",opacity:o?.6:1,transition:"all 0.3s ease"},onClick:o?void 0:r,children:a.jsxDEV("div",{className:"p-6 h-full flex flex-col overflow-hidden",children:[a.jsxDEV("div",{className:"flex-shrink-0",children:[e.pagada?a.jsxDEV("div",{className:"flex justify-center items-center mb-3",children:a.jsxDEV("span",{className:"text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium",children:"PAGADA"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:128,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:127,columnNumber:13},void 0):a.jsxDEV("div",{className:"flex justify-center items-center mb-3",children:a.jsxDEV("span",{className:"text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:["Saldo: €",(e.usuario.saldoMonedero||0).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:134,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:133,columnNumber:13},void 0),a.jsxDEV("div",{className:"text-center mb-3",children:a.jsxDEV("h2",{className:`text-3xl font-bold leading-tight ${o?"text-gray-500":"text-gray-900"}`,children:[e.usuario.nombre," ",e.usuario.apellidos]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:142,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:141,columnNumber:11},void 0),a.jsxDEV("div",{className:"text-center mb-5",children:a.jsxDEV("div",{className:"text-5xl font-bold leading-none",style:{color:o?"#9ca3af":"var(--exora-primary)"},children:u},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:149,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:148,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:124,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-1 space-y-4 min-h-0",children:[a.jsxDEV("div",{className:`flex items-center space-x-3 ${o?"text-gray-400":"text-gray-700"}`,children:[a.jsxDEV(bs,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:161,columnNumber:13},void 0),a.jsxDEV("a",{href:`tel:${e.usuario.telefono}`,className:`text-base hover:underline ${o?"text-gray-400 pointer-events-none":"text-blue-600 hover:text-blue-800"}`,onClick:c=>c.stopPropagation(),children:e.usuario.telefono},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:162,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:160,columnNumber:11},void 0),a.jsxDEV("div",{className:`flex items-start space-x-3 ${o?"text-gray-400":"text-gray-700"}`,children:[a.jsxDEV(oa,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:172,columnNumber:13},void 0),a.jsxDEV("div",{className:"flex-1",children:a.jsxDEV("div",{className:"text-base font-medium",children:((m=e.servicios[0])==null?void 0:m.nombre)||"Servicio no especificado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:174,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:173,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:171,columnNumber:11},void 0),e.variantes&&e.variantes.length>0&&a.jsxDEV("div",{className:`flex items-start space-x-3 ${o?"text-gray-400":"text-gray-700"}`,children:[a.jsxDEV(za,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:182,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("div",{className:"text-base font-medium",children:"Variante:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:184,columnNumber:17},void 0),a.jsxDEV("div",{className:`text-sm mt-1 ${o?"text-gray-400":"text-gray-600"}`,children:e.variantes.map(c=>c.nombre).join(", ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:185,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:183,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:181,columnNumber:13},void 0),a.jsxDEV("div",{className:`flex items-center space-x-3 ${o?"text-gray-400":"text-gray-700"}`,children:[a.jsxDEV(Ba,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:193,columnNumber:13},void 0),a.jsxDEV("span",{className:"text-base",children:e.sucursal.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:194,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:192,columnNumber:11},void 0),a.jsxDEV("div",{className:`flex items-start space-x-3 ${o?"text-gray-400":"text-gray-700"}`,children:[a.jsxDEV(Ns,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:200,columnNumber:13},void 0),a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("div",{className:"text-base font-medium",children:"Promociones:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:202,columnNumber:15},void 0),e.promocion.length>0?a.jsxDEV("div",{className:`text-sm mt-1 ${o?"text-gray-400":"text-gray-600"}`,children:l.map(({key:c,label:b})=>a.jsxDEV("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md inline-block mr-1 mb-1",children:b},c,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:206,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:204,columnNumber:17},void 0):a.jsxDEV("div",{className:"text-sm text-gray-600 mt-1",children:"No"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:215,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:201,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:199,columnNumber:11},void 0),e.comentarios&&e.comentarios.length>0&&a.jsxDEV("div",{className:"flex items-start space-x-3 text-gray-700 pt-3 border-t border-gray-200 mt-4",children:[a.jsxDEV("div",{className:"flex-shrink-0",children:a.jsxDEV(Va,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:223,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:222,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex-1 min-w-0",children:[a.jsxDEV("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Comentarios:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:226,columnNumber:17},void 0),a.jsxDEV("div",{className:"text-sm text-gray-600 leading-relaxed break-words",children:e.comentarios.map(c=>typeof c=="string"?c:(c==null?void 0:c.texto)||(c==null?void 0:c.comentario)||JSON.stringify(c)).join(" | ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:227,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:225,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:221,columnNumber:13},void 0),e.usuario.comentarios&&e.usuario.comentarios.length>0&&a.jsxDEV("div",{className:"flex items-start space-x-3 text-gray-700 pt-3 border-t border-gray-200 mt-4",children:[a.jsxDEV("div",{className:"flex-shrink-0",children:a.jsxDEV(Va,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:240,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:239,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex-1 min-w-0",children:[a.jsxDEV("div",{className:"text-sm font-medium text-gray-800 mb-2",children:"Comentarios del cliente:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:243,columnNumber:17},void 0),a.jsxDEV("div",{className:"text-sm text-gray-600 leading-relaxed break-words",children:e.usuario.comentarios.map(c=>typeof c=="string"?c:(c==null?void 0:c.texto)||(c==null?void 0:c.comentario)||JSON.stringify(c)).join(" | ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:244,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:242,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:238,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:159,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-shrink-0 pt-3 border-t border-gray-100 text-center",children:a.jsxDEV("div",{className:"text-sm text-gray-500",children:d},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:257,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:256,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:122,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/AppointmentCard.tsx",lineNumber:102,columnNumber:5},void 0)};class Ca{static async getServicios(n){try{return(await ve.post("/servicios/empresa",{empresa:n})).data.servicios||[]}catch(s){throw console.error("Error fetching servicios:",s),s}}static async getVariantes(n){try{return(await ve.post("/variantes/empresa",{empresa:n})).data.variantes||[]}catch(s){throw console.error("Error fetching variantes:",s),s}}static calcularPrecioTotal(n,s){let r=n.precio;return s.forEach(o=>{}),r}}const Us=({appointment:e,onCompletePayment:n})=>{var K;const[s,r]=f.useState(""),[o,i]=f.useState(e.importe),[u,d]=f.useState(0),[l,m]=f.useState(!1),[c,b]=f.useState(!1),[x,y]=f.useState([]),[k,R]=f.useState([]),[I,j]=f.useState([]),[g,S]=f.useState(e.servicios[0]||null),[_,ee]=f.useState(e.variantes||[]),[H,me]=f.useState(e.promocion||[]),[ae,X]=f.useState(e.importe),fe=f.useMemo(()=>new Date(e.fecha),[e.fecha]),je=f.useMemo(()=>fe.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),[fe]);f.useEffect(()=>{(async()=>{if(!e.promocion||e.promocion.length===0){i(e.importe),d(0);return}m(!0);try{const w=(await _e.getPromocionesEmpresa(e.empresa)).filter(A=>e.promocion.includes(A._id));let F=0;w.forEach(A=>{if(A.activo&&A.tipo==="descuento"&&A.destino==="servicio"){if(A.porcentaje!==null&&A.porcentaje!==void 0){const Y=e.importe*(A.porcentaje/100);F+=Y}else if(A.cifra!==void 0&&A.cifra>0){const Y=A.cifra/100;F+=Y}}});const Z=Math.max(0,e.importe-F);i(Z),d(F)}catch(P){console.error("Error calculando descuentos en payment:",P),i(e.importe),d(0)}finally{m(!1)}})()},[e.promocion,e.empresa,e.importe]),f.useEffect(()=>{(async()=>{if(c)try{const[P,w,F]=await Promise.all([Ca.getServicios(e.empresa),Ca.getVariantes(e.empresa),_e.getPromocionesEmpresa(e.empresa)]);y(P),R(w),j(F)}catch(P){console.error("Error cargando datos para edición:",P)}})()},[c,e.empresa]),f.useEffect(()=>{if(!c)return;(async()=>{let P=((g==null?void 0:g.precio)||0)/100,w=0;for(const Z of H){const A=I.find(Y=>Y._id===Z);A&&A.activo&&A.tipo==="descuento"&&A.destino==="servicio"&&(A.porcentaje!==null&&A.porcentaje!==void 0?w+=P*(A.porcentaje/100):A.cifra!==void 0&&A.cifra>0&&(w+=A.cifra/100))}const F=Math.max(0,P-w);X(F),d(w)})()},[g,_,H,I,c]);const pe=f.useMemo(()=>[{id:"Pago en efectivo",name:"Efectivo",icon:gs},{id:"Pago Tarjeta",name:"Tarjeta",icon:xs},{id:"Monedero",name:"Monedero",icon:vs}],[]),G=()=>{var v,P,w,F;if(s&&n){const Z=(g==null?void 0:g._id)!==((v=e.servicios[0])==null?void 0:v._id),A=_.length!==(((P=e.variantes)==null?void 0:P.length)||0)||_.some(re=>{var ce;return!((ce=e.variantes)!=null&&ce.some(Ie=>Ie._id===re._id))}),Y=H.length!==(((w=e.promocion)==null?void 0:w.length)||0)||H.some(re=>{var ce;return!((ce=e.promocion)!=null&&ce.includes(re))})||((F=e.promocion)==null?void 0:F.some(re=>!H.includes(re)));let he;(Z||A||Y)&&(he={...e,servicios:g?[g]:e.servicios,variantes:_,promocion:H,importe:ae}),n(e._id,s,he)}};return a.jsxDEV(sa.div,{style:{backgroundColor:"#FCFFA8",borderRadius:"20px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.15)",width:"90%",maxWidth:"380px",height:"90%",maxHeight:"550px",minHeight:"400px",margin:"0 auto",position:"relative",overflow:"hidden"},children:a.jsxDEV("div",{className:"p-4 h-full flex flex-col relative",children:[a.jsxDEV("div",{className:"flex-shrink-0 text-center mb-4 mt-6",children:[a.jsxDEV("h2",{className:"text-xl font-bold mb-1",style:{color:"#555BF6"},children:e.usuario.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:213,columnNumber:11},void 0),a.jsxDEV("div",{className:"text-base",style:{color:"#555BF6"},children:je},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:216,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:212,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-1 space-y-3 mb-4 overflow-y-auto",children:[a.jsxDEV("div",{className:"flex justify-between items-center",children:[a.jsxDEV("div",{className:"text-base font-medium",style:{color:"#555BF6"},children:c?"Editando servicio":"Servicio reservado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:225,columnNumber:13},void 0),a.jsxDEV("button",{onClick:()=>b(!c),className:"px-3 py-1 rounded-md text-xs font-medium transition-colors",style:{backgroundColor:c?"#E0E7FF":"#D2E9FF",color:"#555BF6"},children:c?"Cancelar":"Editar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:228,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:224,columnNumber:11},void 0),c?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("label",{className:"text-sm font-medium",style:{color:"#555BF6"},children:"Servicio:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:269,columnNumber:17},void 0),a.jsxDEV("select",{value:(g==null?void 0:g._id)||"",onChange:v=>{const P=x.find(w=>w._id===v.target.value);S(P||null)},className:"w-full p-2 border rounded-md text-sm",style:{borderColor:"#555BF6",color:"#555BF6"},children:[a.jsxDEV("option",{value:"",children:"Seleccionar servicio"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:281,columnNumber:19},void 0),x.map(v=>a.jsxDEV("option",{value:v._id,children:[v.nombre," - €",(v.precio/100).toFixed(2)]},v._id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:283,columnNumber:21},void 0))]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:272,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:268,columnNumber:15},void 0),k.length>0&&a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("label",{className:"text-sm font-medium",style:{color:"#555BF6"},children:"Variantes:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:293,columnNumber:19},void 0),a.jsxDEV("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:k.map(v=>a.jsxDEV("label",{className:"flex items-center space-x-2",children:[a.jsxDEV("input",{type:"checkbox",checked:_.some(P=>P._id===v._id),onChange:P=>{P.target.checked?ee([..._,v]):ee(_.filter(w=>w._id!==v._id))},className:"text-sm"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:299,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-sm",style:{color:"#555BF6"},children:v.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:311,columnNumber:25},void 0)]},v._id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:298,columnNumber:23},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:296,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:292,columnNumber:17},void 0),I.length>0&&a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("label",{className:"text-sm font-medium",style:{color:"#555BF6"},children:"Promociones:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:323,columnNumber:19},void 0),a.jsxDEV("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:I.filter(v=>v.activo&&v.tipo==="descuento"&&v.destino==="servicio").map(v=>a.jsxDEV("label",{className:"flex items-center space-x-2",children:[a.jsxDEV("input",{type:"checkbox",checked:H.includes(v._id),onChange:P=>{P.target.checked?me([...H,v._id]):me(H.filter(w=>w!==v._id))},className:"text-sm"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:331,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-sm",style:{color:"#555BF6"},children:[v.titulo||"Promoción",v.porcentaje&&` (-${v.porcentaje}%)`,v.cifra&&` (-€${(v.cifra/100).toFixed(2)})`]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:343,columnNumber:25},void 0)]},v._id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:330,columnNumber:23},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:326,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:322,columnNumber:17},void 0),a.jsxDEV("button",{onClick:()=>{b(!1),i(ae)},className:"w-full py-2 rounded-md text-sm font-medium transition-colors",style:{backgroundColor:"#555BF6",color:"white"},children:"Confirmar cambios"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:355,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:266,columnNumber:13},void 0):a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"flex items-start space-x-3",style:{color:"#555BF6"},children:[a.jsxDEV(oa,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:244,columnNumber:17},void 0),a.jsxDEV("div",{className:"flex-1",children:a.jsxDEV("div",{className:"text-base font-medium",children:(g==null?void 0:g.nombre)||((K=e.servicios[0])==null?void 0:K.nombre)||"Servicio no especificado"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:246,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:245,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:243,columnNumber:15},void 0),(_.length>0||e.variantes&&e.variantes.length>0)&&a.jsxDEV("div",{className:"flex items-start space-x-3",style:{color:"#555BF6"},children:[a.jsxDEV(za,{size:16},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:254,columnNumber:19},void 0),a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("div",{className:"text-base font-medium",children:"Variante:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:256,columnNumber:21},void 0),a.jsxDEV("div",{className:"text-sm mt-1",style:{color:"#555BF6"},children:(_.length>0?_:e.variantes).map(v=>v.nombre).join(", ")},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:257,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:255,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:253,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:242,columnNumber:13},void 0),e.promocion&&e.promocion.length>0&&a.jsxDEV("div",{className:"flex items-start space-x-3",style:{color:"#555BF6"},children:a.jsxDEV("div",{className:"flex-1",children:[a.jsxDEV("div",{className:"text-base font-medium",children:"Promociones:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:376,columnNumber:17},void 0),a.jsxDEV("div",{className:"text-sm mt-1",children:e.promocion.map((v,P)=>{let w="Promoción especial";return v==="66945b4a5706bb70baa15bc0"?w="Aleatorio o barbero Junior":v==="66aff43347f5e3f837f20ad7"&&(w="Mañanas"),a.jsxDEV("span",{className:"inline-block px-2 py-1 rounded-md mr-1 mb-1 text-xs",style:{backgroundColor:"#E0E7FF",color:"#555BF6"},children:w},v||P,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:386,columnNumber:23},void 0)})},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:377,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:375,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:374,columnNumber:13},void 0),a.jsxDEV("div",{className:"rounded-lg p-3 text-center",style:{backgroundColor:"#FAFAB0"},children:[a.jsxDEV("div",{className:"text-base font-medium",style:{color:"#555BF6"},children:c?"Precio estimado":"Total a cobrar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:402,columnNumber:13},void 0),l?a.jsxDEV("div",{className:"text-lg",style:{color:"#555BF6"},children:"Calculando..."},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:406,columnNumber:15},void 0):a.jsxDEV(a.Fragment,{children:u>0||c&&ae!==((g==null?void 0:g.precio)||0)/100?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"text-sm text-gray-600 line-through",children:["€",c?(((g==null?void 0:g.precio)||0)/100).toFixed(2):e.importe.toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:411,columnNumber:21},void 0),a.jsxDEV("div",{className:"text-2xl font-bold",style:{color:"#555BF6"},children:["€",(c?ae:o).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:414,columnNumber:21},void 0),u>0&&a.jsxDEV("div",{className:"text-xs text-red-600",children:["Descuento: -€",u.toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:418,columnNumber:23},void 0),c&&a.jsxDEV("div",{className:"text-xs",style:{color:"#555BF6"},children:"Precio actualizado en tiempo real"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:423,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:410,columnNumber:19},void 0):a.jsxDEV("div",{className:"text-2xl font-bold",style:{color:"#555BF6"},children:["€",(c?ae:e.importe).toFixed(2)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:429,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:408,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:401,columnNumber:11},void 0),a.jsxDEV("div",{className:"space-y-2",children:[a.jsxDEV("div",{className:"text-base font-medium",style:{color:"#555BF6"},children:"Método de pago:"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:439,columnNumber:13},void 0),pe.map(v=>{const P=v.icon;return a.jsxDEV("button",{onClick:()=>r(v.id),className:`w-full p-3 rounded-lg border-2 flex items-center space-x-3 transition-all ${s===v.id?"border-white shadow-md":"border-white/50 hover:opacity-80"}`,style:{backgroundColor:s===v.id?"#FAFAB0":"rgba(250, 250, 176, 0.5)"},children:[a.jsxDEV(P,{size:20,style:{color:"#555BF6"}},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:455,columnNumber:19},void 0),a.jsxDEV("span",{className:"text-base font-medium",style:{color:"#555BF6"},children:v.name},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:456,columnNumber:19},void 0),s===v.id&&a.jsxDEV("div",{className:"ml-auto",children:a.jsxDEV(ws,{size:16,strokeWidth:3,style:{color:"#555BF6"}},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:459,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:458,columnNumber:21},void 0)]},v.id,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:443,columnNumber:17},void 0)})]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:438,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:222,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-shrink-0 space-y-2",children:a.jsxDEV("button",{onClick:G,disabled:!s,className:`w-full py-3 rounded-lg font-bold text-base transition-all ${s?"hover:opacity-90 shadow-lg":"cursor-not-allowed"}`,style:s?{backgroundColor:"#555BF6",color:"white"}:{backgroundColor:"#d1d5db",color:"#6b7280"},children:"Completar Pago"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:470,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:469,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:210,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/PaymentCard.tsx",lineNumber:195,columnNumber:5},void 0)},As=80,Ss=80,Ps=150,Ts=1,ks=1,_s=150,Rs={tension:200,friction:20},Ms={tension:150,friction:20},Pe={x:0,y:0,opacity:1,scale:1,rotate:0},Is=({onSwipeLeft:e,onSwipeRight:n,onSwipeDown:s,disabled:r=!1,isFirst:o=!1,isLast:i=!1})=>{const[{x:u,y:d,opacity:l,scale:m,rotate:c},b]=Pa(()=>({...Pe,config:Rs})),x=()=>{try{b.start(Pe)}catch(j){console.warn("Reset animation error:",j)}},y=j=>o&&!j||i&&j,k=j=>{try{b.start({x:j?-window.innerWidth:window.innerWidth,opacity:0,scale:.9,rotate:j?-15:15,config:Ms}),setTimeout(()=>{try{console.log("Executing swipe:",j?"left":"right"),j?e():n(),console.log("Swipe executed successfully, resetting position..."),setTimeout(()=>{b.set(Pe),console.log("Position reset complete")},50)}catch(g){console.error("Swipe execution error:",g),b.set(Pe)}},Ps)}catch(g){console.error("Swipe animation error:",g),j?e():n()}},R=(j,g)=>{try{const S=Math.min(Math.abs(j)/_s,1),_=Math.sqrt(j*j+g*g);b.start({x:j*Ts,y:g*ks,opacity:Math.max(.85,1-S*.1),scale:Math.max(.95,1-_/1e3*.05),rotate:j/10,immediate:!0})}catch(S){console.warn("Drag feedback error:",S)}};return{bind:vn(({down:j,movement:[g,S]})=>{if(!r)try{if(j)R(g,S);else{const _=Math.abs(g),ee=Math.abs(S);if(ee>_&&ee>Ss&&S>0&&s){s(),x();return}if(_>As){const H=g<0;if(y(H)){x();return}k(H);return}x()}}catch(_){console.error("Gesture handling error:",_),x()}},{threshold:5,filterTaps:!0,preventScroll:!1,pointer:{touch:!0}}),style:{x:u,y:d,opacity:l,scale:m,transform:c.to(j=>`rotate(${j}deg)`)}}},Os={flex:"1",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"1rem",paddingBottom:"120px",maxHeight:"calc(100vh - 200px)",minHeight:"400px"},qe={base:"absolute w-full h-full flex justify-center items-center transition-all duration-400 ease-in-out",current:"absolute w-full h-full flex justify-center items-center"},Xe={prev:{transform:"translateY(16px) scale(0.94)",opacity:.6,zIndex:1},next:{transform:"translateY(8px) scale(0.97)",opacity:.8,zIndex:2},current:{touchAction:"none",zIndex:50}},Fs={zIndex:4,marginBottom:"8px"},Ls=({appointments:e,currentIndex:n,onNext:s,onPrevious:r,onRefresh:o,paymentMode:i=!1,onCompletePayment:u})=>{const d=f.useMemo(()=>e[n],[e,n]),l=f.useMemo(()=>e[n+1],[e,n]),m=f.useMemo(()=>e[n-1],[e,n]),c=Is({onSwipeLeft:s,onSwipeRight:r,onSwipeDown:i?void 0:o,disabled:e.length<=1||i,isFirst:n===0,isLast:n===e.length-1}),b=Pa({transform:i?"rotateY(180deg)":"rotateY(0deg)",config:{tension:200,friction:25}});return Ua.useEffect(()=>{window.currentCardIndex=n},[n]),d?a.jsxDEV("div",{className:"relative w-full flex items-center justify-center",style:Os,children:[m&&a.jsxDEV("div",{className:qe.base,style:Xe.prev,children:a.jsxDEV(Ze,{appointment:m,isActive:!1},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:116,columnNumber:11},void 0)},`prev-${m._id}`,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:111,columnNumber:9},void 0),l&&a.jsxDEV("div",{className:qe.base,style:Xe.next,children:a.jsxDEV(Ze,{appointment:l,isActive:!1},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:129,columnNumber:11},void 0)},`next-${l._id}`,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:124,columnNumber:9},void 0),a.jsxDEV(sa.div,{...c.bind(),className:qe.current,style:{...c.style,...Xe.current,...b,transformStyle:"preserve-3d"},children:[a.jsxDEV("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(0deg)"},children:a.jsxDEV(Ze,{appointment:d,isActive:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:158,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:149,columnNumber:9},void 0),a.jsxDEV("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:a.jsxDEV(Us,{appointment:d,onCompletePayment:u},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:174,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:165,columnNumber:9},void 0)]},`swipe-${n}-${d._id}`,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:137,columnNumber:7},void 0),e.length>1&&a.jsxDEV("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",style:Fs,children:e.map((x,y)=>a.jsxDEV("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${y===n?"bg-exora-primary":"bg-gray-300"}`},y,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:188,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:183,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:105,columnNumber:5},void 0):a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV("div",{className:"text-center text-gray-500",children:a.jsxDEV("p",{className:"text-xl",children:"No hay citas para esta fecha"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:97,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:96,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/CardStack.tsx",lineNumber:95,columnNumber:7},void 0)},$s=({appointments:e,selectedDate:n,onAppointmentClick:s})=>{const r=f.useMemo(()=>{if(e.length===0)return null;let l=23,m=0;return e.forEach(c=>{const b=new Date(c.fecha),x=b.getHours(),y=b.getMinutes(),k=parseInt(c.duracion||"60"),R=x,I=y+k,j=x+Math.floor(I/60),g=I%60>0?j+1:j;l=Math.min(l,R),m=Math.max(m,g)}),{start:l,end:m}},[e]),o=f.useMemo(()=>{if(!r)return[];const l=[];for(let m=r.start;m<=r.end;m++)for(let c=0;c<60&&!(m===r.end&&c>0);c+=30){const b=`${m.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`,x=`${b}:00`;l.push({hour:m,minute:c,time:b,fullTime:x})}return l},[r]),i=f.useMemo(()=>r?e.map((l,m)=>{const c=new Date(l.fecha),b=c.getHours(),x=c.getMinutes(),y=parseInt(l.duracion||"60"),k=(b-r.start)*60+x,R=Math.max(40,y*2);return{...l,index:m,hour:b,minute:x,startMinutes:k,durationMinutes:y,heightPx:R,timeDisplay:`${b.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}`}}):[],[e,r]),u=l=>{s&&s(l)},d=l=>new Date(l+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return a.jsxDEV("div",{className:"flex flex-col h-full bg-white",children:[a.jsxDEV("div",{className:"flex-shrink-0 p-4 border-b border-gray-200",children:a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900 capitalize",children:d(n)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:128,columnNumber:11},void 0),a.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:[i.length," citas programadas"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:131,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:127,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:126,columnNumber:7},void 0),a.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:r?a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("div",{className:"relative",style:{height:`${o.length*60}px`},children:[a.jsxDEV("div",{className:"grid grid-cols-1 gap-0",children:o.map(l=>a.jsxDEV("div",{className:"border-b border-gray-100 h-[60px] flex",children:[a.jsxDEV("div",{className:"w-16 flex-shrink-0 p-2 border-r border-gray-200",children:a.jsxDEV("div",{className:"flex flex-col items-center",children:[a.jsxDEV("span",{className:"text-xs font-medium text-gray-600",children:l.time},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:160,columnNumber:23},void 0),l.minute===0&&a.jsxDEV(Cs,{size:12,className:"text-gray-400 mt-1"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:164,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:159,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:158,columnNumber:19},void 0),a.jsxDEV("div",{className:"flex-1"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:170,columnNumber:19},void 0)]},`${l.hour}-${l.minute}`,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:153,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:151,columnNumber:13},void 0),a.jsxDEV("div",{className:"absolute top-0 left-16 right-0 bottom-0",children:i.map(l=>{var c;const m=l.startMinutes*2;return a.jsxDEV("button",{onClick:()=>u(l),className:"absolute left-2 right-2 text-left p-2 rounded-lg transition-all duration-200 hover:shadow-md border-l-4",style:{top:`${m}px`,height:`${l.heightPx}px`,backgroundColor:l.pagada?"#F0F9FF":"#FCFFA8",borderLeftColor:l.profesional.color||"#555BF6",zIndex:10},children:a.jsxDEV("div",{className:"h-full flex flex-col justify-start overflow-hidden",children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[a.jsxDEV("span",{className:"text-xs font-medium text-gray-600",children:l.timeDisplay},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:197,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-xs font-semibold truncate ml-2",style:{color:"#555BF6"},children:l.usuario.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:200,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:196,columnNumber:23},void 0),a.jsxDEV("div",{className:"flex items-center space-x-1 mb-1",children:[a.jsxDEV(oa,{size:10,className:"text-gray-500 flex-shrink-0"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:207,columnNumber:25},void 0),a.jsxDEV("span",{className:"text-xs text-gray-700 truncate font-medium",children:((c=l.servicios[0])==null?void 0:c.nombre)||"Sin servicio"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:208,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:206,columnNumber:23},void 0),l.durationMinutes>=30&&a.jsxDEV("div",{className:"text-xs text-gray-600 truncate mb-1",children:l.profesional.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:215,columnNumber:25},void 0),l.durationMinutes>=45&&a.jsxDEV("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsxDEV("div",{className:"flex items-center space-x-1",children:[a.jsxDEV(Ba,{size:8},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:224,columnNumber:29},void 0),a.jsxDEV("span",{children:l.sucursal.nombre},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:225,columnNumber:29},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:223,columnNumber:27},void 0),a.jsxDEV("span",{children:["(",l.durationMinutes,"min)"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:227,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:222,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:194,columnNumber:21},void 0)},l._id,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:182,columnNumber:19},void 0)})},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:176,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:149,columnNumber:13},void 0),a.jsxDEV(zs,{selectedDate:n,timeRange:r},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:238,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:147,columnNumber:11},void 0):a.jsxDEV("div",{className:"flex-1 flex items-center justify-center h-full",children:a.jsxDEV("div",{className:"text-center text-gray-500",children:[a.jsxDEV("p",{className:"text-lg font-medium",children:"No hay citas disponibles hoy"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:142,columnNumber:15},void 0),a.jsxDEV("p",{className:"text-sm mt-2",children:"Selecciona otra fecha para ver las citas"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:143,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:141,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:140,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:138,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:124,columnNumber:5},void 0)},zs=({selectedDate:e,timeRange:n})=>{const s=f.useMemo(()=>{const r=new Date,o=new Date().toISOString().split("T")[0];if(e!==o||!n)return null;const i=r.getHours(),u=r.getMinutes();return i<n.start||i>n.end?null:((i-n.start)*60+u)*2},[e,n]);return s===null?null:a.jsxDEV("div",{className:"absolute left-0 right-0 z-10 pointer-events-none",style:{top:`${s}px`},children:a.jsxDEV("div",{className:"flex items-center",children:[a.jsxDEV("div",{className:"w-16 flex justify-center",children:a.jsxDEV("div",{className:"w-2 h-2 bg-red-500 rounded-full"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:276,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:275,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex-1 h-0.5 bg-red-500"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:278,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:274,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DayView.tsx",lineNumber:270,columnNumber:5},void 0)},Bs=({selectedDate:e,onDateChange:n})=>{const[s,r]=f.useState(!1),o=f.useMemo(()=>new Date(e+"T00:00:00"),[e]),i=f.useMemo(()=>ls(o),[o]),u=l=>{const m=l.target.value;n(m),r(!1)},d=f.useMemo(()=>{const l=new Date,m=new Date(l);m.setDate(m.getDate()-1);const c=new Date(l);c.setDate(c.getDate()+1);const b=new Date(l);return b.setDate(b.getDate()+2),[{label:"Ayer",date:Ee(m)},{label:"Hoy",date:Ee(l)},{label:"Mañana",date:Ee(c)},{label:"Pasado mañana",date:Ee(b)}]},[]);return a.jsxDEV("div",{className:"relative z-[100]",children:[a.jsxDEV("button",{onClick:()=>r(!s),className:"flex items-center space-x-2 px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200 hover:bg-gray-50 transition-colors",children:[a.jsxDEV("span",{className:"font-medium text-gray-900",children:i},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:48,columnNumber:9},void 0),a.jsxDEV(js,{size:20,className:`transition-transform duration-200 ${s?"rotate-180":""}`},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:49,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:44,columnNumber:7},void 0),s&&a.jsxDEV(a.Fragment,{children:[a.jsxDEV("div",{className:"fixed inset-0 z-[9998]",onClick:()=>r(!1)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:58,columnNumber:11},void 0),a.jsxDEV("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-[9999]",children:a.jsxDEV("div",{className:"p-4",children:[a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Acceso rápido"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:68,columnNumber:17},void 0),a.jsxDEV("div",{className:"space-y-1",children:d.map(l=>a.jsxDEV("button",{onClick:()=>{n(l.date),r(!1)},className:`w-full text-left px-3 py-2 rounded text-sm transition-colors ${l.date===e?"bg-exora-primary text-white":"hover:bg-gray-100 text-gray-700"}`,children:l.label},l.date,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:71,columnNumber:21},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:69,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:67,columnNumber:15},void 0),a.jsxDEV("div",{children:[a.jsxDEV("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Seleccionar fecha"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:91,columnNumber:17},void 0),a.jsxDEV("input",{type:"date",value:e,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-exora-primary focus:border-transparent"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:92,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:90,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:65,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:64,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:56,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/DateSelector.tsx",lineNumber:43,columnNumber:5},void 0)};var de=(e=>(e.CARDS="cards",e.DAY="day",e.WEEK="week",e))(de||{});const Hs=({currentMode:e,onModeChange:n})=>{const s=[{mode:de.CARDS,icon:Ds,label:"Cards",title:"Vista de tarjetas"},{mode:de.DAY,icon:Vs,label:"Día",title:"Vista de día"}];return a.jsxDEV("div",{className:"flex items-center space-x-0.5 bg-gray-100 rounded-lg p-1",children:s.map(({mode:r,icon:o,label:i,title:u})=>a.jsxDEV("button",{onClick:()=>n(r),title:u,className:`
            flex items-center space-x-2 px-3 py-2.5 rounded-md text-xs font-medium transition-all duration-200 min-h-[44px]
            ${e===r?"bg-white text-exora-primary shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}
          `,children:[a.jsxDEV(o,{size:18},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:44,columnNumber:11},void 0),a.jsxDEV("span",{className:"hidden sm:inline text-sm",children:i},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:45,columnNumber:11},void 0)]},r,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:32,columnNumber:9},void 0))},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/ViewModeSelector.tsx",lineNumber:30,columnNumber:5},void 0)},Ys=({canGoBack:e,canGoForward:n,onPrevious:s,onNext:r,onAdd:o,disabled:i=!1})=>a.jsxDEV("div",{className:"safe-area-bottom bg-white border-t border-gray-200 flex flex-col justify-end",style:{backgroundColor:"var(--exora-primary)",minHeight:"80px"},children:a.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxDEV("button",{onClick:s,disabled:!e||i,className:`
            flex items-center justify-center w-12 h-12 rounded-full
            transition-all duration-200
            ${e&&!i?"bg-white/20 text-white hover:bg-white/30 active:bg-white/40":"bg-white/10 text-white/40 cursor-not-allowed"}
          `,children:a.jsxDEV(hs,{size:24},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:40,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:28,columnNumber:9},void 0),a.jsxDEV("button",{onClick:o,disabled:i,className:`
            flex items-center justify-center w-14 h-14 rounded-full
            shadow-lg transition-all duration-200
            ${i?"opacity-50 cursor-not-allowed":"hover:scale-105 active:scale-95"}
          `,style:{backgroundColor:"var(--exora-light-yellow)"},children:a.jsxDEV("span",{className:"text-2xl font-bold",style:{color:"#555BF6"},children:"€"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:57,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:44,columnNumber:9},void 0),a.jsxDEV("button",{onClick:r,disabled:!n||i,className:`
            flex items-center justify-center w-12 h-12 rounded-full
            transition-all duration-200
            ${n&&!i?"bg-white/20 text-white hover:bg-white/30 active:bg-white/40":"bg-white/10 text-white/40 cursor-not-allowed"}
          `,children:a.jsxDEV(ys,{size:24},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:78,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:66,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:26,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/components/BottomNavigation.tsx",lineNumber:22,columnNumber:5},void 0);class Ws{static async fetchAppointments(n){try{return(await ve.post("/citas/dia/profesional",n)).data}catch(s){throw console.error("Error fetching appointments:",s),s}}}let ue=new Map;const Gs=10;let xe=new Map;const Js=(e,n=!1)=>{const s=new Date,r=Math.floor(s.getTime()/(5*60*1e3)),o=`${e.length}-${r}-${e.map(d=>`${d._id}-${d.pagada}-${d.usuario.saldoMonedero||0}`).join(",")}`;if(!n&&ue.has(o))return ue.get(o);const u=e.filter(d=>{if(!d.pagada)return!0;const l=new Date(d.fecha);return l.setMinutes(l.getMinutes()+15),s<=l}).sort((d,l)=>{const m=new Date(d.fecha),c=new Date(l.fecha);return m.getTime()-c.getTime()});if(ue.size>=Gs){const d=ue.keys().next().value;d&&ue.delete(d)}return ue.set(o,u),u},Ks=Sa((e,n)=>({appointments:[],filteredAppointments:[],currentDate:Ee(new Date),currentIndex:0,showPaidOnly:!1,viewMode:de.CARDS,isLoading:!1,error:null,fetchAppointments:async s=>{const r=n(),o=`appointments-${s}`;if(xe.has(o))return xe.get(o);if(r.isLoading&&r.currentDate===s)return;e({isLoading:!0,error:null,appointments:[],filteredAppointments:[],currentIndex:0,showPaidOnly:!1});const i=(async()=>{try{const u=new Date(s+"T00:00:00.000Z").toISOString(),d=await Ws.fetchAppointments({empresa:"662f5bb1f956857b8cd0d9c7",fecha:u});if(d.ok){const l=Js(d.citas);d.citas.length>0&&(console.log("=== EJEMPLOS JSON CITAS ==="),d.citas.forEach((c,b)=>{console.log(`--- CITA ${b+1} (${c.usuario.nombre}) ---`),console.log(JSON.stringify(c,null,2))})),e({appointments:d.citas,filteredAppointments:l,currentDate:s,currentIndex:0,isLoading:!1,error:null});const m=d.citas.length-l.length;d.citas.length===0?$("No hay citas para este día",{icon:"ℹ️"}):m>0&&$.success(`${l.length} citas disponibles (${m} finalizadas ocultas)`)}else throw new Error("Error al obtener las citas")}catch(u){console.error("Error fetching appointments:",u),e({appointments:[],filteredAppointments:[],currentDate:s,currentIndex:0,isLoading:!1,error:u.message||"Error al cargar las citas"}),$.error(u.message||"Error al cargar las citas")}finally{xe.delete(o)}})();return xe.set(o,i),i},setCurrentIndex:s=>{const{filteredAppointments:r}=n();s>=0&&s<r.length&&e({currentIndex:s})},setCurrentDate:s=>{e({currentDate:s})},setViewMode:s=>{e({viewMode:s})},toggleShowPaid:()=>{console.log("toggleShowPaid: Mostrando todas las citas del día")},clearError:()=>{e({error:null})},clearCache:()=>{ue.clear(),xe.clear()},refreshCurrentData:()=>{const{currentDate:s}=n();if(s){const r=`appointments-${s}`;return xe.delete(r),n().fetchAppointments(s)}}})),Zs=e=>{try{const n=JSON.parse(atob(e.split(".")[1]));return n.exp?Date.now()>=n.exp*1e3:!1}catch{return!0}},qs=async e=>{if(!e.promocion||e.promocion.length===0)return{importeConDescuento:e.importe,descuentoTotal:0};try{const s=(await _e.getPromocionesEmpresa(e.empresa)).filter(i=>e.promocion.includes(i._id));let r=0;s.forEach(i=>{i.activo&&i.tipo==="descuento"&&i.destino==="servicio"&&(i.porcentaje!==null&&i.porcentaje!==void 0?r+=e.importe*(i.porcentaje/100):i.cifra!==void 0&&i.cifra>0&&(r+=i.cifra/100))});const o=Math.max(0,e.importe-r);return console.log("=== CÁLCULO DE DESCUENTOS ==="),console.log("Importe original:",e.importe),console.log("Promociones aplicadas:",s.length),console.log("Descuento total:",r),console.log("Importe final:",o),{importeConDescuento:o,descuentoTotal:r}}catch(n){return console.error("Error calculando descuentos:",n),{importeConDescuento:e.importe,descuentoTotal:0}}},Xs=async(e,n)=>{var u,d,l,m;const s=localStorage.getItem("exora_auth_token");if(!s)throw new Error("No hay token de autenticación válido");if(Zs(s))throw new Error("Token de autenticación expirado. Por favor, inicia sesión nuevamente.");const{importeConDescuento:r,descuentoTotal:o}=await qs(e),i={empresa:e.empresa,usuario:e.usuario._id,sucursal:e.sucursal._id,profesional:e.profesional._id,fechaCita:e.fecha,importe:r,promocion:e.promocion,servicios:e.servicios.map(c=>({_id:c._id,variantes:c.variantes||[],nombre:c.nombre,duracion:c.duracion||"60",precio:c.precio,deleted:c.deleted||!1})),variantes:e.variantes,metodoPago:n,productos:[],cita:e._id,...o>0&&{descuentos:[{tipo:"promocion",valor:o,descripcion:"Descuento por promociones aplicadas"}]}};console.log("=== PETICIÓN DE VENTA ==="),console.log("URL:","https://api.exora.app/api/ventas"),console.log("Token presente:",s?"SÍ":"NO"),console.log("Importe original:",e.importe),console.log("Importe con descuento:",r),console.log("Descuento aplicado:",o);try{const c=await fetch("https://api.exora.app/api/ventas",{method:"POST",headers:{"Content-Type":"application/json","x-token":s},body:JSON.stringify(i)});if(console.log("=== RESPUESTA RECIBIDA ==="),console.log("Status:",c.status),!c.ok)throw console.log("Error response:",c.status),new Error(`HTTP ${c.status}: Error en la venta`);const b=await c.json();return console.log("=== VENTA EXITOSA ==="),b}catch(c){console.error("=== ERROR EN VENTA ==="),console.error("Error message:",c==null?void 0:c.message);const b=((d=(u=c==null?void 0:c.response)==null?void 0:u.data)==null?void 0:d.message)||((m=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:m.msg)||(c==null?void 0:c.message)||"Error al registrar la venta";throw new Error(b)}},Qs=()=>{const e=Aa(),[n,s]=f.useState(!1),{user:r,isAuthenticated:o,logout:i,checkAuth:u}=ra(),{filteredAppointments:d,currentDate:l,currentIndex:m,viewMode:c,showPaidOnly:b,isLoading:x,error:y,fetchAppointments:k,setCurrentIndex:R,setCurrentDate:I,setViewMode:j,toggleShowPaid:g}=Ks();f.useEffect(()=>{u()},[u]),f.useEffect(()=>{o||e("/login")},[o,e]),f.useEffect(()=>{o&&k(l)},[l,k,o]);const S=f.useCallback(w=>{I(w)},[I]),_=f.useCallback(w=>{j(w),n&&s(!1)},[j,n]),ee=f.useCallback(w=>{const F=d.findIndex(Z=>Z._id===w._id);F!==-1&&(R(F),j(de.CARDS),!n&&!w.pagada&&s(!0))},[d,R,j,n]),H=f.useCallback(()=>{m<d.length-1&&R(m+1)},[m,d.length,R]),me=f.useCallback(()=>{if(m>0&&m<=d.length-1){R(m-1);return}!b&&m===0&&g()},[m,d.length,b,R,g]),ae=f.useCallback(()=>{k(l)},[l,k]),X=f.useCallback(()=>{s(!1)},[]),fe=f.useCallback(()=>{if(n){X();return}if(d.length===0){$.error("No hay citas disponibles");return}const w=d[m];if(!w){$.error("No se encontró la cita");return}if(w.pagada){$.error("Esta cita ya está pagada");return}s(!0)},[m,d,n,X]),je=f.useCallback(async(w,F,Z)=>{const A=d[m];if(!A){$.error("No se encontró la cita");return}try{$.loading("Procesando pago..."),await Xs(Z||A,F),$.dismiss(),$.success("Pago completado exitosamente"),X(),k(l)}catch(Y){$.dismiss(),console.error("Error al procesar el pago:",Y),Y.authError||Y.status===401?($.error("Sesión expirada. Por favor, inicia sesión nuevamente."),i(),e("/login")):$.error(Y.message||"Error al procesar el pago")}},[l,m,d,k,X,i,e]),pe=f.useCallback(()=>{X(),$("Pago cancelado")},[X]),G=f.useCallback(()=>{i(),e("/login")},[i,e]),K=f.useMemo(()=>r?"name"in r&&r.name?r.name:r.nombre||"Usuario":"Usuario",[r]),v=f.useMemo(()=>m>0&&!n,[m,n]),P=f.useMemo(()=>m<d.length-1&&!n,[m,d.length,n]);return{userName:K,isAuthenticated:o,paymentMode:n,currentDate:l,currentIndex:m,viewMode:c,isLoading:x,error:y,showPaidOnly:b,filteredAppointments:d,canGoBack:v,canGoForward:P,handlers:{changeDate:S,changeViewMode:_,nextAppointment:H,previousAppointment:me,refreshAppointments:ae,initiatePaymentMode:fe,completePayment:je,cancelPayment:pe,logout:G,selectAppointment:ee}}},et=()=>{const{userName:e,isAuthenticated:n,paymentMode:s,currentDate:r,currentIndex:o,viewMode:i,isLoading:u,error:d,showPaidOnly:l,filteredAppointments:m,canGoBack:c,canGoForward:b,handlers:x}=Qs(),y=m.length===0;return n?a.jsxDEV("div",{className:"fixed inset-0 flex flex-col overflow-hidden",style:{backgroundColor:"var(--exora-background)"},children:[a.jsxDEV("header",{className:"bg-white shadow-sm border-b border-gray-200 z-[10000]",children:a.jsxDEV("div",{className:"max-w-md mx-auto px-4 py-3",children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[a.jsxDEV("div",{children:[a.jsxDEV("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:["Hola, ",e]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:46,columnNumber:15},void 0),a.jsxDEV("p",{className:"text-xs sm:text-sm text-gray-600",children:[m.length," citas ",l?"pagadas":"pendientes"]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:49,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:45,columnNumber:13},void 0),a.jsxDEV("button",{onClick:x.logout,className:"text-gray-500 hover:text-gray-700 transition-colors p-2 flex-shrink-0",title:"Cerrar sesión",children:a.jsxDEV(Es,{size:20},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:59,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:54,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:44,columnNumber:11},void 0),a.jsxDEV("div",{className:"flex items-center justify-between space-x-2",children:[a.jsxDEV(Hs,{currentMode:i,onModeChange:x.changeViewMode},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:65,columnNumber:13},void 0),a.jsxDEV(Bs,{selectedDate:r,onDateChange:x.changeDate},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:70,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:64,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:42,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:41,columnNumber:7},void 0),a.jsxDEV("main",{className:"flex-1 flex flex-col relative overflow-visible min-h-0",children:u?a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV(na,{size:"lg"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:79,columnNumber:15},void 0),a.jsxDEV("p",{className:"mt-4 text-gray-600",children:"Cargando citas..."},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:80,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:78,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:77,columnNumber:11},void 0):d?a.jsxDEV("div",{className:"flex-1 flex items-center justify-center",children:a.jsxDEV("div",{className:"text-center text-red-600",children:[a.jsxDEV("p",{className:"text-lg font-medium",children:"Error al cargar las citas"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:86,columnNumber:15},void 0),a.jsxDEV("p",{className:"text-sm mt-2",children:d},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:87,columnNumber:15},void 0),a.jsxDEV("button",{onClick:x.refreshAppointments,className:"mt-4 px-4 py-2 bg-exora-primary text-white rounded-lg hover:opacity-90 transition-opacity",children:"Reintentar"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:88,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:85,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:84,columnNumber:11},void 0):a.jsxDEV(a.Fragment,{children:i===de.CARDS?a.jsxDEV("div",{className:"flex-1 flex items-start justify-center px-4 pt-8",children:a.jsxDEV(Ls,{appointments:m,currentIndex:o,onNext:x.nextAppointment,onPrevious:x.previousAppointment,onRefresh:x.refreshAppointments,paymentMode:s,onCompletePayment:x.completePayment},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:100,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:99,columnNumber:15},void 0):a.jsxDEV("div",{className:"flex-1 overflow-hidden",children:a.jsxDEV($s,{appointments:m,selectedDate:r,onAppointmentClick:x.selectAppointment},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:112,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:111,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:97,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:75,columnNumber:7},void 0),i===de.CARDS&&a.jsxDEV("div",{className:"z-10",children:a.jsxDEV(Ys,{canGoBack:c,canGoForward:b,onPrevious:s?void 0:x.previousAppointment,onNext:s?void 0:x.nextAppointment,onAdd:x.initiatePaymentMode,disabled:y},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:125,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:124,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:40,columnNumber:5},void 0):a.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxDEV(na,{size:"lg"},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:34,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/pages/Dashboard.tsx",lineNumber:33,columnNumber:7},void 0)},at=()=>{const{checkAuth:e,isAuthenticated:n}=ra();return f.useEffect(()=>{e()},[e]),a.jsxDEV(bn,{basename:"/",children:a.jsxDEV("div",{className:"app font-main",children:[a.jsxDEV(Nn,{children:[a.jsxDEV(Ge,{path:"/login",element:n?a.jsxDEV(Je,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:21,columnNumber:53},void 0):a.jsxDEV(ps,{},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:21,columnNumber:41},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:19,columnNumber:11},void 0),a.jsxDEV(Ge,{path:"/dashboard",element:n?a.jsxDEV(et,{},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:25,columnNumber:40},void 0):a.jsxDEV(Je,{to:"/login",replace:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:25,columnNumber:56},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:23,columnNumber:11},void 0),a.jsxDEV(Ge,{path:"/",element:a.jsxDEV(Je,{to:n?"/dashboard":"/login",replace:!0},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:29,columnNumber:22},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:27,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:18,columnNumber:9},void 0),a.jsxDEV(is,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:1500,style:{background:"#fff",color:"#333",fontFamily:"var(--font-main)",fontSize:"14px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},success:{iconTheme:{primary:"var(--exora-primary)",secondary:"#fff"}},error:{iconTheme:{primary:"var(--exora-secondary)",secondary:"#fff"}}}},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:34,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:17,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/App.tsx",lineNumber:16,columnNumber:5},void 0)};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});ka(document.getElementById("root")).render(a.jsxDEV(f.StrictMode,{children:a.jsxDEV(at,{},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/main.tsx",lineNumber:21,columnNumber:5},void 0)},void 0,!1,{fileName:"/Users/juanjoseatenciapato/agendaweb/src/main.tsx",lineNumber:20,columnNumber:3},void 0));
